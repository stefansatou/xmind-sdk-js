!function(){var e=function(e){var t;return function(r){return t||e(t={exports:{},parent:r},t.exports),t.exports}},t=e(function(e,r){(function(e,t){(function(){var i=h.nextTick,n=Function.prototype.apply,o=Array.prototype.slice,a={},s=0;function l(e,t){this._id=e,this._clearFn=t}r.setTimeout=function(){return new l(n.call(setTimeout,window,arguments),clearTimeout)},r.setInterval=function(){return new l(n.call(setInterval,window,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},r.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},r.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},r._unrefActive=r.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r.setImmediate="function"==typeof e?e:function(e){var t=s++,n=!(arguments.length<2)&&o.call(arguments,1);return a[t]=!0,i(function(){a[t]&&(n?e.apply(null,n):e.call(null),r.clearImmediate(t))}),t},r.clearImmediate="function"==typeof t?t:function(e){delete a[e]}}).call(this)}).call(this,t({}).setImmediate,t({}).clearImmediate)}),r=e(function(e,t){(function(e){(function(){"use strict";t.Buffer=i,t.SlowBuffer=function(e){+e!=e&&(e=0);return i.alloc(+e)},t.INSPECT_MAX_BYTES=50;var e=2147483647;function r(t){if(t>e)throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=new Uint8Array(t);return r.__proto__=i.prototype,r}function i(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return a(e)}return n(e,t,r)}function n(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!i.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|h(e,t),o=r(n),a=o.write(e,t);a!==n&&(o=o.slice(0,a));return o}(e,t);if(ArrayBuffer.isView(e))return s(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(F(e,ArrayBuffer)||e&&F(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return n.__proto__=i.prototype,n}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return i.from(o,t,n);var a=function(e){if(i.isBuffer(e)){var t=0|l(e.length),n=r(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||M(e.length)?r(0):s(e);if("Buffer"===e.type&&Array.isArray(e.data))return s(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e){return o(e),r(e<0?0:0|l(e))}function s(e){for(var t=e.length<0?0:0|l(e.length),i=r(t),n=0;n<t;n+=1)i[n]=255&e[n];return i}function l(t){if(t>=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e.toString(16)+" bytes");return 0|t}function h(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(e).length;default:if(o)return n?-1:k(e).length;t=(""+t).toLowerCase(),o=!0}}function c(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function u(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),M(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:d(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):d(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function d(e,t,r,i,n){var o,a=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function h(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){var c=-1;for(o=r;o<s;o++)if(h(e,o)===h(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var u=!0,d=0;d<l;d++)if(h(e,o+d)!==h(t,d)){u=!1;break}if(u)return o}return-1}function f(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(M(s))return a;e[r+a]=s}return a}function p(e,t,r,i){return D(k(t,e.length-r),e,r,i)}function m(e,t,r,i){return D(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function g(e,t,r,i){return m(e,t,r,i)}function _(e,t,r,i){return D(L(t),e,r,i)}function v(e,t,r,i){return D(function(e,t){for(var r,i,n,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),i=r>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function y(e,t,r){return 0===t&&r===e.length?Dn.fromByteArray(e):Dn.fromByteArray(e.slice(t,r))}function E(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o,a,s,l,h=e[n],c=null,u=h>239?4:h>223?3:h>191?2:1;if(n+u<=r)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(o=e[n+1]))&&(l=(31&h)<<6|63&o)>127&&(c=l);break;case 3:o=e[n+1],a=e[n+2],128==(192&o)&&128==(192&a)&&(l=(15&h)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[n+1],a=e[n+2],s=e[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&h)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),n+=u}return function(e){var t=e.length;if(t<=b)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=b));return r}(i)}t.kMaxLength=e,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,r){return n(e,t,r)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,i){return function(e,t,i){return o(e),e<=0?r(e):void 0!==t?"string"==typeof i?r(e).fill(t,i):r(e).fill(t):r(e)}(e,t,i)},i.allocUnsafe=function(e){return a(e)},i.allocUnsafeSlow=function(e){return a(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(F(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),F(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(F(a,Uint8Array)&&(a=i.from(a)),!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)c(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)c(this,t,t+3),c(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)c(this,t,t+7),c(this,t+1,t+6),c(this,t+2,t+5),c(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):function(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return w(this,t,r);case"base64":return y(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(F(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),l=Math.min(a,s),h=this.slice(n,o),c=e.slice(t,r),u=0;u<l;++u)if(h[u]!==c[u]){a=h[u],s=c[u];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return u(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return u(this,e,t,r,!1)},i.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return f(this,e,t,r);case"utf8":case"utf-8":return p(this,e,t,r);case"ascii":return m(this,e,t,r);case"latin1":case"binary":return g(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function T(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function w(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function S(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=R(e[o]);return n}function O(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function A(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function I(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,i,n){return t=+t,r>>>=0,n||I(e,0,r,4),$n.write(e,t,r,i,23,4),r+4}function x(e,t,r,i,n){return t=+t,r>>>=0,n||I(e,0,r,8),$n.write(e,t,r,i,52,8),r+8}i.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=i.prototype,n},i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},i.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),$n.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),$n.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),$n.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),$n.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t>>>=0,r>>>=0,i)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t>>>=0,r>>>=0,i)||C(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},i.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var a=o-1;a>=0;--a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=i.isBuffer(e)?e:i.from(e,n),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=s[a%l]}return this};var N=/[^+/0-9A-Za-z-_]/g;function R(e){return e<16?"0"+e.toString(16):e.toString(16)}function k(e,t){var r;t=t||1/0;for(var i=e.length,n=null,o=[],a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function L(e){return Dn.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function F(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}}).call(this)}).call(this,r({}).Buffer)}),i=e(function(e,t){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),n=e(function(e,t){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),o=e(function(e,t){var r=1e3,i=60*r,n=60*i,o=24*n,a=7*o,s=365.25*o;function l(e,t,r,i){var n=t>=1.5*r;return Math.round(e/r)+" "+i+(n?"s":"")}e.exports=function(e,t){t=t||{};var h=typeof e;if("string"===h&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var l=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*a;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*i;case"seconds":case"second":case"secs":case"sec":case"s":return l*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===h&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return l(e,t,o,"day");if(t>=n)return l(e,t,n,"hour");if(t>=i)return l(e,t,i,"minute");if(t>=r)return l(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=n)return Math.round(e/n)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}});var a,s,l=function(e){function t(e){let i,n,o,a=null;function s(...e){if(!s.enabled)return;const r=s,n=Number(new Date),o=n-(i||n);r.diff=o,r.prev=i,r.curr=n,i=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(i,n)=>{if("%%"===i)return"%";a++;const o=t.formatters[n];if("function"==typeof o){const t=e[a];i=o.call(r,t),e.splice(a,1),a--}return i}),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(n!==t.namespaces&&(n=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,r){const i=t(this.namespace+(void 0===r?":":r)+e);return i.log=this.log,i}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length;for(r=0;r<n;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,i;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=o({}),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t},h={},c=h={};function u(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function f(e){if(a===setTimeout)return setTimeout(e,0);if((a===u||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:u}catch(e){a=u}try{s="function"==typeof clearTimeout?clearTimeout:d}catch(e){s=d}}();var p,m=[],g=!1,_=-1;function v(){g&&p&&(g=!1,p.length?m=p.concat(m):_=-1,m.length&&y())}function y(){if(!g){var e=f(v);g=!0;for(var t=m.length;t;){for(p=m,m=[];++_<t;)p&&p[_].run();_=-1,t=m.length}p=null,g=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===d||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function E(e,t){this.fun=e,this.array=t}function b(){}c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new E(e,t)),1!==m.length||g||f(y)},E.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=b,c.addListener=b,c.once=b,c.off=b,c.removeListener=b,c.removeAllListeners=b,c.emit=b,c.prependListener=b,c.prependOnceListener=b,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0};var T={};(function(e){(function(){T.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+T.humanize(this.diff),!this.useColors)return;const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,t)},T.save=function(e){try{e?T.storage.setItem("debug",e):T.storage.removeItem("debug")}catch(e){}},T.load=function(){let t;try{t=T.storage.getItem("debug")}catch(e){}!t&&void 0!==e&&"env"in e&&(t=e.env.DEBUG);return t},T.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},T.storage=function(){try{return localStorage}catch(e){}}(),T.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),T.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],T.log=console.debug||console.log||(()=>{}),T=l(T);const{formatters:t}=T;t.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,h);var w={},S="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(S){var O=new Uint8Array(16);w=function(){return S(O),O}}else{var A=new Array(16);w=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),A[t]=e>>>((3&t)<<3)&255;return A}}for(var C=[],I=0;I<256;++I)C[I]=(I+256).toString(16).substr(1);var P=function(e,t){var r=t||0,i=C;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")};var x=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var n=(e=e||{}).random||(e.rng||w)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t)for(var o=0;o<16;++o)t[i+o]=n[o];return t||P(n)},N={importantTopic:{type:"topic",properties:{"fo:font-weight":"bold","fo:color":"#F04137","svg:fill":"none"}},minorTopic:{type:"topic",properties:{"svg:fill":"none","fo:font-weight":"bold","fo:color":"#06ABD0"}},expiredTopic:{type:"topic",properties:{"fo:font-style":"italic","fo:text-decoration":" line-through"}},centralTopic:{properties:{"fo:color":"#000000","fo:font-family":"Avenir Next","fo:font-weight":"600","fo:font-size":"24pt","fo:font-style":"normal","border-line-width":"0","border-line-color":"#374C75","line-color":"#374C75","line-width":"3pt","svg:fill":"#FFFFFF"},styleId:"39687c955b998eedc81008bf3f",type:"topic"},boundary:{properties:{"fo:font-style":"normal","fo:color":"#FFFFFF","fo:font-family":"Avenir Next","fo:font-weight":"600","fo:font-size":"14pt","svg:fill":"#E9E9E8","line-color":"#5E5E5E","line-pattern":"dot"},styleId:"29f9b72a43c95e2d17c1ebd6c8",type:"boundary"},floatingTopic:{properties:{"svg:fill":"#EBEBEB","shape-class":"org.xmind.topicShape.roundedRect","border-line-width":"0pt","border-line-color":"#374C75","fo:color":"#332F2E","fo:font-family":"Avenir Next","fo:font-size":"14pt","fo:font-weight":"600","fo:font-style":"normal","line-class":"org.xmind.branchConnection.bight","line-color":"#5E5E5E","line-width":"2pt"},styleId:"8edb0655eed84223023988f896",type:"topic"},subTopic:{type:"topic",properties:{"line-class":"org.xmind.branchConnection.bight","line-width":"1pt","fo:font-family":"Avenir Next","fo:font-size":"14pt","fo:color":"#091C34","fo:text-align":"left"}},mainTopic:{type:"topic",properties:{"border-line-width":"2pt","line-class":"org.xmind.branchConnection.bight","line-width":"2pt","svg:fill":"none","shape-class":"org.xmind.topicShape.underline","fo:color":"#091C34","fo:font-size":"16pt","fo:font-family":"Avenir Next","fo:font-weight":"500"}},calloutTopic:{properties:{"fo:font-weight":"600","fo:font-style":"normal","fo:font-size":"14pt","fo:font-family":"Avenir Next","border-line-width":"0","svg:fill":"#5E5E5E","fo:color":"#FFFFFF"},styleId:"4379160bdc98a456dd60a8721d",type:"topic"},summary:{properties:{"shape-class":"org.xmind.summaryShape.square","line-width":"2pt","line-color":"#5E5E5E"},styleId:"14394c4b1a5b6b534182699edf",type:"summary"},summaryTopic:{properties:{"line-class":"org.xmind.branchConnection.bight","line-width":"1pt","line-color":"#5E5E5E","shape-class":"org.xmind.topicShape.roundedRect","svg:fill":"#EBEBEB","fo:color":"#091C34","fo:font-weight":"600","fo:font-style":"normal","fo:font-family":"Avenir Next","fo:font-size":"14pt","border-line-width":"0pt","border-line-color":"#5E5E5E"},styleId:"963bfcbd450931f641aef94ec5",type:"topic"},relationship:{properties:{"line-width":"2pt","line-pattern":"dot","line-color":"#5E5E5E","fo:font-weight":"600","fo:font-style":"normal","fo:color":"#5E5E5E","fo:font-family":"Avenir Next","fo:font-size":"14pt","arrow-begin-class":"org.xmind.arrowShape.attached"},styleId:"67596f401d995d448791686b97",type:"relationship"},map:{properties:{"multi-line-colors":"#F04137 #F8932E #FEC938 #A0C347 #06ABD0 #832A96","line-tapered":"tapered","svg:fill":"#F5F5FA"},styleId:"c9c904312f6968e676f4fafd22",type:"map"},level3:{type:"topic",properties:{"line-class":"org.xmind.branchConnection.bight","line-width":"1pt","border-line-width":"2pt","fo:font-family":"Avenir Next","fo:font-size":"14pt","fo:color":"#091C34","fo:text-align":"left"}}},R={};Object.defineProperty(R,"__esModule",{value:!0}),R.Theme=void 0;const k=T("xmind-sdk:theme"),L=["robust","snowbrush","business","dawn"],D={robust:{importantTopic:{type:"topic",properties:{"fo:font-weight":"bold","fo:color":"#312935","svg:fill":"#FEFF00"}},minorTopic:{type:"topic",properties:{"fo:font-weight":"bold","fo:color":"#312935","svg:fill":"#00EEFF"}},expiredTopic:{type:"topic",properties:{"fo:font-style":"italic","fo:text-decoration":" line-through"}},centralTopic:{properties:{"shape-class":"org.xmind.topicShape.ellipserect","svg:fill":"#D1F786","fo:color":"#302934","line-color":"#30D8C4","line-class":"org.xmind.branchConnection.bight","fo:font-weight":"500","fo:font-family":"Montserrat","fo:font-style":"normal","fo:text-transform":"uppercase","fo:font-size":"30pt","line-width":"3pt","border-line-width":"0"},styleId:"566b3aea3f7b2e0a0cbb89ca83",type:"topic"},boundary:{properties:{"line-color":"#FFFFFF","svg:fill":"#FFFFFF","fo:color":"#302934","fo:font-family":"Montserrat","fo:font-weight":"normal"},styleId:"809a90d25f7974588bed59c06b",type:"boundary"},floatingTopic:{properties:{"shape-class":"org.xmind.topicShape.ellipserect","svg:fill":"#FFFFFF","border-line-color":"#FFFFFF","border-line-width":"2pt","fo:font-family":"Montserrat","fo:font-weight":"normal","fo:font-size":"18pt","fo:color":"#302934","line-class":"org.xmind.branchConnection.bight","line-color":"#30D8C4","line-width":"3pt"},styleId:"b9588c8bfc6ad4c872b9fa082f",type:"topic"},subTopic:{properties:{"fo:font-weight":"normal","fo:color":"#FFFFFF","fo:font-family":"Montserrat","fo:text-align":"left","line-class":"org.xmind.branchConnection.bight"},styleId:"3138d4845e2b6e60dfb0eb5dbb",type:"topic"},mainTopic:{properties:{"fo:font-weight":"normal","fo:color":"#FFFFFF","fo:font-family":"Montserrat","fo:font-size":"24pt","shape-class":"org.xmind.topicShape.underline","svg:fill":"none","line-class":"org.xmind.branchConnection.bight","line-width":"3pt"},styleId:"ae3a94584179df1806911bd775",type:"topic"},calloutTopic:{properties:{"svg:fill":"#FFFFFF","border-line-width":"0","fo:font-family":"Montserrat","fo:font-weight":"400","fo:color":"#302934","fo:font-style":"normal"},styleId:"cf597269c17beb4f39c6daae3f",type:"topic"},summary:{properties:{"line-color":"#FFFFFF"},styleId:"7129e73481eb7a1897b2c8094a",type:"summary"},summaryTopic:{properties:{"svg:fill":"#FFFFFF","border-line-color":"#FFFFFF","fo:font-family":"Montserrat","fo:font-weight":"400","border-line-width":"1pt","fo:color":"#302934","fo:font-style":"normal","fo:font-size":"18pt","line-class":"org.xmind.branchConnection.bight","line-width":"3pt"},styleId:"28db31b676f948c81ce478dc31",type:"topic"},relationship:{properties:{"line-width":"3pt","line-pattern":"solid","line-color":"#FFFFFF","fo:color":"#FFFFFF","fo:font-family":"Montserrat","fo:font-weight":"normal"},styleId:"ea0990886e2ba2b4b3c69ab34d",type:"relationship"},map:{properties:{"line-tapered":"tapered","svg:fill":"#302934"},styleId:"6659012d15a89de3df86e84e92",type:"map"}},snowbrush:N,business:N,dawn:{importantTopic:{type:"topic",properties:{"svg:fill":"#fefbf1","fill-pattern":"solid"}},minorTopic:{type:"topic",properties:{"svg:fill":"#fbe68f","fill-pattern":"solid"}},expiredTopic:{type:"topic",properties:{"fo:text-decoration":"line-through","svg:fill":"none"}},centralTopic:{properties:{"shape-class":"org.xmind.topicShape.doubleunderline","line-class":"org.xmind.branchConnection.elbow","line-width":"2pt","svg:fill":"none","fill-pattern":"solid","border-line-width":"2pt","fo:font-family":"Open Sans","fo:font-style":"normal","fo:font-weight":700,"fo:font-size":"28pt","fo:text-transform":"manual","fo:text-decoration":"none","fo:text-align":"center","line-color":"#e9e9ec","fo:margin-left":"29pt","fo:margin-right":"29pt","fo:margin-top":"15pt","fo:margin-bottom":"15pt","spacing-major":"50pt","spacing-minor":"35pt","line-pattern":"solid","arrow-end-class":"org.xmind.arrowShape.none","alignment-by-level":"inactived"},styleId:"566b3aea3f7b2e0a0cbb89ca83",type:"topic"},boundary:{properties:{"shape-class":"org.xmind.boundaryShape.rect","shape-corner":"20pt","line-width":"1","line-pattern":"dash","fill-pattern":"solid","fo:font-family":"'Open Sans','NeverMind','Microsoft YaHei','PingFang SC','Microsoft JhengHei','sans-serif',sans-serif","fo:font-style":"normal","fo:font-weight":600,"fo:font-size":"13pt","fo:text-transform":"manual","fo:text-decoration":"none","fo:text-align":"center","svg:fill":"#c6bea1","line-color":"#c6bea1","svg:opacity":"0.2","fo:margin-left":"10pt","fo:margin-right":"10pt","fo:margin-top":"6pt","fo:margin-bottom":"6pt"},styleId:"809a90d25f7974588bed59c06b",type:"boundary"},floatingTopic:{properties:{"shape-class":"org.xmind.topicShape.doubleunderline","line-class":"org.xmind.branchConnection.elbow","svg:fill":"none","fill-pattern":"solid","border-line-width":"2pt","fo:font-family":"Open Sans","fo:font-style":"normal","fo:font-weight":700,"fo:font-size":"18pt","fo:text-transform":"manual","fo:text-decoration":"none","fo:text-align":"center","border-line-color":"#e9e9ec","fo:margin-left":"11pt","fo:margin-right":"11pt","fo:margin-top":"11pt","fo:margin-bottom":"11pt","spacing-major":"26pt","spacing-minor":"8pt","line-pattern":"solid","arrow-end-class":"org.xmind.arrowShape.none"},styleId:"b9588c8bfc6ad4c872b9fa082f",type:"topic"},subTopic:{properties:{"shape-class":"org.xmind.topicShape.underline","line-class":"org.xmind.branchConnection.elbow","fill-pattern":"solid","fo:font-family":"Open Sans","fo:font-style":"normal","fo:font-weight":600,"fo:font-size":"14pt","fo:text-transform":"manual","fo:text-decoration":"none","fo:text-align":"left","fo:margin-left":"6pt","fo:margin-right":"6pt","fo:margin-top":"6pt","fo:margin-bottom":"6pt","spacing-major":"26pt","spacing-minor":"8pt","svg:fill":"none"},styleId:"3138d4845e2b6e60dfb0eb5dbb",type:"topic"},mainTopic:{properties:{"shape-class":"org.xmind.topicShape.doubleunderline","line-class":"org.xmind.branchConnection.elbow","svg:fill":"none","fill-pattern":"solid","fo:font-family":"Open Sans","fo:font-style":"normal","fo:font-weight":700,"fo:font-size":"18pt","fo:text-transform":"manual","fo:text-decoration":"none","fo:text-align":"left","fo:margin-left":"18pt","fo:margin-right":"18pt","fo:margin-top":"10pt","fo:margin-bottom":"10pt","spacing-major":"26pt","spacing-minor":"6pt"},styleId:"ae3a94584179df1806911bd775",type:"topic"},calloutTopic:{properties:{"callout-shape-class":"org.xmind.calloutTopicShape.balloon.roundedRect","fill-pattern":"solid","fo:font-family":"Open Sans","fo:font-style":"normal","fo:font-weight":400,"fo:font-size":"13pt","fo:text-transform":"manual","fo:text-decoration":"none","fo:text-align":"center","svg:fill":"#c6bea1","border-line-color":"#c6bea1"},styleId:"cf597269c17beb4f39c6daae3f",type:"topic"},summary:{properties:{"shape-class":"org.xmind.summaryShape.square","line-width":"2","line-pattern":"solid","line-corner":"8pt","line-color":"#c6bea1"},styleId:"7129e73481eb7a1897b2c8094a",type:"summary"},summaryTopic:{properties:{"shape-class":"org.xmind.topicShape.roundedRect","line-class":"org.xmind.branchConnection.elbow","line-width":"2pt","svg:fill":"#c6bea1","fill-pattern":"solid","border-line-width":"0","fo:font-family":"Open Sans","fo:font-style":"normal","fo:font-weight":"600","fo:font-size":"13pt","fo:text-transform":"manual","fo:text-decoration":"none","fo:text-align":"center","border-line-color":"#c6bea1","fo:margin-left":"12pt","fo:margin-right":"12pt","fo:margin-top":"6pt","fo:margin-bottom":"6pt","spacing-major":"26pt","spacing-minor":"8pt"},styleId:"28db31b676f948c81ce478dc31",type:"topic"},relationship:{properties:{"shape-class":"org.xmind.relationshipShape.zigzag","line-width":"1","line-pattern":"dash","arrow-begin-class":"org.xmind.arrowShape.none","arrow-end-class":"org.xmind.arrowShape.triangle","fo:font-family":"'Open Sans','NeverMind','Microsoft YaHei','PingFang SC','Microsoft JhengHei','sans-serif',sans-serif","fo:font-style":"normal","fo:font-weight":600,"fo:font-size":"13pt","fo:text-transform":"manual","fo:text-decoration":"none","fo:text-align":"center","line-color":"#c6bea1"},styleId:"ea0990886e2ba2b4b3c69ab34d",type:"relationship"},map:{properties:{"line-tapered":"none","svg:fill":"#1a1a1e","color-gradient":"none","multi-line-colors":"","color-list":"#e9e9ec #1a1a1e"},styleId:"6659012d15a89de3df86e84e92",type:"map"}}};R.Theme=class{constructor(e={}){const t=e.themeName;if(!t||"string"!=typeof t||!L.includes(t.toLocaleLowerCase()))throw k("W - Only ",L.join(", "),"are allowed for now."),new Error(`the theme name ${t} is not allowed`);this.value=this.loader(t)}get data(){return this.value}loader(e){const t=D[e];return t.id=x(),t.title=e,t}};var F={};Object.defineProperty(F,"__esModule",{value:!0});const M="xmind-sdk";F.default=class{constructor(e={}){this.options=e,this.options=e,this._debug=T(this.options.debug||M)}debug(...e){this._debug(...e)}get id(){return x()}};var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.BROWSER_TYPE={OPERA:"Opera",EDGE:"Edge",CHROME:"Chrome",SAFARI:"Safari",FIREFOX:"Firefox",IE:"IE",UNKNOWN:"unknown"};var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.CONFIG={LOGGER:"logger",INPUT_HANDLER:"inputHandler",XAP_LOADER:"xapLoader",XAP_GENERATOR:"xapGen",URL_PREFIX:"urlPrefix",NO_ANIMATION:"noAimation",LANGUAGE:"language",MAX_SCALE:"maxScale",MIN_SCALE:"minScale",NO_KEYBIND:"noKeybind",KEYBINDING_SERVICE:"KeyBinding_service",INFO_ITEM_STYLE:"infoItemStyle",READONLY:"readonly",NO_EDIT_RECEIVER:"noEditReceiver",CLIPBOARD_READER:"clipboardReader",CLIPBOARD_WRITER:"clipboardWriter",DEFERED_EVENTS:"deferedEvents",DEFERED_TIME:"deferedTime",PADDING_FACTOR:"paddingFactor",FAKE_IMAGE:"fakeImage",NO_LISTEN_RESIZE:"noListenResize",CJK_FONT_FAMILY:"cjkFontFamily",PLATFORM:"platform",FONT_URL_PREFIX:"fontUrlPrefix",FONT_FACE_GENERATOR:"fontFaceGenerator",HIDE_COLLAPSE_BTN:"hideCollapseBtn",NO_TOPIC_CUSTOM_WIDTH_BTN:"noTopicCustomWidthBtn",PRE_ACTIONS:"preActions",POST_ACTIONS:"postActions",AUTO_ACTION_STATUS:"autoActionStatus",LIMITED_OPERATION_HANDLER:"limitedOperationHandler"};var B={};Object.defineProperty(B,"__esModule",{value:!0}),B.EVENTS={UNDO_STATE_CHANGE:"undoStateChange",BEFORE_EDITOR_REMOVE:"beforeEditorRemove",EDITOR_REMOVED:"editorRemoved",BEFORE_SWITCH_SHEET:"beforeSwitchSheet",SHEET_SWITCHED:"sheetSwitched",BEFORE_CREATE_SHEET_EDITOR:"beforeCreateSheetEditor",SHEET_EDITOR_CREATED:"sheetEditorCreated",ACTION_STATUS_MAY_CHANGED:"actionStatusMayChanged",AFTER_REMOVE_SHEET_MODEL:"afterRemoveSheet",BEFORE_REMOVE_SHEET_MODEL:"beforeRemoveSheet",AFTER_ADD_NEW_SHEET:"afterAddNewSheet",BEFORE_ADD_NEW_SHEET:"beforeAddNewSheet",AFTER_SHEET_CONTENT_CHANGE:"afterSheetContentChange",AFTER_WORKBOOK_CONTENT_CHANGE:"afterWorkbookContentChange",BEFORE_ADD_TOPIC:"beforeAddTopic",AFTER_ADD_TOPIC:"afterAddTopic",BEFORE_REMOVE_TOPIC:"beforeRemoveTopic",AFTER_REMOVE_TOPIC:"afterRemoveTopic",AFTER_SHEET_TITLE_CHANGE:"sheetTitleChanged",AFTER_WORKBOOK_TITLE_CHANGE:"workbookTitleChanged",SELECTION_CHANGED:"selectionChanged",SHOULD_SHOW_NOTE_PANEL:"shouldShowNotesPanel",SCALE_CHANGED:"scaleChanged",VIEW_PORT_MOVING:"viewPortMoving",SHEET_CONTENT_LOADED:"SHEET_CONTENT_LOADED",AFTER_UI_STATUS_ACTIVATE:"AFTER_UI_STATUS_ACTIVATE",AFTER_UI_STATUS_DEACTIVATE:"AFTER_UI_STATUS_DEACTIVATE",AFTER_MODIFY_STATUS_CHANGE:"afterModifyStatusChange",AFTER_SHEET_ORDER_CHANGE:"afterSheetOrderChange",AFTER_THEME_CHANGED:"afterThemeChanged",SE_BRANCH_DRAG_START:"SE_branchDragStart",SE_BRANCH_DRAG_END:"SE_branchDragEnd",RELATIONSHIP_CONTROL_POINT_DRAG_START:"RELATIONSHIP_CONTROL_POINT_DRAG_START",RELATIONSHIP_CONTROL_POINT_DRAG_END:"RELATIONSHIP_CONTROL_POINT_DRAG_END",SE_OVERRIDE_STYLE_CHANGED:"SE_OVERRIDE_STYLE_CHANGED",SE_BRANCH_COLLAPSE_TOGGLE:"SE_BRANCH_COLLAPSE_TOGGLE",SE_UI_STATUS_CHANGED:"SE_UI_STATUS_CHANGED",BEFORE_ANCESTOR_CHANGE:"beforeAncestorChange",AFTER_ANCESTOR_CHANGE:"afterAncestorChange",FILE_DROP_IN_START:"fileDropInStart",FILE_DROP_IN_END:"fileDropInEnd",EXIT_BRANCH_ONLY_MODE:"exitBranchOnlyMode"};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.MODEL_TYPE={BASE_COMPONENT:"BaseComponent",STYLE_COMPONENT:"StyleComponent",STYLE:"Style",BOUNDARY:"Boundary",SUMMARY:"Summary",HREF:"Href",LABEL:"Label",LEGEND:"Legend",MARKER:"Marker",NOTE:"Note",NUMBERING:"Numbering",RELATIONSHIP:"Relationship",SHEET:"Sheet",THEME:"Theme",TOPIC:"Topic",EXTENSION:"Extension",IMAGE:"Image",WORKBOOK:"workbook"},H.TOPIC_TYPE={ATTACHED:"attached",DETACHED:"detached",SUMMARY:"summary",CALLOUT:"callout",ROOT:"root"},H.NUMBERFORMAT={NONE:"org.xmind.numbering.none",ARABIC:"org.xmind.numbering.arabic",ROMAN:"org.xmind.numbering.roman",LOWERCASE:"org.xmind.numbering.lowercase",UPPERCASE:"org.xmind.numbering.uppercase"},H.NUMBERSEPARATOR={COMMA:"org.xmind.numbering.separator.comma",DOT:"org.xmind.numbering.separator.dot",HYPHEN:"org.xmind.numbering.separator.hyphen",DASH:"org.xmind.numbering.separator.dash",OBLIQUE:"org.xmind.numbering.separator.oblique"},H.INFO_ITEM_DISPLAY_MODE={CARD:"card",ICON:"icon"},H.INFOITEM_TYPE_FULL={LABEL:"org.xmind.ui.infoItem.label",HREF:"org.xmind.ui.infoItem.hyperlink",NOTE:"org.xmind.ui.infoItem.notes",TASK:"org.xmind.ui.infoItem.taskInfo",AUDIO:"org.xmind.ui.infoItem.AudioNotes",COMMENT:"org.xmind.ui.infoItem.comments"},H.INFOITEM_TYPE_SHORT={LABEL:"label",HREF:"href",NOTE:"note",TASK:"task",AUDIO:"audio",COMMENT:"comments"},H.INFO_ITEM_STYLE_TYPE={CLASSIC:"classic",FASHION:"fashion",ACC_TO_JSON:"accToJSON"},H.COMPONENT_TYPE=H.MODEL_TYPE,H.ATTACHMENT_PREFIX="xap:resources/",H.TITLE_MAX_WIDTH=300,H.TOPIC_TITLE_MAX_WIDTH=300,H.TOPIC_MAX_CUSTOM_WIDTH=762,H.TOPIC_DEFAULT_STRUCTURE="org.xmind.ui.logic.right",H.DIRECTION={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},H.TOPIC_ATTACHED="attached",H.TOPIC_DETACHED="detached",H.TOPIC_SUMMARY="summary",H.TOPIC_CALLOUT="callout",H.TOPIC_ROOT="root",H.MASTER_RANGE="master",H.MANIFEST={FILE_ENTRIES:"file-entries",FILE_ENTRY:"file-entry"};var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.MODULE_NAME={ADD_RELATIONSHIP:"addrelationshipmanager",COPY_PASTE:"copypastemanager",DRAG:"dragmanager",DROP:"dropmanager",PRE_ADD_FLOATING_TOPIC:"preaddfloatingtopic",SELECTION:"selectionmanager",KEY_BIND:"keybind",EDIT_RECEIVER:"editreceiver",MINI_MAP:"minimap",MOVE_VIEW_PORT:"moveviewport",SEMAPHORE:"semaphore",LAYOUT:"layout",MOUSE_BOX_SELECT:"mouseboxselect",MARKER_MAP:"markermap",MODIFY_CHECK:"modifycheck",SELECT_DRAG:"selectdragmanager",OVERRIDE_STYLE:"overridestyle",SVG_DRAGGABLE:"svgdraggable",UI_STATUS:"uistatusmanager"};var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.SERVICE_NAME={GET_MINIMUM_FONT_SIZE:"getMiniumFontSize",GET_VIEW_PORT_COVER:"getViewPortCover",COPY_TO_CLIPBOARD:"copyToClipboard"};var $={};Object.defineProperty($,"__esModule",{value:!0}),$.UI_STATUS={LAYOUT:"layout",ANIMATION:"animation",PINCH:"pinching",DRAG:"drag",ADD_RELATIONSHIP:"addRelationship",ADD_FLOATINGTOPIC:"addFloatingTopic",EDIT_TITLE:"editTitle",DRAG_VIEWPORT:"dragViewport",LOADING_IMAGE:"loadingImage",DE_FOCUS:"deFocus",DRAG_TOPIC_SELECT_BOX:"dragTopicSelectBox",SHOW_BRANCH_ONLY:"showBranchOnly"};var Y={};let W;Object.defineProperty(Y,"__esModule",{value:!0}),Y.STRUCTURECLASS={LOGICRIGHT:"org.xmind.ui.logic.right",LOGICLEFT:"org.xmind.ui.logic.left",TREERIGHT:"org.xmind.ui.tree.right",TREELEFT:"org.xmind.ui.tree.left",ORGCHARTDOWN:"org.xmind.ui.org-chart.down",ORGCHARTUP:"org.xmind.ui.org-chart.up",MAPCLOCKWISE:"org.xmind.ui.map.clockwise",MAPANTICLOCKWISE:"org.xmind.ui.map.anticlockwise",MAP:"org.xmind.ui.map",MAPUNBALANCED:"org.xmind.ui.map.unbalanced",MAPFLOATING:"org.xmind.ui.map.floating",MAPFLOATINGCLOCKWISE:"org.xmind.ui.map.floating.clockwise",MAPFLOATINGANTICLOCKWISE:"org.xmind.ui.map.floating.anticlockwise",TIMELINEHORIZONTAL:"org.xmind.ui.timeline.horizontal",TIMELINEHORIZONTALUP:"org.xmind.ui.timeline.horizontal.up",TIMELINEHORIZONTALDOWN:"org.xmind.ui.timeline.horizontal.down",TIMELINEVERTICAL:"org.xmind.ui.timeline.vertical",FISHBONELEFTHEADED:"org.xmind.ui.fishbone.leftHeaded",LEFTHEADEDNENORMAL:"org.xmind.ui.fishbone.structure.NE.normal",LEFTHEADEDSENORMAL:"org.xmind.ui.fishbone.structure.SE.normal",FISHBONERIGHTHEADED:"org.xmind.ui.fishbone.rightHeaded",RIGHTHEADEDNWNORMAL:"org.xmind.ui.fishbone.structure.NW.normal",RIGHTHEADEDSWNORMAL:"org.xmind.ui.fishbone.structure.SW.normal",SPREADSHEET:"org.xmind.ui.spreadsheet",SPREADSHEETROW:"org.xmind.ui.structure.spreadsheet.row",COLUMNSPREADSHEET:"org.xmind.ui.spreadsheet.column",SPREADSHEETCOLUMN:"org.xmind.ui.structure.column.spreadsheet",LOGICCHARTRIGHT:"org.xmind.ui.logic-chart.right",LOGICCHARTLEFT:"org.xmind.ui.logic-chart.left"},Y.EXPOSED_STRUCTURE=["org.xmind.ui.logic.right","org.xmind.ui.logic.left","org.xmind.ui.tree.right","org.xmind.ui.tree.left","org.xmind.ui.org-chart.down","org.xmind.ui.org-chart.up","org.xmind.ui.map.clockwise","org.xmind.ui.map.anticlockwise","org.xmind.ui.map","org.xmind.ui.map.unbalanced","org.xmind.ui.timeline.horizontal","org.xmind.ui.timeline.vertical","org.xmind.ui.fishbone.leftHeaded","org.xmind.ui.fishbone.rightHeaded","org.xmind.ui.spreadsheet","org.xmind.ui.spreadsheet.column"],Y.ATTACHED_EXPOSED_STRUCTURE=Y.EXPOSED_STRUCTURE.filter(function(e){return!(0===e.indexOf("org.xmind.ui.map"))}),Y.LEFT_EXPOSED_STRUCTURE=Y.ATTACHED_EXPOSED_STRUCTURE.filter(function(e){var t=0===e.indexOf("org.xmind.ui.logic.right"),r=0===e.indexOf("org.xmind.ui.fishbone.leftHeaded");return!t&&!r}),Y.RIGHT_EXPOSED_STRUCTURE=Y.ATTACHED_EXPOSED_STRUCTURE.filter(function(e){var t=0===e.indexOf("org.xmind.ui.logic.left"),r=0===e.indexOf("org.xmind.ui.fishbone.rightHeaded");return!t&&!r}),Y.SIMILAR_STRUCTURE_MAP=((W={})[Y.STRUCTURECLASS.FISHBONELEFTHEADED]=Y.STRUCTURECLASS.FISHBONERIGHTHEADED,W[Y.STRUCTURECLASS.FISHBONERIGHTHEADED]=Y.STRUCTURECLASS.FISHBONELEFTHEADED,W),Y.DEFAULT_STRUCTURE=Y.STRUCTURECLASS.MAP;var V={};Object.defineProperty(V,"__esModule",{value:!0}),V.CLASS_TYPE={CENTRAL_TOPIC:"centralTopic",MAIN_TOPIC:"mainTopic",SUB_TOPIC:"subTopic",SUMMARY_TOPIC:"summaryTopic",CALLOUT_TOPIC:"calloutTopic",FLOATING_TOPIC:"floatingTopic",BOUNDARY:"boundary",SUMMARY:"summary",RELATIONSHIP:"relationship",MAP:"map"},V.STYLED_TOPIC_TYPE={CENTRAL:"centralTopic",SUMMARY:"summaryTopic",FLOATING:"floatingTopic",CALLOUT:"calloutTopic",MAIN:"mainTopic",SUB:"subTopic"},V.STYLE_KEYS={FONT_FAMILY:"fo:font-family",FONT_STYLE:"fo:font-style",FONT_WEIGHT:"fo:font-weight",FONT_SIZE:"fo:font-size",TEXT_COLOR:"fo:color",TEXT_ALIGN:"fo:text-align",TEXT_BULLET:"fo:text-bullet",TEXT_TRANSFORM:"fo:text-transform",TEXT_DECORATION:"fo:text-decoration",TEXT_BACKGROUND_COLOR:"fo:background-color",MARGIN_LEFT:"fo:margin-left",MARGIN_RIGHT:"fo:margin-right",MARGIN_TOP:"fo:margin-top",MARGIN_BOTTOM:"fo:margin-bottom",SPACING_MAJOR:"spacing-major",SPACING_MINOR:"spacing-minor",SHAPE_CLASS:"shape-class",SHAPE_CORNER:"shape-corner",LINE_CORNER:"line-corner",LINE_COLOR:"line-color",LINE_CLASS:"line-class",LINE_WIDTH:"line-width",LINE_PATTERN:"line-pattern",LINE_TAPERED:"line-tapered",BORDER_LINE_COLOR:"border-line-color",BORDER_LINE_WIDTH:"border-line-width",CALLOUT_FILL_COLOR:"callout-fill-color",CALLOUT_LINE_CLASS:"callout-line-class",CALLOUT_LINE_CORNER:"callout-line-corner",CALLOUT_LINE_PATTERN:"callout-line-pattern",CALLOUT_LINE_WIDTH:"callout-line-width",CALLOUT_SHAPE_CLASS:"callout-shape-class",CALLOUT_LINE_COLOR:"callout-line-color",OPACITY:"svg:opacity",FILL_COLOR:"svg:fill",BACKGROUND:"background",ARROW_END_CLASS:"arrow-end-class",ARROW_BEGIN_CLASS:"arrow-begin-class",ALLOW_OVERLAP:"allow-overlap",ALLOW_FREE_POSITION:"allow-free-position",GRADIENT_COLOR:"color-gradient",MULTI_LINE_COLORS:"multi-line-colors",CJK_FONT_FAMILY:"cjk-font-family",STRUCTURE_CLASS:"structure-class",FILL_GRADIENT:"fill-gradient",BORDER_GRADIENT:"border-gradient"},V.STYLE_VALUES={SYSTEM_FONT:"$system$"},V.STYLE_PARENT_GROUP={BEFORE_CLASS_GROUP:"beforeClassGroup",BEFORE_THEME_GROUP:"beforeThemeGroup",BEFORE_DEFAULT_GROUP:"beforeDefaultGroup"},V.STYLE_LAYER={BEFORE_USER:"beforeUser",BEFORE_CLASS:"beforeClass",BEFORE_THEME:"beforeTheme",BEFORE_DEFAULT:"beforeDefault",BEFORE_PARENT:"beforeParent"},V.COMMON_FONT_FAMILY='Helvetica, "Nunito Sans", "Microsoft JhengHei", "Microsoft Yahei", sans-serif',V.TOPICSHAPE={ROUNDEDRECT:"org.xmind.topicShape.roundedRect",RECT:"org.xmind.topicShape.rect",ELLIPSE:"org.xmind.topicShape.ellipse",DIAMOND:"org.xmind.topicShape.diamond",UNDERLINE:"org.xmind.topicShape.underline",NOBORDER:"org.xmind.topicShape.noBorder",CIRCLE:"org.xmind.topicShape.circle",PARALLELOGRAM:"org.xmind.topicShape.parallelogram",CLOUD:"org.xmind.topicShape.cloud",ELLIPSERECT:"org.xmind.topicShape.ellipserect",_ELLIPSE:"org.xmind.topicShape.callout.ellipse",_ROUNDEDRECT:"org.xmind.topicShape.callout.roundedRect",_RECT:"org.xmind.topicShape.callout.rect",HEXAGON:"org.xmind.topicShape.hexagon",ROUNDEDHEXAGON:"org.xmind.topicShape.roundedhexagon",ELLIPTICRECTANGLE:"org.xmind.topicShape.ellipticrectangle",SINGLEBREAKANGLE:"org.xmind.topicShape.singlebreakangle",SINGLEBREAKANGLEWITHLINE:"org.xmind.topicShape.singlebreakanglewithline",DOUBLEROUNDEDANGLE:"org.xmind.topicShape.doubleroundedangle",DOUBLEUNDERLINE:"org.xmind.topicShape.doubleunderline",LEAF:"org.xmind.topicShape.leaf",NEWCLOUD:"org.xmind.topicShape.newcloud",STACK:"org.xmind.topicShape.stack",MATRIXMAIN:"org.xmind.topicShape.matrixMain",FISHHEADTORIGHT:"org.xmind.topicShape.fishHeadToRight",FISHHEADTOLEFT:"org.xmind.topicShape.fishHeadToLeft",FISHBONEROATEDNW:"org.xmind.topicShape.fishbone.NW.rotated",FISHBONEROATEDNE:"org.xmind.topicShape.fishbone.NE.rotated",FISHBONEROATEDSW:"org.xmind.topicShape.fishbone.SW.rotated",FISHBONE_NE_UNDERLINE:"fishbone_ne_underline",FISHBONE_NW_UNDERLINE:"fishbone_nw_underline",FISHBONEROATEDSE:"org.xmind.topicShape.fishbone.SE.rotated"},V.CALLOUTSHAPE={ELLIPSE:"org.xmind.calloutTopicShape.balloon.ellipse",ROUNDEDRECT:"org.xmind.calloutTopicShape.balloon.roundedRect",RECT:"org.xmind.calloutTopicShape.balloon.rectangle"},V.BOUNDARYSHAPE={RECT:"org.xmind.boundaryShape.rect",ROUNDEDRECT:"org.xmind.boundaryShape.roundedRect",SCALLOPS:"org.xmind.boundaryShape.scallops",WAVES:"org.xmind.boundaryShape.waves",TENSION:"org.xmind.boundaryShape.tension",POLYGON:"org.xmind.boundaryShape.polygon",ROUNDEDPOLYGON:"org.xmind.boundaryShape.roundedPolygon",NEWBOUNDARY1:"org.xmind.boundaryShape.newboundary1",NEWBOUNDARY2:"org.xmind.boundaryShape.newboundary2",NEWBOUNDARY3:"org.xmind.boundaryShape.newboundary3",FOCUS:"org.xmind.boundaryShape.focus",CROSS:"org.xmind.boundaryShape.cross"},V.ARROWSHAPE={NORMAL:"org.xmind.arrowShape.normal",SPEARHEAD:"org.xmind.arrowShape.spearhead",DOT:"org.xmind.arrowShape.dot",TRIANGLE:"org.xmind.arrowShape.triangle",SQUARE:"org.xmind.arrowShape.square",DIAMOND:"org.xmind.arrowShape.diamond",HERRINGBONE:"org.xmind.arrowShape.herringbone",NONE:"org.xmind.arrowShape.none",RING:"org.xmind.arrowShape.ring",EYE:"org.xmind.arrowShape.eye",DOUBLEARROW:"org.xmind.arrowShape.doublearrow",SQUARERING:"org.xmind.arrowShape.squarering",ANTITRIANGLE:"org.xmind.arrowShape.antiTriangle",ATTACHED:"org.xmind.arrowShape.attached",HOOK:"org.xmind.arrowShape.hook"},V.RELATIONSHIPSHAPE={CURVED:"org.xmind.relationshipShape.curved",ANGLED:"org.xmind.relationshipShape.angled",STRAIGHT:"org.xmind.relationshipShape.straight",ZIGZAG:"org.xmind.relationshipShape.zigzag"},V.SUMMARYCONNECTION={CURLY:"org.xmind.summaryShape.curly",ANGLE:"org.xmind.summaryShape.angle",SQUARE:"org.xmind.summaryShape.square",ROUND:"org.xmind.summaryShape.round",BRACKET:"org.xmind.summaryShape.bracket",SHARP:"org.xmind.summaryShape.sharp",FOLD:"org.xmind.summaryShape.fold",STRAIGHT:"org.xmind.summaryShape.straight"},V.BRANCHCONNECTION={ROUNDEDELBOW:"org.xmind.branchConnection.roundedElbow",STRAIGHT:"org.xmind.branchConnection.straight",CURVE:"org.xmind.branchConnection.curve",ARROWEDCURVE:"org.xmind.branchConnection.arrowedCurve",FOLD:"org.xmind.branchConnection.fold",FOLD2:"org.xmind.branchConnection.fold2",ROUNDEDFOLD:"org.xmind.branchConnection.roundedfold",BIGHT:"org.xmind.branchConnection.bight",ELBOW:"org.xmind.branchConnection.elbow",HORIZONTAL:"org.xmind.branchConnection.timeline.horizontal",NONE:"org.xmind.branchConnection.none",CALLOUTLINE:"calloutLine"},V.ARROWLINEPATTERN={DASH:"dash",DASHDOT:"dash-dot",DASHDOTDOT:"dash-dot-dot",DOT:"dot",SOLID:"solid",ROUNDDOT:"round-dot"},V.TEXTTRANSFORM={MANUAL:"manual",CAPITALIZE:"capitalize",UPPERCASE:"uppercase",LOWERCASE:"lowercase"};var q={};Object.defineProperty(q,"__esModule",{value:!0}),q.VIEW_TYPE={BRANCH:"branch",AUDIO:"audioNotes",BOUNDARY:"boundary",COLLAPSE_EXTEND:"collapseextend",COMMENT:"comments",CONNECTION:"connection",FISHTAIL:"fishtail",HREF:"href",IMAGE:"image",INFOITEM:"infoitem",INFO_MORE:"infoMore",JUMP:"jump",LABEL:"label",LABELUNIT:"labelunit",LEGEND:"legend",LEGENDMARKERLIST:"legendmarkerlist",MARKER:"marker",NOTE:"note",NUMBERING:"numbering",RELATIONSHIP:"relationship",SELECTBOX:"selectbox",SVG:"svg",TASK:"task",TOPIC:"topic",TEXT:"text",TITLE:"title",INFO_ITEM_CARD:"infoitemcard",INFORMATION_ICONS:"informationicons",ATTACHMENT:"attachment",MATRIX:"matrix",MATRIX_CELL:"matrixcell",MATRIX_LABEL:"matrixlabel",MATRIX_PLUS:"matrixPlus",CELL:"cell",SHEET:"sheet",SUMMARY:"summary",TOPIC_SELECT_BOX:"topic_select_box",TOPIC_TITLE:"topictitle",RELATIONSHIP_TITLE:"relationshiptitle",INFORMATION_ICON:"INFORMATION_ICON",MARKERS:"MARKERS",RESIZE_BOX:"resizebox",PLACEHOLDERBRANCH:"placeholderbranch"};var K={};Object.defineProperty(K,"__esModule",{value:!0}),K.ADAPTERS={SUMMARY_VIEW:"summaryView"};var X={};Object.defineProperty(X,"__esModule",{value:!0}),X.EXTENSION_ELEMENT={CONTENT:"content"},X.EXTENSION_PROVIDER={TASK_INFO:"org.xmind.ui.taskInfo",AUDIO_NOTES:"org.xmind.ui.audionotes",UNBALANCED_MAP:"org.xmind.ui.map.unbalanced",SPREAD_SHEET:"org.xmind.ui.spreadsheet"},X.EXTENSION_EVENT={ADD_RESOURCE_REF:"addResourceRef",REMOVE_RESOURCE_REF:"removeResourceRef"};var Z={};Object.defineProperty(Z,"__esModule",{value:!0}),Z.FIGURE_TYPE={SHEET:"sheet",BRANCH:"branch",TOPIC:"topic",BOUNDARY:"boundary",RELATIONSHIP:"relationship",SUMMARY:"summary",CONNECTION:"connection",COLLAPSE_EXTEND:"collapseextend",TOPIC_TITLE:"topictitle",RELATIONSHIP_TITLE:"relationshiptitle",NUMBERING:"numbering",IMAGE:"image",LABELS:"labels",LABEL:"label",MARKERS:"markers",MARKER:"marker",INFORMATION:"information",SELECT_BOX:"selectbox",RESIZE_BOX:"resizebox",TOPIC_SELECT_BOX:"topic_selectbox",PLACE_HOLDER_TOPIC:"placehodertopic",MATRIX:"matrix",MATRIX_LABEL:"matrixlabel",MATRIX_CELL:"matrixcell",MATRIX_PLUS:"matrixplus",BOUNDARY_TITLE:"boundarytitle"};var J={};Object.defineProperty(J,"__esModule",{value:!0}),J.RENDER_ENGINE_TYPE={SVG:"svg",CANVAS:"canvas"};var Q={};Object.defineProperty(Q,"__esModule",{value:!0}),Q.XAP_TYPE={IMAGE:"image",ATTACHMENT:"attachment",X_STICKER:"x-sticker"};var ee={};Object.defineProperty(ee,"__esModule",{value:!0}),ee.ACTION_NAMES={ADD_NEW_SHEET:"addNewSheet",CHANGE_SHEET_TITLE:"changeSheetTitle",CLOSE_UNDO_KEEP_MODE:"closeUndoKeepMode",OPEN_UNDO_KEEP_MODE:"openUndoKeepMode",REDO:"redo",REFRESH_MIND_MAP:"refreshMindMap",REMOVE_SHEET:"removeSheet",SET_EXT_COL_ICON_DISPLAY:"setExtColIconDisplay",UNDO:"undo",WORKBOOK_SAVED:"workbookSaved",ADD_BOUNDARY:"addBoundary",ADD_CALLOUT_TOPIC:"addCalloutTopic",ADD_CLASS:"addClass",ADD_FLOATING_TOPIC:"addFloatingTopic",ADD_IMAGE:"addImage",ADD_PARENT_TOPIC:"addParentTopic",ADD_RELATIONSHIP:"addRelationship",ADD_SUB_TOPIC:"addSubTopic",ADD_SUMMARY:"addSummary",ADD_TOPIC_AFTER:"addTopicAfter",ADD_TOPIC_BEFORE:"addTopicBefore",ALIGN:"align",CANCEL_ADD_RELATIONSHIP:"cancelAddRelationship",CHANGE_BORDER_COLOR:"changeBorderColor",CHANGE_BORDER_GRADIENT:"changeBorderGradient",CHANGE_BORDER_WIDTH:"changeBorderWidth",CHANGE_BOUNDARY_BACKGROUND_COLOR:"changeBoundaryBackgroundColor",CHANGE_BOUNDARY_LINE_COLOR:"changeBoundaryLineColor",CHANGE_BOUNDARY_LINE_PATTERN:"changeBoundaryLinePattern",CHANGE_BOUNDARY_OPACITY:"changeBoundaryOpacity",CHANGE_BOUNDARY_PRE_INSTALL_STYLE:"changeBoundaryPreInstallStyle",CHANGE_BRANCH_LINE_STYLE:"changeBranchLineStyle",CHANGE_CJK_FONT_FAMILY:"changeCJKFontFamily",CHANGE_COLOR_GRADIENT:"changeColorGradient",CHANGE_COLOR:"changeColor",CHANGE_COMMENTS_INFO:"changeCommentsInfo",CHANGE_COMPONENT_PRE_INSTALL_STYLE:"changeComponentPreInstallStyle",CHANGE_END_ARROW_TYPE:"changeEndArrowType",CHANGE_FILL_GRADIENT:"changeFillGradient",CHANGE_FONT_FAMILY:"changeFontFamily",CHANGE_FONT_SIZE:"changeFontSize",CHANGE_FONT_STYLE:"changeFontStyle",CHANGE_FONT_WEIGHT:"changeFontWeight",CHANGE_HYPER_LINK:"changeHyperLink",CHANGE_INFO_ITEM_DISPLAY:"changeInfoItemDisplay",CHANGE_LABEL:"changeLabel",CHANGE_LEGEND_DISPLAY:"changeLegendDisplay",CHANGE_LINE_COLOR:"changeLineColor",CHANGE_LINE_PATTERN:"changeLinePattern",CHANGE_LINE_TAPERED:"changeLineTapered",CHANGE_LINE_WIDTH:"changeLineWidth",CHANGE_MAP_OPACITY:"changeMapOpacity",CHANGE_MARKER:"changeMarker",CHANGE_MULTI_LINE_COLORS:"changeMultiLineColors",CHANGE_NOTE:"changeNote",CHANGE_RELATIONSHIP_LINE_COLOR:"changeRelationshipLineColor",CHANGE_RELATIONSHIP_PRE_INSTALL_STYLE:"changeRelationshipPreInstallStyle",CHANGE_SHAPE_CLASS:"changeShapeClass",CHANGE_SHAPE_COLOR:"changeShapeColor",CHANGE_SHEET_BACKGROUND:"changeSheetBackground",CHANGE_START_ARROW_TYPE:"changeStartArrowType",CHANGE_STICKER:"changeSticker",CHANGE_STRUCTURE:"changeStructure",CHANGE_SUMMARY_LINE_COLOR:"changeSummaryLineColor",CHANGE_SUMMARY_LINE_STYLE:"changeSummaryLineStyle",CHANGE_SUMMARY_LINE_WIDTH:"changeSummaryLineWidth",CHANGE_TEXT_ALIGN:"changeTextAlign",CHANGE_TEXT_COLOR:"changeTextColor",CHANGE_TEXT_DECORATION:"changeTextDecoration",CHANGE_TEXT_TRANSFORM:"changeTextTransform",CHANGE_THEME:"changeTheme",CHANGE_TITLE:"changeTitle",CHANGE_TOPIC_CUSTOM_WIDTH:"changeTopicCustomWidth",CHANGE_TOPIC_OVERLAP:"changeTopicOverlap",CHANGE_TOPIC_POSITIONING:"changeTopicPositioning",CHANGE_TOPIC_PRE_INSTALL_STYLE:"changeTopicPreInstallStyle",COLLAPSE_BRANCHES:"collapseBranches",COPY_STYLE:"copyStyle",COPY:"copy",CUT:"cut",DELETE_ITEM:"deleteItem",DIVIDE:"divide",DUPLICATE_TOPIC:"duplicateTopic",EXCHANGE_SIBLING_TOPIC:"exchangeSiblingTopic",EXTEND_BRANCHES:"extendBranches",FIT_MAP:"fitMap",FOCUS_CENTER:"focusCenter",FOCUS_INPUT:"focusInput",HIDE_EDIT_BOX:"hideEditBox",HIDE_TITLE:"hideTitle",INSERT_AUDIO_NOTES_ON_NEW_TOPIC:"insertAudioNotesOnNewTopic",INSERT_AUDIO_NOTES:"insertAudioNotes",INSERT_HREF_ON_NEW_TOPIC:"insertHrefOnNewTopic",MOVE_VIEWPORT:"moveViewport",PASTE_STYLE:"pasteStyle",PASTE:"paste",PRE_ADD_FLOATING_TOPIC:"preAddFloatingTopic",REMOVE_ALL_SELECTION:"removeAllSelection",REMOVE_AUDIO_NOTES:"removeAudioNotes",REMOVE_CLASS:"removeClass",REMOVE_MARKER:"removeMarker",REMOVE_MARKER_GROUP:"removeMarkerGroup",REMOVE_SELECTION:"removeSelection",REMOVE_TASK_INFO:"removeTaskInfo",REPAIR_EDIT_RECEIVER_POSITION:"repairEditReceiverPosition",RESET_IMAGE:"resetImage",RESIZE_IMAGE:"resizeImage",RESET_POSITION:"resetPosition",RESIZE_EDITOR:"resizeEditor",SELECT_ALL:"selectAll",SELECT:"select",SELECTION_NAVIGATE:"selectionNavigate",SELECT_TOPIC_BY_ID:"selectTopicById",SET_DEVICE_SCALE:"setDeviceScale",SET_MINI_MAP_DISPLAY:"setMiniMapDisplay",SET_STYLE_OBJECT:"setStyleObject",SET_SUMMARY_STYLE_OBJECT:"setSummaryStyleObject",SET_TRANSFORM:"setTransform",SHEET_SAVED:"sheetSaved",SHOW_EDIT_BOX:"showEditBox",SHOW_TITLE:"showTitle",SHOW_VIEW_IN_VIEWPORT:"showViewInViewport",TOGGLE_SELECT:"toggleSelect",UPDATE_CLASS_INTO_THEME:"updateClassIntoTheme",ZOOM:"zoom",SHOW_BRANCH_ONLY:"showBranchOnly"},ee.ACTION_STATUS={NORMAL:Symbol("normal"),DISABLE:Symbol("disable"),ABORTED:Symbol("aborted")};var te={};Object.defineProperty(te,"__esModule",{value:!0}),te.SUPPORTED_LIMITED_OPERATIONS={INSERT_IMAGE:"insertImage"};var re={};function ie(e){for(var t in e)re.hasOwnProperty(t)||(re[t]=e[t])}Object.defineProperty(re,"__esModule",{value:!0}),ie(U),ie(j),ie(B),ie(H),ie(z),ie(G),ie($),ie(Y),ie(V),ie(q),ie(K),ie(X),ie(Z),ie(J),ie(Q),ie(ee),ie(te),re.LANGS={ZH_CN:"zh-CN",EN_US:"en-US",ZH_HK:"zh-HK",ZH_TW:"zh-TW",JA_JP:"ja-JP",DE_DE:"de-DE",FR_FR:"fr-FR"},re.PLATFORMS={VANA:"vana",BROWNIE:"brownie",DOUGHNUT:"doughnut",PUFF:"puff",PUFFMAC:"puffmac"};var ne=Object.create||function(e){var t=function(){};return t.prototype=e,new t},oe=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r},ae=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function se(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=ne(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}var le=se;se.EventEmitter=se,se.prototype._events=void 0,se.prototype._maxListeners=void 0;var he,ce=10;try{var ue={};Object.defineProperty&&Object.defineProperty(ue,"x",{value:0}),he=0===ue.x}catch(e){he=!1}function de(e){return void 0===e._maxListeners?se.defaultMaxListeners:e._maxListeners}function fe(e,t,r,i){var n,o,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]):(o=e._events=ne(null),e._eventsCount=0),a){if("function"==typeof a?a=o[t]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),!a.warned&&(n=de(e))&&n>0&&a.length>n){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else a=o[t]=r,++e._eventsCount;return e}function pe(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function me(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=ae.call(pe,i);return n.listener=r,i.wrapFn=n,n}function ge(e,t,r){var i=e._events;if(!i)return[];var n=i[t];return n?"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):ve(n,n.length):[]}function _e(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function ve(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}he?Object.defineProperty(se,"defaultMaxListeners",{enumerable:!0,get:function(){return ce},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');ce=e}}):se.defaultMaxListeners=ce,se.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},se.prototype.getMaxListeners=function(){return de(this)},se.prototype.emit=function(e){var t,r,i,n,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(r=a[e]))return!1;var h="function"==typeof r;switch(i=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var i=e.length,n=ve(e,i),o=0;o<i;++o)n[o].call(r)}(r,h,this);break;case 2:!function(e,t,r,i){if(t)e.call(r,i);else for(var n=e.length,o=ve(e,n),a=0;a<n;++a)o[a].call(r,i)}(r,h,this,arguments[1]);break;case 3:!function(e,t,r,i,n){if(t)e.call(r,i,n);else for(var o=e.length,a=ve(e,o),s=0;s<o;++s)a[s].call(r,i,n)}(r,h,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,i,n,o){if(t)e.call(r,i,n,o);else for(var a=e.length,s=ve(e,a),l=0;l<a;++l)s[l].call(r,i,n,o)}(r,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(i-1),o=1;o<i;o++)n[o-1]=arguments[o];!function(e,t,r,i){if(t)e.apply(r,i);else for(var n=e.length,o=ve(e,n),a=0;a<n;++a)o[a].apply(r,i)}(r,h,this,n)}return!0},se.prototype.addListener=function(e,t){return fe(this,e,t,!1)},se.prototype.on=se.prototype.addListener,se.prototype.prependListener=function(e,t){return fe(this,e,t,!0)},se.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,me(this,e,t)),this},se.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,me(this,e,t)),this},se.prototype.removeListener=function(e,t){var r,i,n,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=ne(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(var r=t,i=r+1,n=e.length;i<n;r+=1,i+=1)e[r]=e[i];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),i.removeListener&&this.emit("removeListener",e,a||t)}return this},se.prototype.removeAllListeners=function(e){var t,r,i;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=ne(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=ne(null):delete r[e]),this;if(0===arguments.length){var n,o=oe(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=ne(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},se.prototype.listeners=function(e){return ge(this,e,!0)},se.prototype.rawListeners=function(e){return ge(this,e,!1)},se.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_e.call(e,t)},se.prototype.listenerCount=_e,se.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var ye={};Object.defineProperty(ye,"__esModule",{value:!0});const Ee="next",be="break",Te=20,we="__default__",Se=function(e,t){const r=t.length;if("undo"===e)for(let e=r-1;e>=0;e--){const r=t[e];r.undo&&r.undo()}else if("redo"===e)for(let e=0;e<r;e++){const r=t[e];r.redo&&r.redo()}return be};class Oe{constructor(e,t){this._identifier=e,this._executor=t,this._tasks=[]}getName(){return this._identifier}push(e){this._tasks.push(e)}pop(){this._tasks.pop()}execute(e){let t=be;return(this._executor?this._executor:Se)(e,Array.from(this._tasks))||(t=Ee),t}}ye.default=class extends le.EventEmitter{constructor(e={limit:Te}){super(),this._undoStack=[],this._redoStack=[],this._limitedLength=Te,this._canRecord=!0,this._blocking=!1,this._allInOne=!1,this._nameToTagGroup=new Map,this.setStackLimitedLength(e.limit)}setRecordState(e){this._canRecord=e}keepAllInOne(e){this._allInOne!==e&&(this._allInOne=e,e||this._resetStandbyGroup())}setStackLimitedLength(e){this._limitedLength=e;const t=this._undoStack.length,r=this._redoStack.length;this._limitedLength<t?this._undoStack.slice(t-this._limitedLength,t):this._limitedLength<t+r&&this._redoStack.slice(r+t-this._limitedLength,this._limitedLength-t)}_genNewGroup(e,t){const r=new Oe(e,t);return this._changeUndoStack(r),this._redoStack.length=0,this._undoStack.length+this._redoStack.length>this._limitedLength&&(this._undoStack=this._undoStack.slice(1,this._limitedLength)),r}_autoStandbyGroup(){return clearTimeout(this.TIMEOUT_ID),this.TIMEOUT_ID=setTimeout(()=>{this._allInOne||this._resetStandbyGroup()},0),this._genNewGroup(we)}add(e,t){this.push(e,t)}push(e,t){this._canRecord&&(this._blocking||(e.type=t,this._standbyGroup||(this._standbyGroup=this._autoStandbyGroup()),this._standbyGroup.push(e)))}pop(){const e=this._changeUndoStack();return this._redoStack.length=0,this._nameToTagGroup.delete(e&&e.getName()),this._resetStandbyGroup(),e}append(e,t){if(!this._canRecord)return;if(this._blocking)return;e.type=t;let r=this.getLastGroup();r&&!this.isTagGroup(r)||(r=this._genNewGroup(we)),r.push(e)}getLastGroup(){return this._undoStack[this._undoStack.length-1]}isTagGroup(e){return this._nameToTagGroup.has(e.getName())}pushTag(e,t){if(!this._canRecord)return;if(this._blocking)return;if(this._nameToTagGroup.has(e))return;this._resetStandbyGroup();const r=this._genNewGroup(e,t);this._nameToTagGroup.set(e,r)}popTag(e){this._resetStandbyGroup();const t=this._nameToTagGroup.get(e),r=this._undoStack.indexOf(t);r>-1&&this._undoStack.splice(r,1);const i=this._redoStack.indexOf(t);return i>-1&&this._redoStack.splice(i,1),this._nameToTagGroup.delete(e),t}undo(){this._blocking=!0,this._resetStandbyGroup();const e=this._changeUndoStack();e&&(this._redoStack.push(e),e.execute("undo")===Ee&&this.undo()),this._blocking=!1}redo(){this._blocking=!0,this._resetStandbyGroup();const e=this._redoStack.pop();e&&(this._changeUndoStack(e),e.execute("redo")===Ee&&this.redo()),this._blocking=!1}_resetStandbyGroup(){this._standbyGroup=null}_changeUndoStack(e){let t=e?(this._undoStack.push(e),e):this._undoStack.pop();return Promise.resolve().then(()=>{this.emit(re.EVENTS.UNDO_STATE_CHANGE,{canUndo:this.canUndo(),canRedo:this.canRedo()})}),t}isExecuting(){return!0===this._blocking}canUndo(){return this._undoStack.length>0}canRedo(){return this._redoStack.length>0}clearRedo(){this._redoStack.length=0}getIndex(){return this._undoStack.length-1}};var Ae={};function Ce(e,t){let r=Math.sin(t),i=Math.cos(t);return{x:e.x*i-e.y*r,y:e.x*r+e.y*i}}function Ie(e,t,r){let i={x:e.x-t.x,y:e.y-t.y};return i=Ce(i,r),{x:t.x+i.x,y:t.y+i.y}}function Pe(e){return e/180*Math.PI}Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.getPointDistance=function(e,t){return Math.hypot(e.x-t.x,e.y-t.y)},Ae.rotatePoint=Ce,Ae.rotatePointDeg=function(e,t){return Ce(e,Pe(t))},Ae.rotatePointAround=Ie,Ae.rotatePointAroundDeg=function(e,t,r){return Ie(e,t,Pe(r))},Ae.degree2Radian=Pe,Ae.normalizeVector=function(e,t=1){const r=Math.hypot(e.x,e.y)/t;return{x:e.x/r,y:e.y/r}},Ae.diffPoint=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},Ae.addPoint=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Ae.isEqualPoint=function(e,t){return e.x===t.x&&e.y===t.y},Ae.isPointLike=function(e){return!!e&&"number"==typeof e.x&&"number"==typeof e.y},Ae.isPointInPolygon=function(e,t){let r,i,n,o=t.length-1,a=!1,s=e.x,l=e.y;for(r=0;r<t.length;r++)i=t[r],n=t[o],(i.y<l&&n.y>=l||n.y<l&&i.y>=l)&&(i.x<=s||n.x<=s)&&i.x+(l-i.y)/(n.y-i.y)*(n.x-i.x)<s&&(a=!a),o=r;return a},Ae.convexPointHull=function(e){(e=[...e]).sort((e,t)=>e.x!==t.x?e.x-t.x:e.y-t.y);const t=e.length,r=[];for(let n=0;n<2*t;n++){const o=n<t?n:2*t-1-n;for(;r.length>=2&&i(r[r.length-2],r[r.length-1],e[o]);)r.pop();r.push(e[o])}return r.pop(),r;function i(e,t,r){const i=(e.x-t.x)*(r.y-t.y)-(e.y-t.y)*(r.x-t.x),n=(e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y);return i<0||0===i&&n<=0}},Ae.Point=function(e,t){return{x:e,y:t}};var xe={};Object.defineProperty(xe,"__esModule",{value:!0});const Ne={};xe.UUID=function(e){if(e&&Ne[e])return Ne[e];const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});return e?Ne[e]=t:t},xe.methodDeprecatedWarn=function(e,t){return`${e} has been deprecated, use ${t} instead`};const Re=/data:image[\s\S]*;base64/;xe.isDef=function(e){return null!=e},xe.isUndef=function(e){return null==e},xe.inArray=function(e,t){return-1!==e.indexOf(t)},xe.flatten=function(e){return e.reduce((e,t)=>e.concat(t),[])},xe.throttle=function(e,t){let r,i=e,n=!0;return function(...e){return n?(i.apply(this,e),n=!1):!r&&void(r=setTimeout(()=>{clearTimeout(r),r=null,i.apply(this,e)},void 0===t?500:t))}},xe.isBase64Url=function(e){return Re.test(e)},xe.frameStabilize=function(e,t){let r,i=!1;return function(){r=Array.prototype.slice.apply(arguments),i||(i=!0,requestAnimationFrame(()=>{e.apply(this,r),i=!1})),t&&"function"==typeof t&&t.apply(this,r)}},xe.removeItem=function(e,t){if(e.length>0){const r=e.indexOf(t);if(r>-1)return e.splice(r,1)}},xe.isSame=function(e,t){const r=Object.keys(e);for(let i=0;i<r.length;i++){const n=r[i];if(e[n]!==t[n])return!1}return!0};var ke={};Object.defineProperty(ke,"__esModule",{value:!0}),ke.stripNum=function(e,t=12){return+parseFloat(e.toPrecision(t))};var Le={};function De(e,t){const r=Math.min(e.x,t.x),i=Math.min(e.y,t.y);return{x:r,y:i,width:Math.max(e.x+e.width,t.x+t.width)-r,height:Math.max(e.y+e.height,t.y+t.height)-i}}function Fe(e){let t=1/0,r=1/0,i=-1/0,n=-1/0;return e.forEach(e=>{e.x<t&&(t=e.x),e.x>i&&(i=e.x),e.y<r&&(r=e.y),e.y>n&&(n=e.y)}),{x:t,y:r,height:n-r,width:i-t}}function Me(e,t){return ke.stripNum(e.width)===ke.stripNum(t.width)&&ke.stripNum(e.height)===ke.stripNum(t.height)}Object.defineProperty(Le,"__esModule",{value:!0}),Le.isBoundsEqual=function(e,t){return e.x===t.x&&e.y===t.y&&Me(e,t)},Le.isBoundsIntersect=function(e,t){return!(t.x>e.x+e.width||e.x>t.x+t.width||t.y>e.y+e.height||e.y>t.y+t.height)},Le.isBoundsContainPoint=function(e,t){return!(t.x<e.x||t.x>e.x+e.width||t.y<e.y||t.y>e.y+e.height)},Le.mergeBounds=De,Le.mergeBoundsArr=function(e){if(!Array.isArray(e))throw"Wrong arguments";return 0===e.length?{x:0,y:0,width:0,height:0}:1===e.length?e[0]:e.reduce((e,t)=>De(e,t))},Le.inflateBounds=function(e,t){return{x:e.x-t,y:e.y-t,width:e.width+2*t,height:e.height+2*t}},Le.moveBounds=function(e,t){return{x:t.x+e.x,y:t.y+e.y,width:e.width,height:e.height}},Le.fromPoints=Fe,Le.rotateBounds=function(e,t,r=0,i=0){return Fe([{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}].map(e=>Ae.rotatePointAroundDeg(e,{x:r,y:i},t)))},Le.outBounds=function(e,t){const r={x:0,y:0,width:0,height:0};return e.x<t.x?(r.x=e.x,r.width=e.x-t.x):e.x+e.width>t.x+t.width&&(r.x=t.x,r.width=e.x+e.width-(t.x+t.width)),e.y<t.y?(r.y=e.y,r.height=e.y-t.y):e.y+e.height>t.y+t.height&&(r.y=t.y,r.height=e.y+e.height-(t.y+t.height)),r},Le.isSameSize=Me;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.isUndefined=function(e){return void 0===e},Ue.isNull=function(e){return null===e},Ue.isObject=function(e){const t=typeof e;return"function"===t||"object"===t&&!!e},Ue.isEmpty=function(e){return""===e||(null==e||(!!(Ue.isObject(e)&&Object.keys(e).length<=0)||!!(Array.isArray(e)&&e.length<=0)))},Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Ue.isArray=function(e){return Array.isArray(e)},Ue.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===toString.call(e)},Ue.isArguments=function(e){return"[object Arguments]"===toString.call(e)},Ue.isFunction=function(e){return"[object Function]"===toString.call(e)},Ue.isString=function(e){return"[object String]"===toString.call(e)},Ue.isNumber=function(e){return"[object Number]"===toString.call(e)},Ue.isDate=function(e){return"[object Date]"===toString.call(e)},Ue.isRegExp=function(e){return"[object RegExp]"===toString.call(e)},Ue.isError=function(e){return"[object Error]"===toString.call(e)},Ue.isNaN=function(e){return Ue.isNumber(e)&&e!==+e},Ue.subtract=function(e,t){let r={};for(let i of Object.keys(t))e[i]!==t[i]&&(r[i]=t[i]);return r},Object.is||(Object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}),Ue.isEqual=function(e,t){return Object.is(e,t)},Ue.clone=function(e){return Ue.isObject(e)?e:Array.isArray(e)?e.slice():Object.assign({},e)},Ue.deepClone=function(e){let t=Ue.clone(e);return Object.keys(t).forEach(e=>{let r=t[e];Ue.isObject(r)&&(t[e]=Ue.deepClone(r))}),t};var je={};function Be(e){for(var t in e)je.hasOwnProperty(t)||(je[t]=e[t])}Object.defineProperty(je,"__esModule",{value:!0}),Be(Ae),Be(xe),Be(Le),Be(ke),Be(Ue);var He={};(function(e){(function(){"use strict";Object.defineProperty(He,"__esModule",{value:!0});const t={[re.CONFIG.XAP_LOADER]:()=>Promise.resolve(""),[re.CONFIG.URL_PREFIX]:"",[re.CONFIG.FONT_URL_PREFIX]:"",[re.CONFIG.LANGUAGE]:re.LANGS.EN_US,[re.CONFIG.MAX_SCALE]:1/0,[re.CONFIG.MIN_SCALE]:0,[re.CONFIG.NO_KEYBIND]:!1,[re.CONFIG.KEYBINDING_SERVICE]:function(e,t){return null},[re.CONFIG.NO_EDIT_RECEIVER]:!1,[re.CONFIG.READONLY]:!1,[re.CONFIG.HIDE_COLLAPSE_BTN]:!0,[re.CONFIG.NO_TOPIC_CUSTOM_WIDTH_BTN]:!0,[re.CONFIG.INFO_ITEM_STYLE]:re.INFO_ITEM_STYLE_TYPE.FASHION,[re.CONFIG.CLIPBOARD_READER]:function(){return null},[re.CONFIG.PADDING_FACTOR]:1,[re.CONFIG.FAKE_IMAGE]:!1,[re.CONFIG.LOGGER]:{info:"development"===e.env.NODE_ENV?console.info.bind(console):r,warn:"development"===e.env.NODE_ENV?console.warn.bind(console):r,error:"development"===e.env.NODE_ENV?console.error.bind(console):r,debug:"development"===e.env.NODE_ENV?console.debug.bind(console):r},[re.CONFIG.INPUT_HANDLER]:function(e){return Promise.resolve("")},[re.CONFIG.LIMITED_OPERATION_HANDLER]:function(e){return Promise.resolve(!0)},[re.CONFIG.AUTO_ACTION_STATUS]:!1};function r(){}class i{constructor(e={}){this.data=Object.assign({},e)}parent(e){return e instanceof i&&(this._parent=e),this._parent||(this!==He.defaultConfig?He.defaultConfig:null)}get(e){let t=this.data[e];if(je.isUndefined(t)){let r=this.parent();t=r&&r.get(e)}return t}set(...e){if(je.isObject(e[0])){let t=e[0];for(let e in t)this.set(e,t[e])}else if(2===e.length){let t=e[0],r=e[1];this.data[t]=r}else this.get(re.CONFIG.LOGGER).error("Illegal arguments for Config: ",e)}}He.Config=i,He.defaultConfig=new i(t)}).call(this)}).call(this,h);var ze={};Object.defineProperty(ze,"__esModule",{value:!0});const Ge={[re.LANGS.EN_US]:{DEFAULT_CALLOUT_TOPIC_TITLE:"Callout",DEFAULT_FLOATING_TOPIC_TITLE:"Floating Topic",DEFAULT_MAIN_TOPIC_TITLE:"Main Topic",DEFAULT_SUBTOPIC_TITLE:"Subtopic",DEFAULT_SUMMARY_TOPIC_TITLE:"Summary",DEFAULT_RELATIONSHIP_TITLE:"Relationship",LEGEND_TITLE:"Legend",LABEL_TITLE:"Label",RECORD_TITLE_PREFIX:"Record"},[re.LANGS.ZH_CN]:{DEFAULT_CALLOUT_TOPIC_TITLE:"标注",DEFAULT_FLOATING_TOPIC_TITLE:"自由主题",DEFAULT_MAIN_TOPIC_TITLE:"分支主题",DEFAULT_SUBTOPIC_TITLE:"子主题",DEFAULT_SUMMARY_TOPIC_TITLE:"概要",DEFAULT_RELATIONSHIP_TITLE:"联系",LEGEND_TITLE:"图例",LABEL_TITLE:"标签",RECORD_TITLE_PREFIX:"录音"},[re.LANGS.ZH_HK]:{DEFAULT_CALLOUT_TOPIC_TITLE:"標註",DEFAULT_FLOATING_TOPIC_TITLE:"自由主題",DEFAULT_MAIN_TOPIC_TITLE:"分支主題",DEFAULT_SUBTOPIC_TITLE:"子主題",DEFAULT_SUMMARY_TOPIC_TITLE:"總結",DEFAULT_RELATIONSHIP_TITLE:"聯繫",LEGEND_TITLE:"圖例",LABEL_TITLE:"標籤",RECORD_TITLE_PREFIX:"錄音"},[re.LANGS.ZH_TW]:{DEFAULT_CALLOUT_TOPIC_TITLE:"標註",DEFAULT_FLOATING_TOPIC_TITLE:"自由主題",DEFAULT_MAIN_TOPIC_TITLE:"分支主題",DEFAULT_SUBTOPIC_TITLE:"子主題",DEFAULT_SUMMARY_TOPIC_TITLE:"總結",DEFAULT_RELATIONSHIP_TITLE:"聯繫",LEGEND_TITLE:"圖例",LABEL_TITLE:"標籤",RECORD_TITLE_PREFIX:"錄音"},[re.LANGS.JA_JP]:{DEFAULT_CALLOUT_TOPIC_TITLE:"コメント",DEFAULT_FLOATING_TOPIC_TITLE:"フリートピック",DEFAULT_MAIN_TOPIC_TITLE:"メイントピック",DEFAULT_SUBTOPIC_TITLE:"サブトピック",DEFAULT_SUMMARY_TOPIC_TITLE:"概要",DEFAULT_RELATIONSHIP_TITLE:"関連性",LEGEND_TITLE:"図例",LABEL_TITLE:"ラベル",RECORD_TITLE_PREFIX:"録音"},[re.LANGS.DE_DE]:{DEFAULT_CALLOUT_TOPIC_TITLE:"Anmerkung",DEFAULT_FLOATING_TOPIC_TITLE:"Freitext",DEFAULT_MAIN_TOPIC_TITLE:"Hauptknoten",DEFAULT_SUBTOPIC_TITLE:"Unterknoten",DEFAULT_SUMMARY_TOPIC_TITLE:"Zusammenfassung",DEFAULT_RELATIONSHIP_TITLE:"Verbindung",LEGEND_TITLE:"Legende",LABEL_TITLE:"Beschriftung",RECORD_TITLE_PREFIX:"Aufnahme"},[re.LANGS.FR_FR]:{DEFAULT_CALLOUT_TOPIC_TITLE:"Bulle",DEFAULT_FLOATING_TOPIC_TITLE:"Sujet Flottant",DEFAULT_MAIN_TOPIC_TITLE:"Sujet principal",DEFAULT_SUBTOPIC_TITLE:"Sous-sujet",DEFAULT_SUMMARY_TOPIC_TITLE:"Résumé",DEFAULT_RELATIONSHIP_TITLE:"Relation",LEGEND_TITLE:"Légende",LABEL_TITLE:"Etiquette",RECORD_TITLE_PREFIX:"Enregistrement Audio"}};ze.default={translate(e,t){const r=Ge[e];if(r){const i=r[t];return i||(He.defaultConfig.get(re.CONFIG.LOGGER).warn(`word '${t}' of language '${e}' hasn't been translated`),t)}throw new Error(`unsupported language: ${e}`)}};var $e={};(function(e){(function(){"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.default=class extends le.EventEmitter{constructor(e,t={}){super(),this._initData=e,this._data=new r(e),this._options=t}toString(){return this._data.toString()}toJSON(){return this._data.toJSON()}getId(){return this._data.commit("get","id")}remove(e){if(!e)return this.reset();this._data.commit("delete",e)}reset(){this._data=null,this._data=new r(this._initData),this.removeAllListeners()}get(e){return this._data.commit("get",e)}set(e,t){this._data.commit("set",e,t)}};const t=new WeakMap;class r{constructor(e){this._committing=!1,this.get=this._commitWrapper(e=>{const{obj:t,key:r}=this._getWrappedParentForKey(e);return t[r]}),this.set=this._commitWrapper((e,t)=>{const{obj:r,key:i}=this._getWrappedParentForKey(e);r[i]=t}),this.delete=this._commitWrapper(e=>{const{obj:t,key:r}=this._getWrappedParentForKey(e);delete t[r]}),this.keys=this._commitWrapper(e=>{const r=t.get(this);return Object.keys(r)}),t.set(this,e)}_checkCommittingState(){if(!this._committing&&"development"===e.env.NODE_ENV)throw new Error("Guy, don't invoke method 'get | set | delete' of DataWrapper directly. MUST invoke 'commit' method instead.")}_getWrappedParentForKey(e){const r=t.get(this);if(je.isString(e))return{obj:r,key:e};if(je.isArray(e)){let t=r;for(let r=0;r<e.length-1;r++){if(je.isUndefined(t))return{obj:{},key:e[r]};t=t[e[r]]}return{obj:t,key:e[e.length-1]}}}toString(){const e=t.get(this);return JSON.stringify(e)}getOriginalData(){return t.get(this)}toJSON(){return JSON.parse(JSON.stringify(this.getOriginalData()))}_commitWrapper(e){return(t,r)=>{if(this._checkCommittingState(),"function"==typeof e)return e.call(this,t,r)}}commit(e,t,r){let i;const n=this._committing;this._committing=!0;const o=this[e];return"function"==typeof o&&(i=o.call(this,t,r)),this._committing=n,i}}}).call(this)}).call(this,h);var Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.default=class extends $e.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.BASE_COMPONENT}init(e){this.ownerSheet(e)}triggerModelChanged(...e){this.emit(e[0],...e.slice(1)),this.ownerSheet().emit(re.EVENTS.AFTER_SHEET_CONTENT_CHANGE)}ownerWorkbook(e){return e&&(this._ownerWorkbook=e),this._ownerWorkbook}ownerSheet(e){return e&&(this._ownerSheet=e),this._ownerSheet}parent(e){return void 0!==e&&(this.emit("beforeParentChange"),this._parent=e,this.emit("afterParentChange")),this._parent}getUndo(){return this.ownerSheet().getUndo()}isOrphan(){const e=this.parent();return!e||e.isOrphan()}};var We={};Object.defineProperty(We,"__esModule",{value:!0});const Ve=" ",qe="get",Ke="set",Xe="delete",Ze="style",Je="class",Qe={[re.STYLE_KEYS.SHAPE_CLASS]:"summaryLineClass",[re.STYLE_KEYS.LINE_WIDTH]:"summaryLineWidth",[re.STYLE_KEYS.LINE_COLOR]:"summaryLineColor"},et="changeClass",tt="changeStyle";We.default=class extends Ye.default{constructor(e,t={}){super(e,t),this.componentType=re.COMPONENT_TYPE.STYLE_COMPONENT,this._classList=[]}init(e){super.init(e);const t=this._data.commit(qe,Ze);this._initStyle(t)}_initStyle(e){return e&&e.properties||(e=this._createEmptyStyleData(),this._data.commit(Ke,Ze,e)),this._style=this.ownerSheet().createComponent(re.COMPONENT_TYPE.STYLE,e),this._style.parent(this),this._style}_createEmptyStyleData(){return{id:je.UUID(),properties:{}}}getClassList(){if(this._classList)return this._classList;this._classList=[];const e=this._data.commit(qe,Je);return"string"==typeof e&&(this._classList=e.split(Ve).filter(e=>""!==e)),this._classList}addClass(e,t){if(!e||e.includes(Ve))return;let r=this.getClassList();je.isDef(e)&&!r.includes(e)&&(r.splice(t,0,e),this._data.commit(Ke,Je,r.join(Ve)),this.triggerModelChanged(et,e),this.getUndo().add({undo:()=>{this.removeClass(e)},redo:()=>{this.addClass(e,t)}}))}removeClass(e){let t=this.getClassList();if(je.isDef(e)&&t.includes(e)){let r=t.indexOf(e);t.splice(r,1),t.length>0?this._data.commit(Ke,Je,t.join(Ve)):this._data.commit(Xe,Je),this.triggerModelChanged(et,e),this.getUndo().add({undo:()=>{this.addClass(e,r)},redo:()=>{this.removeClass(e)}})}}getClassValue(e){const t=this.getClassList(),r=this.ownerSheet().getTheme();let i;if(r)for(let n of t){let t=r.getStyleValue(n,e);t&&(i=t)}return i}getStyle(){return this._style}getStyleValue(e){return this._style.getValue(e)}changeStyle(e,t){const r=e;let i=this.getStyleValue(e);if(i!==t){if(t&&e===re.STYLE_KEYS.TEXT_DECORATION){let[e,r]=t.split(":");t=r,r?"add"===e?("none"!==i&&i||(i=""),t=i.includes(t)?i:i+` ${t}`):"rm"===e&&(i||(i=""),""===(t=i.includes(t)&&i.replace(t,"").trim())&&(t="none")):t=e.trim()}t?this._style.setValue(e,t):this._style.removeKey(e),this.componentType===re.COMPONENT_TYPE.SUMMARY&&Qe[e]&&(e=Qe[e]),this.triggerModelChanged(tt,e,t),this.getUndo().add({undo:()=>{this.changeStyle(r,i)},redo:()=>{this.changeStyle(r,t)}})}}};var rt={};Object.defineProperty(rt,"__esModule",{value:!0});const it="range",nt="get",ot="set";rt.default=class extends We.default{getRange(){return this._data.commit(nt,it)}setRange(e){const t=this.getRange();e!==t&&(this._data.commit(ot,it,e),this.getUndo().add({undo:()=>this.setRange(t),redo:()=>this.setRange(e)}))}get rangeStart(){const e=this.getRange();return e===re.MASTER_RANGE?-1:parseInt(e.match(/\d+/g)[0],10)}get rangeEnd(){const e=this.getRange();return e===re.MASTER_RANGE?-1:parseInt(e.match(/\d+/g)[1],10)}};var at={};Object.defineProperty(at,"__esModule",{value:!0});const st="get",lt="set",ht="title";at.default=class extends rt.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.BOUNDARY}getTitle(){return this._data.commit(st,ht)}changeTitle(e){const t=this.getTitle();t!==e&&(this._data.commit(lt,ht,e),this.getUndo().add({undo:()=>{this.changeTitle(t)},redo:()=>{this.changeTitle(e)}}))}};var ct={};Object.defineProperty(ct,"__esModule",{value:!0});const ut="visibility",dt="position",ft="markers";ct.default=class extends Ye.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.LEGEND,this.modelEvents={legendAddMarker:"legendAddMarker",legendRemoveMarker:"legendRemoveMarker",legendMarkerDescChanged:"legendMarkerDescChanged"},this._liveMarkerMap={}}init(e){super.init(e),this._initEventsListener()}getLiveMarkerMap(){return Object.assign({},this._liveMarkerMap)}_initEventsListener(){const e=this.ownerSheet(),t=e.modelEvents;e.on(t.topicAddMarker,this._onTopicAddMarker.bind(this)),e.on(t.topicChangeMarker,this._onTopicChangeMarker.bind(this)),e.on(t.topicRemoveMarker,this._onTopicRemoveMarker.bind(this))}_onTopicAddMarker(e){const t=this._liveMarkerMap,r=e.markerId;t[r]?t[r]++:(t[r]=1,this.emit(this.modelEvents.legendAddMarker,r))}_onTopicChangeMarker(e){}_onTopicRemoveMarker(e){const t=this._liveMarkerMap,r=e.markerId;--t[r]||(delete t[r],this.emit(this.modelEvents.legendRemoveMarker,r))}isVisible(){return"visible"===this._data.commit("get",ut)}setVisible(e){this._data.commit("set",ut,e?"visible":"hidden"),this.getUndo().add({undo:()=>this.setLegendDisplay(!e),redo:()=>this.setLegendDisplay(e)})}setLegendDisplay(e){return this.setVisible(e)}getPosition(){return this._data.commit("get",dt)}setPosition(e){const t=this._data.commit("get",dt);e?this._data.commit("set",dt,e):this._data.commit("delete",dt),this.getUndo().add({undo:()=>this.setLegendPosition(t),redo:()=>this.setLegendPosition(e)})}setLegendPosition(e){return this.setPosition(e)}getUserMarkerDescription(){return JSON.parse(JSON.stringify(this._data.commit("get",ft)))}setUserMarkerDescription(e,t){const r=JSON.parse(JSON.stringify(this._data.commit("get",ft)||{})),i=(r[e]||{}).name;t?r[e]={name:t}:delete r[e],this._data.commit("set",ft,r),this.emit(this.modelEvents.legendMarkerDescChanged),this.getUndo().add({undo:()=>this.setUserMarkerDescription(e,i),redo:()=>this.setUserMarkerDescription(e,t)})}};var pt={};Object.defineProperty(pt,"__esModule",{value:!0});pt.default=class extends Ye.default{constructor(){super(...arguments),this.componentType=re.MODEL_TYPE.MARKER}};var mt={};Object.defineProperty(mt,"__esModule",{value:!0});mt.default=class extends Ye.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.NOTE}};var gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.default=class extends Ye.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.NUMBERING}createEmptyNumbering(){return{numberFormat:"",prefix:"",suffix:""}}changeNumbering(e,t){this._data.commit("set",e,t),this.emit("changeNumbering",e,t)}};var _t={};Object.defineProperty(_t,"__esModule",{value:!0});const vt="get",yt="set",Et="title",bt="end1Id",Tt="end2Id",wt="controlPoints",St="change:title",Ot="change:endPoints",At="change:controlPoints";_t.default=class extends We.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.RELATIONSHIP}getTitle(){return this._data.commit(vt,Et)}changeTitle(e){let t=this.getTitle();t!==e&&(this._data.commit(yt,Et,e),this.triggerModelChanged(St),this.getUndo().add({undo:()=>this.changeTitle(t),redo:()=>this.changeTitle(e)},"R-changeTitle"))}getEnd1Id(){return this._data.commit(vt,bt)}getEnd2Id(){return this._data.commit(vt,Tt)}changeEndPoints(e){const t={end1Id:this.getEnd1Id(),end2Id:this.getEnd2Id()};t.end1Id===e.end1Id&&t.end2Id===e.end2Id||(e.end1Id&&e.end1Id!==t.end1Id&&this._data.commit(yt,bt,e.end1Id),e.end2Id&&e.end2Id!==t.end2Id&&this._data.commit(yt,Tt,e.end2Id),this.triggerModelChanged(Ot),this.getUndo().add({undo:()=>{this.changeEndPoints(t)},redo:()=>{this.changeEndPoints(e)}},"R-changeEndPoints"))}getControlPoint0(){return this._data.commit(vt,wt)[0]}getControlPoint1(){return this._data.commit(vt,wt)[1]}changeControlPoints(e){if(!e||0===Object.keys(e).length)return;const t=this._data.commit(vt,wt)||{},r=Object.assign({},t),i=!!e[0]&&!je.isEqualPoint(e[0],r[0]),n=!!e[1]&&!je.isEqualPoint(e[1],r[1]);if(!i&&!n)return;const o=Object.assign({},r,e);this._data.commit(yt,wt,o),this.triggerModelChanged(At),this.getUndo().add({undo:()=>{this.changeControlPoints(r)},redo:()=>{this.changeControlPoints(o)}},"R-changeControlPoints")}};var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});const It="provider";Ct.default=class extends Ye.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.EXTENSION}getProvider(){return this._data.commit("get",It)}};var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});const xt="get",Nt="set",Rt="delete",kt="properties";Pt.default=class extends Ye.default{constructor(e,t={}){super(e,t),this.componentType=re.COMPONENT_TYPE.STYLE}keys(){const e=this._data.commit(xt,kt);return e?Object.keys(e):[]}getValue(e){return this._data.commit(xt,[kt,e])}setValue(e,t){this._data.commit(Nt,[kt,e],t)}removeKey(e){if(!e)return this.remove();this._data.commit(Rt,[kt,e])}};var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});const Dt="get",Ft="topicId";Lt.default=class extends rt.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.SUMMARY}getSummaryTopic(){const e=this._data.commit(Dt,Ft);return this.ownerSheet().findComponentById(e)}};var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});const Ut="get",jt="set",Bt="delete",Ht="keys",zt="changeThemeClass";Mt.default=class extends Ye.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.THEME}init(e){super.init(e),this.getAllClassNames().forEach(e=>{const t=this._data.commit(Ut,e);this._properties[e]=this.ownerSheet().createComponent(re.COMPONENT_TYPE.STYLE,t),this._properties[e].parent(this)})}hasClass(e){return!!this._properties[e]}getStyle(e){return this._properties[e]}getTitle(){return this._data.commit("get","title")}changeTitle(e){return this._data.commit("set","title",e)}getStyleValue(e,t){const r=this._properties[e];return r&&r.getValue(t)}getAllClassNames(){return this._data.commit(Ht).filter(e=>{})}changeClass(e,t){if(!je.isDef(t))return delete this._properties[e],this._data.commit(Bt,e),void this.triggerModelChanged(zt);const r=JSON.parse(JSON.stringify(t)),i=this.ownerSheet().createComponent(re.COMPONENT_TYPE.STYLE,r),n=this._properties[e]?this._properties[e].toJSON():null;this._properties[e]=i,this._properties[e].parent(this),this._data.commit(jt,e,r),this.triggerModelChanged(zt),this.getUndo().add({undo:()=>this.changeClass(e,n),redo:()=>this.changeClass(e,t)})}};var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});const $t=Object.freeze({type:re.TOPIC_TYPE.ATTACHED}),Yt="children",Wt="boundaries",Vt="summaries",qt="markers",Kt="labels",Xt="notes",Zt="image",Jt="href",Qt="numbering",er="branch",tr="title",rr="position",ir="structureClass",nr="width",or="extensions";Gt.default=class extends We.default{constructor(e,t=je.deepClone($t)){super(e,t),this.componentType=re.COMPONENT_TYPE.TOPIC,this.modelEvents={addTopic:"addTopic",removeTopic:"removeTopic",moveChildTopic:"moveChildTopic",addBoundary:"addBoundary",removeBoundary:"removeBoundary",addSummary:"addSummary",removeSummary:"removeSummary",addImage:"addImage",removeImage:"removeImage",addMarker:"addMarker",removeMarker:"removeMarker",addLabel:"addLabel",removeLabel:"removeLabel",addNotes:"addNotes",removeNotes:"removeNotes",addHref:"addHref",removeHref:"removeHref",addNumbering:"addNumbering",removeNumbering:"removeNumbering",changeTitle:"changeTitle",changePosition:"changePosition",changeStructureClass:"changeStructureClass",changeCustomWidth:"changeCustomWidth",extensionEventMap:{add:{[re.EXTENSION_PROVIDER.AUDIO_NOTES]:"addAudioNotes",[re.EXTENSION_PROVIDER.TASK_INFO]:"addTaskInfo",[re.EXTENSION_PROVIDER.UNBALANCED_MAP]:"addUnbalancedMapInfo"},remove:{[re.EXTENSION_PROVIDER.AUDIO_NOTES]:"removeAudioNotes",[re.EXTENSION_PROVIDER.TASK_INFO]:"removeTaskInfo",[re.EXTENSION_PROVIDER.UNBALANCED_MAP]:"removeUnbalancedMapInfo"}},labelsChanged:"labelsChanged",informationChanged:"informationChanged"},this._childrenTopicMap={},this._boundaries=[],this._summaries=[],this._markers=[],this._image=null,this._notes=null,this._numbering=null,this._extensionMap={},this._topicType=t.type||re.TOPIC_TYPE.ATTACHED}init(e){super.init(e),this._initMarkers(),this._initChildren(),this._initBoundaries(),this._initSummaries(),this._initImage(),this._initNotes(),this._initNumbering(),this._initExtensionMap()}_initChildren(){const e=this._data.commit("get",Yt);e&&Object.keys(e).forEach(t=>{const r=e[t];if(Array.isArray(r))for(let e=0;e<r.length;++e){const i=r[e];this._addChildTopic(i,{type:t,index:e})}})}_initBoundaries(){const e=this._data.commit("get",Wt);Array.isArray(e)&&e.forEach(e=>{this._addBoundary(e)})}_initSummaries(){const e=this._data.commit("get",Vt);Array.isArray(e)&&e.forEach(e=>{this._addSummary(e,{},!0)})}_initMarkers(){const e=this._data.commit("get",qt);Array.isArray(e)&&e.forEach(e=>{this._addMarker(e)})}_initImage(){const e=this._data.commit("get",Zt);e&&this._addImage(e)}_initNotes(){const e=this._data.commit("get",Xt);e&&this._addNotes(e)}_initNumbering(){const e=this._data.commit("get",Qt);e&&this._addNumbering(e)}_initExtensionMap(){const e=this._data.commit("get",or);Array.isArray(e)&&e.forEach(e=>{this._addExtension(e.provider,e)})}getType(){return this._topicType}getChildren(){return this._initData}getChildrenByType(e){"string"==typeof e&&(e=[e]);const t=[];return e.forEach(e=>{const r=this._childrenTopicMap[e];Array.isArray(r)&&t.push(...r)}),t}addChildTopic(e,t=$t){const r=Object.assign({},t),i=this._addChildTopic(e,r);this._data.commit("get",Yt)||this._data.commit("set",Yt,{});const n=this._data.commit("get",Yt);return n[r.type]||(n[r.type]=[]),(je.isUndefined(r.index)||je.isNull(r.index)||r.index<0)&&(r.index=this.getChildrenByType(r.type).length),n[r.type].splice(r.index,0,e),this.emit(this.modelEvents.addTopic),this.getUndo().add({undo:()=>this.removeChildTopic(i),redo:()=>this.addChildTopic(e,r)}),i}_addChildTopic(e,t){const r=this.ownerSheet().createComponent(re.COMPONENT_TYPE.TOPIC,e,t);return(je.isUndefined(t.index)||je.isNull(t.index)||t.index<0)&&(t.index=this.getChildrenByType(t.type).length),this._childrenTopicMap[t.type]||(this._childrenTopicMap[t.type]=[]),this._childrenTopicMap[t.type].splice(t.index,0,r),r.parent(this),r}getChildIndexByType(e,t){const r=this.getChildrenByType(e),i=t.getId();return r.map(e=>e.getId()).indexOf(i)}removeChildTopic(e){const t=e.getType(),r=this.getChildIndexByType(t,e);if(-1===r)throw new Error("target is not child of this topic");this._childrenTopicMap[t].splice(r,1);const i=this._data.commit("get",Yt);i[t].splice(r,1),i[t].length||delete i[t],je.isEmpty(i)&&this._data.commit("delete",Yt),e.remove(),this.emit(this.modelEvents.removeTopic),this.getUndo().add({undo:()=>this.addChildTopic(e.toJSON(),{type:t,index:r}),redo:()=>this.removeChildTopic(this._childrenTopicMap[t][r])})}moveChildTopic(e,t){if(je.isUndefined(e)||je.isUndefined(t))return;if(e===t)return;const r=this._childrenTopicMap[re.TOPIC_TYPE.ATTACHED];if(!Array.isArray(r))return;if(!(e>=0&&e<=r.length-1&&t>=0&&t<=r.length-1))return;const i=r[e];this._childrenTopicMap[re.TOPIC_TYPE.ATTACHED].splice(e,1),this._childrenTopicMap[re.TOPIC_TYPE.ATTACHED].splice(t,0,i);const n=this._data.commit("get",Yt);n[re.TOPIC_TYPE.ATTACHED].splice(e,1),n[re.TOPIC_TYPE.ATTACHED].splice(t,0,i.toJSON()),this.emit(this.modelEvents.moveChildTopic,e,t),this.getUndo().add({undo:()=>this.moveChildTopic(t,e),redo:()=>this.moveChildTopic(e,t)})}getBoundaries(){return[...this._boundaries]}addBoundary(e,t={}){const r=this._addBoundary(e,t);if(r)return this._data.commit("get",Wt)||this._data.commit("set",Wt,[]),this._data.commit("get",Wt).push(e),this.emit(this.modelEvents.addBoundary),this.getUndo().add({undo:()=>this.removeBoundary(r),redo:()=>this.addBoundary(e,t)}),r}_addBoundary(e,t={}){const r=this.ownerSheet().createComponent(re.COMPONENT_TYPE.BOUNDARY,e,t);return this._boundaries.push(r),r.parent(this),r}removeBoundary(e){const t=this._boundaries.indexOf(e);if(-1===t)return;this._boundaries.splice(t,1);const r=this._data.commit("get",Wt);r.splice(t,1),0===r.length&&this._data.commit("delete",Wt),e.remove(),this.emit(this.modelEvents.removeBoundary),this.getUndo().add({undo:()=>this.addBoundary(e.toJSON()),redo:()=>this.removeBoundary(this._boundaries[t])})}getSummaries(){return[...this._summaries]}addSummary(e,t,r={}){this._addSummary(e,r)&&(t.id=e.topicId,this.addChildTopic(t,{type:re.TOPIC_TYPE.SUMMARY}))}_addSummary(e,t={},r=!1){const i=this.ownerSheet().createComponent(re.COMPONENT_TYPE.SUMMARY,e,t);return t.index&&(t.index=this._summaries.length),this._summaries.splice(t.index,0,i),i.parent(this),r||(this._data.commit("get",Vt)||this._data.commit("set",Vt,[]),this._data.commit("get",Vt).splice(t.index,0,e),this.emit(this.modelEvents.addSummary,e),this.getUndo().add({undo:()=>this._removeSummary(i),redo:()=>this._addSummary(e,t)})),i}removeSummary(e){this._removeSummary(e);const t=e.getSummaryTopic();this.removeChildTopic(t)}_removeSummary(e){const t=this._summaries.indexOf(e);if(-1===t)return;this._summaries.splice(t,1);const r=this._data.commit("get",Vt);r.splice(t,1),0===r.length&&this._data.commit("delete",Vt),e.remove(),this.triggerModelChanged(this.modelEvents.removeSummary),this.getUndo().add({undo:()=>this._addSummary(e.toJSON(),{index:t}),redo:()=>this._removeSummary(this._summaries[t])})}_canCollapse(){return this.getChildrenByType(re.TOPIC_TYPE.ATTACHED).length>0&&!this.isRootTopic()}isFolded(){return"folded"===this._data.commit("get",er)&&this._canCollapse()}extendTopic(){this.isFolded()&&(this._data.commit("delete",er),this.getUndo().add({undo:()=>this.collapseTopic(),redo:()=>this.extendTopic()}))}collapseTopic(){!this.isFolded()&&this._canCollapse()&&(this._data.commit("set",er,"folded"),this.getUndo().add({undo:()=>this.extendTopic(),redo:()=>this.collapseTopic()}))}getMarkers(){return[...this._markers]}addMarker(e,t={}){const r=this._addMarker(e,t);this._data.commit("get",qt)||this._data.commit("set",qt,[]),this._data.commit("get",qt).push(e),this.getUndo().add({undo:()=>this.removeMarker(r.toJSON()),redo:()=>this.addMarker(e,t)})}_addMarker(e,t={}){const r=this.ownerSheet().createComponent(re.COMPONENT_TYPE.MARKER,e,t);this._markers.push(r),this.emit(this.modelEvents.addMarker);const i=this.ownerSheet();return i.emit(i.modelEvents.topicAddMarker,e),r}removeMarker(e){const t=this._markers.map(e=>e.get("markerId")).indexOf(e.markerId);if(-1===t)return;const r=this._markers[t];this._markers.splice(t,1);const i=this._data.commit("get",qt);i.splice(t,1),0===i.length&&this._data.commit("delete",qt),r.remove();const n=r._data.getOriginalData();this.emit(this.modelEvents.removeMarker,n);const o=this.ownerSheet();o.emit(o.modelEvents.topicRemoveMarker,n),this.getUndo().add({undo:()=>this.addMarker(r.toJSON()),redo:()=>this.removeMarker(n)})}getImage(){return this._image}addImage(e,t={}){this._image&&this.removeImage(),this._addImage(e,t),this._data.commit("set",Zt,e),this.emit(this.modelEvents.addImage),this.getUndo().add({undo:()=>this.removeImage(),redo:()=>this.addImage(e,t)})}_addImage(e,t={}){const r=this.ownerSheet().createComponent(re.COMPONENT_TYPE.IMAGE,e,t);return r.parent(this),this._image=r,r}removeImage(){if(!this._image)return;const e=this._image;this._image=null,this._data.commit("delete",Zt),e.remove(),this.emit(this.modelEvents.removeImage),this.getUndo().add({undo:()=>this.addImage(e.toJSON()),redo:()=>this.removeImage()})}getLabels(){return[...this._data.commit("get",Kt)||[]]}addLabel(e,t={}){const r=this.getLabels();if(r.includes(e))return;const i=t.index||r.length;r.splice(i,0,e),this._data.commit("set",Kt,[...r]),this.emit(this.modelEvents.addLabel),this.getUndo().add({undo:()=>this.removeLabel(e),redo:()=>this.addLabel(e,t)})}removeLabels(){const e=this.getLabels();for(const t of e)this.removeLabel(t)}removeLabel(e){if(!e)return this.removeLabels();const t=this.getLabels(),r=t.indexOf(e);-1!==r&&(t.splice(r,1),t.length?this._data.commit("set",Kt,[...t]):this._data.commit("delete",Kt),this.emit(this.modelEvents.removeLabel),this.getUndo().add({undo:()=>this.addLabel(e,{index:r}),redo:()=>this.removeLabel(e)}))}getNotes(){return this._notes}addNotes(e,t={}){const r=this._addNotes(e,t);return this._data.commit("set",Xt,e),this.emit(this.modelEvents.addNotes),this.getUndo().add({undo:()=>this.removeNotes(),redo:()=>this.addNotes(e,t)}),r}_addNotes(e,t={}){const r=this.ownerSheet().createComponent(re.COMPONENT_TYPE.NOTE,e,t);return this._notes=r,r}removeNotes(){const e=this._notes;e&&(this._notes=null,this._data.commit("delete",Xt),e.remove(),this.emit(this.modelEvents.removeNotes),this.getUndo().add({undo:()=>this.addNotes(e.toJSON()),redo:()=>this.removeNotes()}))}getHref(){return this._data.commit("get",Jt)}addHref(e){this._data.commit("set",Jt,e),this.emit(this.modelEvents.addHref),this.getUndo().add({undo:()=>this.removeHref(),redo:()=>this.addHref(e)})}removeHref(){const e=this.getHref();e&&(this._data.commit("delete",Jt),this.emit(this.modelEvents.removeHref),this.getUndo().add({undo:()=>this.addHref(e),redo:()=>this.removeHref()}))}getNumbering(){return this._numbering}addNumbering(e,t={}){e?(this._data.commit("set",Qt,e),this._addNumbering(e,t)):this._data.commit("delete",Qt),this.emit(this.modelEvents.addNumbering),this.getUndo().add({undo:()=>this.removeNumbering(),redo:()=>this.addNumbering(e,t)})}_addNumbering(e,t={}){const r=this.ownerSheet().createComponent(re.COMPONENT_TYPE.NUMBERING,e,t);return this._numbering=r,r}changeNumbering(e,t){this._numbering.changeNumbering(e,t)}removeNumbering(){const e=this._numbering;e&&(this._numbering=null,this._data.commit("delete",Qt),this._numbering.remove(),this.emit(this.modelEvents.removeNumbering),this.getUndo().add({undo:()=>this.addNumbering(e.toJSON()),redo:()=>this.removeNumbering()}))}isRootTopic(){return this.getType()===re.TOPIC_TYPE.ROOT}getTitle(){return this._data.commit("get",tr)}changeTitle(e){const t=this.getTitle();t!==e&&(this._data.commit("set",tr,e),this.emit(this.modelEvents.changeTitle),this.getUndo().add({undo:()=>this.changeTitle(t),redo:()=>this.changeTitle(e)}))}getPosition(){return Object.assign({},this._data.commit("get",rr))}changePosition(e){const t=this.getPosition();if(e&&je.isPointLike(e)){if(je.isEqualPoint(e,t))return;this._data.commit("set",rr,e)}else this._data.commit("delete",rr);this.emit(this.modelEvents.changePosition),this.getUndo().add({undo:()=>this.changePosition(t),redo:()=>this.changePosition(e)})}getStructureClass(){return this._data.commit("get",ir)}changeStructureClass(e){const t=this.getStructureClass();t!==e&&(e?this._data.commit("set",ir,e):this._data.commit("delete",ir),this.emit(this.modelEvents.changeStructureClass),this.getUndo().add({undo:()=>this.changeStructureClass(t),redo:()=>this.changeStructureClass(e)}))}getCustomWidth(){return this._data.commit("get",nr)}changeCustomWidth(e){const t=this.getCustomWidth();t!==e&&(e?this._data.commit("set",nr,e):this._data.commit("delete",nr),this.emit(this.modelEvents.changeCustomWidth),this.getUndo().add({undo:()=>this.changeCustomWidth(t),redo:()=>this.changeCustomWidth(e)}))}addExtension(e,t,r={}){this._addExtension(e,t,r);const i=Object.keys(this._extensionMap).map(e=>this._extensionMap[e]);this._data.commit("set",or,i),this.emit(this.modelEvents.extensionEventMap.add[e]),this.getUndo().add({undo:()=>this.removeExtension(e),redo:()=>this.addExtension(e,t,r)})}_addExtension(e,t,r={}){const i=this.ownerSheet().createComponent(re.COMPONENT_TYPE.EXTENSION,t,r);return this._extensionMap[e]=i,i}removeExtension(e){const t=this._extensionMap[e];if(!t)return;delete this._extensionMap[e];const r=Object.keys(this._extensionMap).map(e=>this._extensionMap[e]);r.length?this._data.commit("set",or,r):this._data.commit("delete",or),t.remove(),this.emit(this.modelEvents.extensionEventMap.remove[e]),this.getUndo().add({undo:()=>this.addExtension(e,t.toJSON()),redo:()=>this.removeExtension(e)})}getExtensions(){return Object.values(this._extensionMap)}getExtension(e){return this._extensionMap[e]}getAudioNotes(){return this._extensionMap[re.EXTENSION_PROVIDER.AUDIO_NOTES]}addAudioNotes(e,t={}){this.addExtension(re.EXTENSION_PROVIDER.AUDIO_NOTES,e,t)}removeAudioNotes(){this.removeExtension(re.EXTENSION_PROVIDER.AUDIO_NOTES)}getTaskInfo(){return this._extensionMap[re.EXTENSION_PROVIDER.TASK_INFO]}addTaskInfo(e,t={}){this.addExtension(re.EXTENSION_PROVIDER.TASK_INFO,e,t)}removeTaskInfo(){this.removeExtension(re.EXTENSION_PROVIDER.TASK_INFO)}getUnbalancedMapInfo(){return this._extensionMap[re.EXTENSION_PROVIDER.UNBALANCED_MAP]}addUnbalancedMapInfo(e,t={}){this.addExtension(re.EXTENSION_PROVIDER.UNBALANCED_MAP,e,t)}removeUnbalancedMapInfo(){this.removeExtension(re.EXTENSION_PROVIDER.UNBALANCED_MAP)}remove(){super.remove(),this.parent(null)}};var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.default=class extends Ye.default{constructor(){super(...arguments),this.componentType=re.COMPONENT_TYPE.IMAGE}getSrc(){return this.get("src")}getWidth(){return this.get("width")}getHeight(){return this.get("height")}getAlign(){return this.get("align")}resize(e){const t=this.getWidth(),r=this.getHeight();return this._resize(e),this.getUndo().add({undo:()=>this._resize({width:t,height:r}),redo:()=>this._resize(e)}),this}_resize(e){this.set("width",e.width),this.set("height",e.height)}align(e){const t=this.getAlign();return this._align(e),this.getUndo().add({undo:()=>this._align(t),redo:()=>this._align(e)}),this}_align(e){this.set("align",e)}removeSelf(){const e=this.parent();this.parent(null),e.removeImage()}};var sr={};Object.defineProperty(sr,"__esModule",{value:!0});const lr={[re.COMPONENT_TYPE.LEGEND]:ct.default,[re.COMPONENT_TYPE.THEME]:Mt.default,[re.COMPONENT_TYPE.BOUNDARY]:at.default,[re.COMPONENT_TYPE.RELATIONSHIP]:_t.default,[re.COMPONENT_TYPE.TOPIC]:Gt.default,[re.COMPONENT_TYPE.STYLE]:Pt.default,[re.COMPONENT_TYPE.SUMMARY]:Lt.default,[re.COMPONENT_TYPE.IMAGE]:ar.default,[re.COMPONENT_TYPE.MARKER]:pt.default,[re.COMPONENT_TYPE.NOTE]:mt.default,[re.COMPONENT_TYPE.NUMBERING]:gt.default,[re.COMPONENT_TYPE.EXTENSION]:Ct.default},hr=[re.COMPONENT_TYPE.THEME,re.COMPONENT_TYPE.TOPIC,re.COMPONENT_TYPE.BOUNDARY,re.COMPONENT_TYPE.SUMMARY,re.COMPONENT_TYPE.RELATIONSHIP,re.COMPONENT_TYPE.STYLE],cr=(e,t,r,i={})=>(!r.id&&hr.includes(t)&&(r.id=e.generateComponentId()),t===re.COMPONENT_TYPE.SUMMARY&&(r.topicId||(r.topicId=e.generateComponentId())),!0);sr.default=function(e,t,r,i={}){if(!cr(e,t,r,i))throw new Error(`${t} data check error!`);const n=lr[t];if(!n)throw new Error(`${t} is not supported.`);const o=new n(r,i);return o.init(e),o};var ur={};Object.defineProperty(ur,"__esModule",{value:!0});const dr="rootTopic",fr="get",pr="set",mr="legend",gr="title",_r="relationships",vr="theme",yr="topicPositioning",Er="topicOverlapping",br={ADD_RELATIONSHIP:"addRelationship",REMOVE_RELATIONSHIP:"removeRelationship",ADD_THEME:"addTheme",CHANGE_THEME:"changeTheme"};ur.default=class extends We.default{constructor(e,t={}){super(e,t),this.componentType=re.MODEL_TYPE.SHEET,this._config=new He.Config,this._idMap={},this._textTranslator=null,this.modelEvents={topicAddMarker:"topicAddMarker",topicChangeMarker:"topicChangeMarker",topicRemoveMarker:"topicRemoveMarker"},this.init(),t.undo?this._undoManager=t.undo:(this._undoManager=new ye.default,this._undoManager.setStackLimitedLength(1/0))}init(){super.init(this),this._initLegend(),this._initRootTopic(),this._initRelationships();const e=this._data.commit(fr,vr);this._initTheme(e),this._enableOldFreePosition()}_initLegend(){const e=this._data.commit(fr,mr)||{};this._legend=this.createComponent(re.MODEL_TYPE.LEGEND,e),this._legend.parent(this)}_initRootTopic(){this._rootTopic=this.createComponent(re.COMPONENT_TYPE.TOPIC,this._data.commit("get",dr),{type:re.TOPIC_TYPE.ROOT}),this._rootTopic.parent(this)}_initRelationships(){this._relationships=[];const e=this._data.commit(fr,_r);e&&e.forEach(e=>{const t=this.createComponent(re.COMPONENT_TYPE.RELATIONSHIP,e);t.parent(this),this._relationships.push(t),this.emit(br.ADD_RELATIONSHIP,t,this)})}getUndo(){return this._undoManager}ownerSheet(){return this}getLegend(){return this._legend}getRootTopic(){return this._rootTopic}replaceRootTopic(e){this._rootTopic.remove(),this._data.commit("set",dr,e),this._rootTopic=this.createComponent(re.COMPONENT_TYPE.TOPIC,e,{type:re.TOPIC_TYPE.ROOT}),this._rootTopic.parent(this)}getRelationships(){return[...this._relationships]}addRelationship(e,t={}){const r=this.createComponent(re.COMPONENT_TYPE.RELATIONSHIP,e);r.parent(this);const i=this._relationships,n=this._data.commit(fr,_r);n?n.push(e):this._data.commit(pr,_r,[e]),this.emit(re.EVENTS.AFTER_SHEET_CONTENT_CHANGE),i.push(r),this.emit(br.ADD_RELATIONSHIP,r,this),this.getUndo().add({undo:()=>this.removeRelationship(r),redo:()=>this.addRelationship(e)},"R-add")}removeRelationship(e){const t=this._relationships,r=t.indexOf(e);r<0||(this._data.commit(fr,_r).splice(r,1),this.emit(re.EVENTS.AFTER_SHEET_CONTENT_CHANGE),t.splice(r,1),e.parent(null),e.remove(),this.emit(br.REMOVE_RELATIONSHIP,e),this.getUndo().add({undo:()=>this.addRelationship(e.toJSON()),redo:()=>this.removeRelationship(e)},"R-remove"))}getTheme(){return this._theme}_initTheme(e){if(e){const t=this.createComponent(re.COMPONENT_TYPE.THEME,e);t.parent(this),this._theme=t}}changeTheme(e,t={}){const r=this.getTheme(),i=this._data.commit(fr,vr);this._data.commit(pr,vr,e),this._initTheme(e),r?(t.fixUserStyleWhenChangeTheme&&t.fixUserStyleWhenChangeTheme(),this.emit(br.CHANGE_THEME,this._theme)):this.emit(br.ADD_THEME,this._theme),this.getUndo().add({undo:()=>{this.changeTheme(i)},redo:()=>{this.changeTheme(e)}},"changeTheme"),this.emit(re.EVENTS.AFTER_THEME_CHANGED),this.emit(re.EVENTS.AFTER_SHEET_CONTENT_CHANGE)}changeFreePosition(e){const t=this._data.commit(fr,yr),r=e?"free":"fixed";r===t||!t&&"fixed"===r||(this._data.commit(pr,yr,r),this.emit(re.EVENTS.AFTER_SHEET_CONTENT_CHANGE),this.getUndo().add({undo:()=>{this._changePositioning(t)},redo:()=>{this._changePositioning(r)}}))}isFreePosition(){return"free"===this._data.commit(fr,yr)}_changePositioning(e){const t=this.get("topicPositioning");e===t||!t&&"fixed"===e||(this.set("topicPositioning",e),this.emit(re.EVENTS.AFTER_SHEET_CONTENT_CHANGE),this.getUndo().add({undo:()=>{this._changePositioning(t)},redo:()=>{this._changePositioning(e)}}))}_enableOldFreePosition(){void 0===this._data.commit(fr,yr)&&(this.getRootTopic().getChildrenByType(re.TOPIC_TYPE.ATTACHED).some(e=>!!e._data.position)?this._data.commit(pr,yr,"free"):this._data.commit(pr,yr,"fixed"))}changeOverlap(e){const t=this._data.commit(fr,Er);((e,t)=>e===t||!e&&"none"===t||"none"===e&&!t)(e,t)||(this._data.commit(pr,Er,e),this.emit(re.EVENTS.AFTER_SHEET_CONTENT_CHANGE),this.getUndo().add({undo:()=>this.changeOverlap(t),redo:()=>this.changeOverlap(e)}))}isTopicOverlapping(){return"overlap"===this._data.commit(fr,Er)}createComponent(e,t,r={}){let i=sr.default(this,e,t,r);return this._idMap[i.getId()]=i,i}generateComponentId(){let e=je.UUID();for(;this._idMap[e];)e=je.UUID();return e}getTitle(){return this.get(gr)}changeTitle(e){return this.set(gr,e)}findComponentById(e){return this._idMap[e]}remove(){super.remove(),this.parent(null)}setTextTranslator(e){this._textTranslator=e}getTranslatedText(e){return this._textTranslator?this._textTranslator(e):ze.default.translate(re.LANGS.ZH_CN,e)}relationships(){return console.error("need to remove"),this.getRelationships()}getLegendModel(){return console.error("need to remove"),this.getLegend()}isFreePositionEnabled(){return console.error("need to remove"),this.isFreePosition()}};var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.default=class extends Ye.default{constructor(e,t={}){super(e,t),this.componentType=re.COMPONENT_TYPE.WORKBOOK,this._sheets=[],this._config=new He.Config,this._initUndo(),this._initSheets()}_initUndo(){this._undoManager=new ye.default,this._undoManager.setStackLimitedLength(1/0),this._undoManager.on(re.EVENTS.UNDO_STATE_CHANGE,(...e)=>this.emit(re.EVENTS.UNDO_STATE_CHANGE,...e))}_initSheets(){this._data.getOriginalData().forEach(e=>{const t=new ur.default(e,{undo:this._undoManager});t.parent(this),this._sheets.push(t),this._listenSheetModel(t,e.id)})}_listenSheetModel(e,t){e&&e.on(re.EVENTS.AFTER_SHEET_CONTENT_CHANGE,()=>{this.emit(re.EVENTS.AFTER_WORKBOOK_CONTENT_CHANGE)})}addSheet(e,t={}){const r=this._sheets.findIndex(t=>t.getId()===e.id),i=new ur.default(e,{undo:this._undoManager});if(i.parent(this),this._listenSheetModel(i,e.id),r>0)this._config.get(re.CONFIG.LOGGER).info(e.id),this._config.get(re.CONFIG.LOGGER).warn("try to add an existing sheet"),this._sheets[r]=i;else{const r=t.at||this._sheets.length,n={sheetModel:i,at:r};this.emit(re.EVENTS.BEFORE_ADD_NEW_SHEET,e,n),this._data.getOriginalData().splice(r,0,e),this._sheets.splice(r,0,i),this.emit(re.EVENTS.AFTER_ADD_NEW_SHEET,e,n)}return this.getUndo().add({undo:()=>this.removeSheet(e.id),redo:()=>this.addSheet(e)}),i}removeSheet(e){const t=this.getSheetById(e);if(!t)return;this.emit(re.EVENTS.BEFORE_REMOVE_SHEET_MODEL,e);const r=this._sheets.indexOf(t),i=t.toJSON();this._data.getOriginalData().splice(r,1),this._sheets.splice(r,1),t.remove(),this.emit(re.EVENTS.AFTER_REMOVE_SHEET_MODEL,e),this.getUndo().add({undo:()=>this.addSheet(i),redo:()=>this.removeSheet(e)}),this.emit(re.EVENTS.AFTER_WORKBOOK_CONTENT_CHANGE)}moveSheetTo(e,t){const r=this.getSheetById(e);if(!r)return;const i=this._sheets.indexOf(r),n=this._data.getOriginalData(),o=n.splice(i,1);t<0&&(t=0),t>this._sheets.length-1&&(t=this._sheets.length-1),n.splice(t,0,...o),this._sheets.splice(i,1),this._sheets.splice(t,0,r),this.getUndo().add({undo:()=>this.moveSheetTo(e,i),redo:()=>this.moveSheetTo(e,t)}),this.emit(re.EVENTS.AFTER_SHEET_ORDER_CHANGE),this.emit(re.EVENTS.AFTER_WORKBOOK_CONTENT_CHANGE)}getSheets(){return[...this._sheets]}getSheetByIndex(e){return this._sheets[e]}getSheetById(e){return this._sheets.find(t=>t.getId()===e)}findSheetIndex(e){return this._sheets.findIndex(t=>t.getId()===e)}getUndo(){return this._undoManager}createEmptySheet(e="",t=""){const r={id:je.UUID(),title:e,rootTopic:{id:je.UUID(),title:t}};return this.addSheet(r)}};var wr={exports:{}};!function(e,t){"object"==typeof wr.exports?t(wr.exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.URI=e.URI||{})}(this,function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var i=t.length-1,n=1;n<i;++n)t[n]=t[n].slice(1,-1);return t[i]=t[i].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function i(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function o(e){var i=t("[0-9]","[A-Fa-f]"),n=r(r("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+r("%[89A-Fa-f]"+i+"%"+i+i)+"|"+r("%"+i+i)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\uE000-\\uF8FF]":"[]",l=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),h=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),c=r(r(n+"|"+t(l,o,"[\\:]"))+"*"),u=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),d=r(u+"\\."+u+"\\."+u+"\\."+u),f=r(i+"{1,4}"),p=r(r(f+"\\:"+f)+"|"+d),m=r(r(f+"\\:")+"{6}"+p),g=r("\\:\\:"+r(f+"\\:")+"{5}"+p),_=r(r(f)+"?\\:\\:"+r(f+"\\:")+"{4}"+p),v=r(r(r(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+r(f+"\\:")+"{3}"+p),y=r(r(r(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+r(f+"\\:")+"{2}"+p),E=r(r(r(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+p),b=r(r(r(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+p),T=r(r(r(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),w=r(r(r(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),S=r([m,g,_,v,y,E,b,T,w].join("|")),O=r(r(l+"|"+n)+"+"),A=(r(S+"\\%25"+O),r(S+r("\\%25|\\%(?!"+i+"{2})")+O)),C=r("[vV]"+i+"+\\."+t(l,o,"[\\:]")+"+"),I=r("\\["+r(A+"|"+S+"|"+C)+"\\]"),P=r(r(n+"|"+t(l,o))+"*"),x=r(I+"|"+d+"(?!"+P+")|"+P),N=r("[0-9]*"),R=r(r(c+"@")+"?"+x+r("\\:"+N)+"?"),k=r(n+"|"+t(l,o,"[\\:\\@]")),L=r(k+"*"),D=r(k+"+"),F=r(r(n+"|"+t(l,o,"[\\@]"))+"+"),M=r(r("\\/"+L)+"*"),U=r("\\/"+r(D+M)+"?"),j=r(F+M),B=r(D+M),H="(?!"+k+")",z=(r(M+"|"+U+"|"+j+"|"+B+"|"+H),r(r(k+"|"+t("[\\/\\?]",s))+"*")),G=r(r(k+"|[\\/\\?]")+"*"),$=r(r("\\/\\/"+R+M)+"|"+U+"|"+B+"|"+H),Y=r(h+"\\:"+$+r("\\?"+z)+"?"+r("\\#"+G)+"?"),W=r(r("\\/\\/"+R+M)+"|"+U+"|"+j+"|"+H),V=r(W+r("\\?"+z)+"?"+r("\\#"+G)+"?");r(Y+"|"+V),r(h+"\\:"+$+r("\\?"+z)+"?"),r(r("\\/\\/("+r("("+c+")@")+"?("+x+")"+r("\\:("+N+")")+"?)")+"?("+M+"|"+U+"|"+B+"|"+H+")"),r("\\?("+z+")"),r("\\#("+G+")"),r(r("\\/\\/("+r("("+c+")@")+"?("+x+")"+r("\\:("+N+")")+"?)")+"?("+M+"|"+U+"|"+j+"|"+H+")"),r("\\?("+z+")"),r("\\#("+G+")"),r(r("\\/\\/("+r("("+c+")@")+"?("+x+")"+r("\\:("+N+")")+"?)")+"?("+M+"|"+U+"|"+B+"|"+H+")"),r("\\?("+z+")"),r("\\#("+G+")"),r("("+c+")@"),r("\\:("+N+")");return{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,o,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,o),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,a),"g"),PCT_ENCODED:new RegExp(n,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+r(r("\\%25|\\%(?!"+i+"{2})")+"("+O+")")+"?\\]?$")}}var a=o(!1),s=o(!0),l=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){n=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(n)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=2147483647,c=/^xn--/,u=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(f[e])}function _(e,t){var r=e.split("@"),i="";r.length>1&&(i=r[0]+"@",e=r[1]);var n=function(e,t){for(var r=[],i=e.length;i--;)r[i]=t(e[i]);return r}((e=e.replace(d,".")).split("."),t).join(".");return i+n}function v(e){for(var t=[],r=0,i=e.length;r<i;){var n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){var o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&n)<<10)+(1023&o)+65536):(t.push(n),r--)}else t.push(n)}return t}var y=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},E=function(e,t,r){var i=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;i+=36)e=p(e/35);return p(i+36*e/(e+38))},b=function(e){var t,r=[],i=e.length,n=0,o=128,a=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var l=0;l<s;++l)e.charCodeAt(l)>=128&&g("not-basic"),r.push(e.charCodeAt(l));for(var c=s>0?s+1:0;c<i;){for(var u=n,d=1,f=36;;f+=36){c>=i&&g("invalid-input");var m=(t=e.charCodeAt(c++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>p((h-n)/d))&&g("overflow"),n+=m*d;var _=f<=a?1:f>=a+26?26:f-a;if(m<_)break;var v=36-_;d>p(h/v)&&g("overflow"),d*=v}var y=r.length+1;a=E(n-u,y,0==u),p(n/y)>h-o&&g("overflow"),o+=p(n/y),n%=y,r.splice(n++,0,o)}return String.fromCodePoint.apply(String,r)},T=function(e){var t=[],r=(e=v(e)).length,i=128,n=0,o=72,a=!0,s=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var d=c.value;d<128&&t.push(m(d))}}catch(e){s=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw l}}var f=t.length,_=f;for(f&&t.push("-");_<r;){var b=h,T=!0,w=!1,S=void 0;try{for(var O,A=e[Symbol.iterator]();!(T=(O=A.next()).done);T=!0){var C=O.value;C>=i&&C<b&&(b=C)}}catch(e){w=!0,S=e}finally{try{!T&&A.return&&A.return()}finally{if(w)throw S}}var I=_+1;b-i>p((h-n)/I)&&g("overflow"),n+=(b-i)*I,i=b;var P=!0,x=!1,N=void 0;try{for(var R,k=e[Symbol.iterator]();!(P=(R=k.next()).done);P=!0){var L=R.value;if(L<i&&++n>h&&g("overflow"),L==i){for(var D=n,F=36;;F+=36){var M=F<=o?1:F>=o+26?26:F-o;if(D<M)break;var U=D-M,j=36-M;t.push(m(y(M+U%j,0))),D=p(U/j)}t.push(m(y(D,0))),o=E(n,I,_==f),n=0,++_}}}catch(e){x=!0,N=e}finally{try{!P&&k.return&&k.return()}finally{if(x)throw N}}++n,++i}return t.join("")},w={version:"2.1.0",ucs2:{decode:v,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:b,encode:T,toASCII:function(e){return _(e,function(e){return u.test(e)?"xn--"+T(e):e})},toUnicode:function(e){return _(e,function(e){return c.test(e)?b(e.slice(4).toLowerCase()):e})}},S={};function O(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function A(e){for(var t="",r=0,i=e.length;r<i;){var n=parseInt(e.substr(r+1,2),16);if(n<128)t+=String.fromCharCode(n),r+=3;else if(n>=194&&n<224){if(i-r>=6){var o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&n)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(n>=224){if(i-r>=9){var a=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function C(e,t){function r(e){var r=A(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,O).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,O).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,O).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,O).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,O).replace(t.PCT_ENCODED,n)),e}function I(e){return e.replace(/^0*(.*)/,"$1")||"0"}function P(e,t){var r=e.match(t.IPV4ADDRESS)||[],i=l(r,2)[1];return i?i.split(".").map(I).join("."):e}function x(e,t){var r=e.match(t.IPV6ADDRESS)||[],i=l(r,3),n=i[1],o=i[2];if(n){for(var a=n.toLowerCase().split("::").reverse(),s=l(a,2),h=s[0],c=s[1],u=c?c.split(":").map(I):[],d=h.split(":").map(I),f=t.IPV4ADDRESS.test(d[d.length-1]),p=f?7:8,m=d.length-p,g=Array(p),_=0;_<p;++_)g[_]=u[_]||d[m+_]||"";f&&(g[p-1]=P(g[p-1],t));var v=g.reduce(function(e,t,r){if(!t||"0"===t){var i=e[e.length-1];i&&i.index+i.length===r?i.length++:e.push({index:r,length:1})}return e},[]).sort(function(e,t){return t.length-e.length})[0],y=void 0;if(v&&v.length>1){var E=g.slice(0,v.index),b=g.slice(v.index+v.length);y=E.join(":")+"::"+b.join(":")}else y=g.join(":");return o&&(y+="%"+o),y}return e}var N=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,R=void 0==="".match(/(){0}/)[1];function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},i=!1!==t.iri?s:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var n=e.match(N);if(n){R?(r.scheme=n[1],r.userinfo=n[3],r.host=n[4],r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=n[7],r.fragment=n[8],isNaN(r.port)&&(r.port=n[5])):(r.scheme=n[1]||void 0,r.userinfo=-1!==e.indexOf("@")?n[3]:void 0,r.host=-1!==e.indexOf("//")?n[4]:void 0,r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=-1!==e.indexOf("?")?n[7]:void 0,r.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),r.host&&(r.host=x(P(r.host,i),i)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var o=S[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)C(r,i);else{if(r.host&&(t.domainHost||o&&o.domainHost))try{r.host=w.toASCII(r.host.replace(i.PCT_ENCODED,A).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}C(r,a)}o&&o.parse&&o.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}var L=/^\.\.?\//,D=/^\/\.(\/|$)/,F=/^\/\.\.(\/|$)/,M=/^\/?(?:.|\n)*?(?=\/|$)/;function U(e){for(var t=[];e.length;)if(e.match(L))e=e.replace(L,"");else if(e.match(D))e=e.replace(D,"/");else if(e.match(F))e=e.replace(F,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(M);if(!r)throw new Error("Unexpected dot segment condition");var i=r[0];e=e.slice(i.length),t.push(i)}return t.join("")}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?s:a,i=[],n=S[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?w.toUnicode(e.host):w.toASCII(e.host.replace(r.PCT_ENCODED,A).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}C(e,r),"suffix"!==t.reference&&e.scheme&&(i.push(e.scheme),i.push(":"));var o=function(e,t){var r=!1!==t.iri?s:a,i=[];return void 0!==e.userinfo&&(i.push(e.userinfo),i.push("@")),void 0!==e.host&&i.push(x(P(String(e.host),r),r).replace(r.IPV6ADDRESS,function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"})),"number"!=typeof e.port&&"string"!=typeof e.port||(i.push(":"),i.push(String(e.port))),i.length?i.join(""):void 0}(e,t);if(void 0!==o&&("suffix"!==t.reference&&i.push("//"),i.push(o),e.path&&"/"!==e.path.charAt(0)&&i.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||n&&n.absolutePath||(l=U(l)),void 0===o&&(l=l.replace(/^\/\//,"/%2F")),i.push(l)}return void 0!==e.query&&(i.push("?"),i.push(e.query)),void 0!==e.fragment&&(i.push("#"),i.push(e.fragment)),i.join("")}function B(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(e=k(j(e,r),r),t=k(j(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=U(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=U(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function H(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:a.PCT_ENCODED,A)}var z={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},G={scheme:"https",domainHost:z.domainHost,parse:z.parse,serialize:z.serialize};function $(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var Y={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=$(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==($(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),i=l(r,2),n=i[0],o=i[1];e.path=n&&"/"!==n?n:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},W={scheme:"wss",domainHost:Y.domainHost,parse:Y.parse,serialize:Y.serialize},V={},q="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",K="[0-9A-Fa-f]",X=r(r("%[EFef][0-9A-Fa-f]%"+K+K+"%"+K+K)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+K+K)+"|"+r("%"+K+K)),Z=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),J=new RegExp(q,"g"),Q=new RegExp(X,"g"),ee=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Z),"g"),te=new RegExp(t("[^]",q,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),re=te;function ie(e){var t=A(e);return t.match(J)?t:e}var ne={scheme:"mailto",parse:function(e,t){var r=e,i=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var n=!1,o={},a=r.query.split("&"),s=0,l=a.length;s<l;++s){var h=a[s].split("=");switch(h[0]){case"to":for(var c=h[1].split(","),u=0,d=c.length;u<d;++u)i.push(c[u]);break;case"subject":r.subject=H(h[1],t);break;case"body":r.body=H(h[1],t);break;default:n=!0,o[H(h[0],t)]=H(h[1],t)}}n&&(r.headers=o)}r.query=void 0;for(var f=0,p=i.length;f<p;++f){var m=i[f].split("@");if(m[0]=H(m[0]),t.unicodeSupport)m[1]=H(m[1],t).toLowerCase();else try{m[1]=w.toASCII(H(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}i[f]=m.join("@")}return r},serialize:function(e,t){var r,i=e,o=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(o){for(var a=0,s=o.length;a<s;++a){var l=String(o[a]),h=l.lastIndexOf("@"),c=l.slice(0,h).replace(Q,ie).replace(Q,n).replace(ee,O),u=l.slice(h+1);try{u=t.iri?w.toUnicode(u):w.toASCII(H(u,t).toLowerCase())}catch(e){i.error=i.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[a]=c+"@"+u}i.path=o.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var f=[];for(var p in d)d[p]!==V[p]&&f.push(p.replace(Q,ie).replace(Q,n).replace(te,O)+"="+d[p].replace(Q,ie).replace(Q,n).replace(re,O));return f.length&&(i.query=f.join("&")),i}},oe=/^([^\:]+)\:(.*)/,ae={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(oe),i=e;if(r){var n=t.scheme||i.scheme||"urn",o=r[1].toLowerCase(),a=r[2],s=n+":"+(t.nid||o),l=S[s];i.nid=o,i.nss=a,i.path=void 0,l&&(i=l.parse(i,t))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",i=e.nid,n=r+":"+(t.nid||i),o=S[n];o&&(e=o.serialize(e,t));var a=e,s=e.nss;return a.path=(i||t.nid)+":"+s,a}},se=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,le={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(se)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};S[z.scheme]=z,S[G.scheme]=G,S[Y.scheme]=Y,S[W.scheme]=W,S[ne.scheme]=ne,S[ae.scheme]=ae,S[le.scheme]=le,e.SCHEMES=S,e.pctEncChar=O,e.pctDecChars=A,e.parse=k,e.removeDotSegments=U,e.serialize=j,e.resolveComponents=B,e.resolve=function(e,t,r){var i=function(e,t){var r=e;if(t)for(var i in t)r[i]=t[i];return r}({scheme:"null"},r);return j(B(k(e,i),k(t,i),i,!0),i)},e.normalize=function(e,t){return"string"==typeof e?e=j(k(e,t),t):"object"===i(e)&&(e=k(j(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=j(k(e,r),r):"object"===i(e)&&(e=j(e,r)),"string"==typeof t?t=j(k(t,r),r):"object"===i(t)&&(t=j(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:a.ESCAPE,O)},e.unescapeComponent=H,Object.defineProperty(e,"__esModule",{value:!0})}),wr=wr.exports;var Sr=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i,n,o;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(n=i;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=i;0!=n--;){var a=o[n];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r},Or={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:Ar,checkDataTypes:function(e,t,r){switch(e.length){case 1:return Ar(e[0],t,r,!0);default:var i="",n=Ir(e);for(var o in n.array&&n.object&&(i=n.null?"(":"(!"+t+" || ",i+="typeof "+t+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer,n)i+=(i?" && ":"")+Ar(o,t,r,!0);return i}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++){var n=t[i];Cr[n]?r[r.length]=n:"array"===e&&"array"===n&&(r[r.length]=n)}if(r.length)return r}else{if(Cr[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:Ir,getProperty:Nr,escapeQuotes:Rr,equal:Sr,ucs2length:function(e){for(var t,r=0,i=e.length,n=0;n<i;)r++,(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<i&&56320==(64512&(t=e.charCodeAt(n)))&&n++;return r},varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var i in e)if(i!=r&&t[i])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:kr,getPathExpr:function(e,t,r,i){return Fr(e,r?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var i=kr(r?"/"+Mr(t):Nr(t));return Fr(e,i)},getData:function(e,t,r){var i,n,o,a;if(""===e)return"rootData";if("/"==e[0]){if(!Lr.test(e))throw new Error("Invalid JSON-pointer: "+e);n=e,o="rootData"}else{if(!(a=e.match(Dr)))throw new Error("Invalid JSON-pointer: "+e);if(i=+a[1],"#"==(n=a[2])){if(i>=t)throw new Error("Cannot access property/index "+i+" levels up, current level is "+t);return r[t-i]}if(i>t)throw new Error("Cannot access data "+i+" levels up, current level is "+t);if(o="data"+(t-i||""),!n)return o}for(var s=o,l=n.split("/"),h=0;h<l.length;h++){var c=l[h];c&&(o+=Nr(Ur(c)),s+=" && "+o)}return s},unescapeFragment:function(e){return Ur(decodeURIComponent(e))},unescapeJsonPointer:Ur,escapeFragment:function(e){return encodeURIComponent(Mr(e))},escapeJsonPointer:Mr};function Ar(e,t,r,i){var n=i?" !== ":" === ",o=i?" || ":" && ",a=i?"!":"",s=i?"":"!";switch(e){case"null":return t+n+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+o+"typeof "+t+n+'"object"'+o+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+n+'"number"'+o+s+"("+t+" % 1)"+o+t+n+t+(r?o+a+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+n+'"'+e+'"'+(r?o+a+"isFinite("+t+")":"")+")";default:return"typeof "+t+n+'"'+e+'"'}}var Cr=Ir(["string","number","integer","boolean","null"]);function Ir(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var Pr=/^[a-z$_][a-z$_0-9]*$/i,xr=/'|\\/g;function Nr(e){return"number"==typeof e?"["+e+"]":Pr.test(e)?"."+e:"['"+Rr(e)+"']"}function Rr(e){return e.replace(xr,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function kr(e){return"'"+Rr(e)+"'"}var Lr=/^\/(?:[^~]|~0|~1)*$/,Dr=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Fr(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function Mr(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function Ur(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var jr=function(e){Or.copy(e,this)};var Br={},Hr=Br=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,i,n,o,a,s,l,h,c){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var u in r(n,o,a,s,l,h,c),n){var d=n[u];if(Array.isArray(d)){if(u in Hr.arrayKeywords)for(var f=0;f<d.length;f++)e(t,r,i,d[f],o+"/"+u+"/"+f,a,o,u,n,f)}else if(u in Hr.propsKeywords){if(d&&"object"==typeof d)for(var p in d)e(t,r,i,d[p],o+"/"+u+"/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),a,o,u,n,p)}else(u in Hr.keywords||t.allKeys&&!(u in Hr.skipKeywords))&&e(t,r,i,d,o+"/"+u,a,o,u,n)}i(n,o,a,s,l,h,c)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};Hr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},Hr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Hr.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Hr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var zr=Gr;function Gr(e,t,r){var i=this._refs[r];if("string"==typeof i){if(!this._refs[i])return Gr.call(this,e,t,i);i=this._refs[i]}if((i=i||this._schemas[r])instanceof jr)return qr(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var n,o,a,s=$r.call(this,t,r);return s&&(n=s.schema,t=s.root,a=s.baseId),n instanceof jr?o=n.validate||e.call(this,n.schema,t,void 0,a):void 0!==n&&(o=qr(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,a)),o}function $r(e,t){var r=wr.parse(t),i=Xr(r),n=Kr(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==n){var o=Jr(i),a=this._refs[o];if("string"==typeof a)return function(e,t,r){var i=$r.call(this,e,t);if(i){var n=i.schema,o=i.baseId;e=i.root;var a=this._getId(n);return a&&(o=Qr(o,a)),Wr.call(this,r,o,n,e)}}.call(this,e,a,r);if(a instanceof jr)a.validate||this._compile(a),e=a;else{if(!((a=this._schemas[o])instanceof jr))return;if(a.validate||this._compile(a),o==Jr(t))return{schema:a,root:e,baseId:n};e=a}if(!e.schema)return;n=Kr(this._getId(e.schema))}return Wr.call(this,r,n,e.schema,e)}Gr.normalizeId=Jr,Gr.fullPath=Kr,Gr.url=Qr,Gr.ids=function(e){var t=Jr(this._getId(e)),r={"":t},i={"":Kr(t,!1)},n={},o=this;return Br(e,{allKeys:!0},function(e,t,a,s,l,h,c){if(""!==t){var u=o._getId(e),d=r[s],f=i[s]+"/"+l;if(void 0!==c&&(f+="/"+("number"==typeof c?c:Or.escapeFragment(c))),"string"==typeof u){u=d=Jr(d?wr.resolve(d,u):u);var p=o._refs[u];if("string"==typeof p&&(p=o._refs[p]),p&&p.schema){if(!Sr(e,p.schema))throw new Error('id "'+u+'" resolves to more than one schema')}else if(u!=Jr(f))if("#"==u[0]){if(n[u]&&!Sr(e,n[u]))throw new Error('id "'+u+'" resolves to more than one schema');n[u]=e}else o._refs[u]=f}r[t]=d,i[t]=f}}),n},Gr.inlineRef=qr,Gr.schema=$r;var Yr=Or.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Wr(e,t,r,i){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var n=e.fragment.split("/"),o=1;o<n.length;o++){var a=n[o];if(a){if(void 0===(r=r[a=Or.unescapeFragment(a)]))break;var s;if(!Yr[a]&&((s=this._getId(r))&&(t=Qr(t,s)),r.$ref)){var l=Qr(t,r.$ref),h=$r.call(this,i,l);h&&(r=h.schema,i=h.root,t=h.baseId)}}}return void 0!==r&&r!==i.schema?{schema:r,root:i,baseId:t}:void 0}}var Vr=Or.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function qr(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&!e(r))return!1}else for(var n in t){if("$ref"==n)return!1;if("object"==typeof(r=t[n])&&!e(r))return!1}return!0}(e):t?function e(t){var r,i=0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&(i+=e(r)),i==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(Vr[o])i++;else if("object"==typeof(r=t[o])&&(i+=e(r)+1),i==1/0)return 1/0}return i}(e)<=t:void 0)}function Kr(e,t){return!1!==t&&(e=Jr(e)),Xr(wr.parse(e))}function Xr(e){return wr.serialize(e).split("#")[0]+"#"}var Zr=/#\/?$/;function Jr(e){return e?e.replace(Zr,""):""}function Qr(e,t){return t=Jr(t),wr.resolve(e,t)}var ei={Validation:ri(function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}),MissingRef:ri(ti)};function ti(e,t,r){this.message=r||ti.message(e,t),this.missingRef=zr.url(e,t),this.missingSchema=zr.normalizeId(zr.fullPath(this.missingRef))}function ri(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}ti.message=function(e,t){return"can't resolve reference "+t+" from id "+e};var ii=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,i="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&(r=t.cmp,function(e){return function(t,i){var n={key:t,value:e[t]},o={key:i,value:e[i]};return r(n,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,a;if(Array.isArray(t)){for(a="[",r=0;r<t.length;r++)r&&(a+=","),a+=e(t[r])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,l=Object.keys(t).sort(n&&n(t));for(a="",r=0;r<l.length;r++){var h=l[r],c=e(t[h]);c&&(a&&(a+=","),a+=JSON.stringify(h)+":"+c)}return o.splice(s,1),"{"+a+"}"}}(e)},ni=function(e,t,r){var i="",n=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var l="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(i+=" var validate = ",n&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var h=e.level,c=e.dataLevel,u=e.schema["false schema"],d=e.schemaPath+e.util.getProperty("false schema"),f=e.errSchemaPath+"/false schema",p=!e.opts.allErrors,m="data"+(c||""),g="valid"+h;if(!1===e.schema){e.isTop?p=!0:i+=" var "+g+" = false; ",(X=X||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ";var _=i;i=X.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?i+=n?" return data; ":" validate.errors = null; return true; ":i+=" var "+g+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var v=e.isTop;h=e.level=0,c=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var y="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{h=e.level,m="data"+((c=e.dataLevel)||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),n&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+h+" = errors;"}g="valid"+h,p=!e.opts.allErrors;var E="",b="",T=e.schema.type,w=Array.isArray(T);if(T&&e.opts.nullable&&!0===e.schema.nullable&&(w?-1==T.indexOf("null")&&(T=T.concat("null")):"null"!=T&&(T=[T,"null"],w=!0)),w&&1==T.length&&(T=T[0],w=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),T){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,T);var O=e.RULES.types[T];if(S||w||!0===O||O&&!Z(O)){d=e.schemaPath+".type",f=e.errSchemaPath+"/type",d=e.schemaPath+".type",f=e.errSchemaPath+"/type";var A=w?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[A](T,m,e.opts.strictNumbers,!0)+") { ",S){var C="dataType"+h,I="coerced"+h;i+=" var "+C+" = typeof "+m+"; var "+I+" = undefined; ","array"==e.opts.coerceTypes&&(i+=" if ("+C+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+C+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+I+" = "+m+"; } "),i+=" if ("+I+" !== undefined) ; ";var P=S;if(P)for(var x,N=-1,R=P.length-1;N<R;)"string"==(x=P[N+=1])?i+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+I+" = '' + "+m+"; else if ("+m+" === null) "+I+" = ''; ":"number"==x||"integer"==x?(i+=" else if ("+C+" == 'boolean' || "+m+" === null || ("+C+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==x&&(i+=" && !("+m+" % 1)"),i+=")) "+I+" = +"+m+"; "):"boolean"==x?i+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+I+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+I+" = true; ":"null"==x?i+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+I+" = null; ":"array"==e.opts.coerceTypes&&"array"==x&&(i+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+m+" == null) "+I+" = ["+m+"]; ");i+=" else {   ",(X=X||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",i+=w?""+T.join(","):""+T,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=w?""+T.join(","):""+T,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ";_=i;i=X.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+I+" !== undefined) {  ";var k=c?"data"+(c-1||""):"parentData";i+=" "+m+" = "+I+"; ",c||(i+="if ("+k+" !== undefined)"),i+=" "+k+"["+(c?e.dataPathArr[c]:"parentDataProperty")+"] = "+I+"; } "}else{(X=X||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",i+=w?""+T.join(","):""+T,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=w?""+T.join(","):""+T,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ";_=i;i=X.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!o)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(i+=" } if (errors === ",i+=v?"0":"errs_"+h,i+=") { ",b+="}");else{var L=e.RULES;if(L)for(var D=-1,F=L.length-1;D<F;)if(Z(O=L[D+=1])){if(O.type&&(i+=" if ("+e.util.checkDataType(O.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==O.type&&e.schema.properties){u=e.schema.properties;var M=Object.keys(u);if(M)for(var U,j=-1,B=M.length-1;j<B;){if(void 0!==(G=u[U=M[j+=1]]).default){var H=m+e.util.getProperty(U);if(e.compositeRule){if(e.opts.strictDefaults){y="default is ignored for: "+H;if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}}else i+=" if ("+H+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+H+" === null || "+H+" === '' "),i+=" ) "+H+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(G.default)+" ":i+=" "+JSON.stringify(G.default)+" ",i+="; "}}}else if("array"==O.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){N=-1;for(var G,$=z.length-1;N<$;)if(void 0!==(G=z[N+=1]).default){H=m+"["+N+"]";if(e.compositeRule){if(e.opts.strictDefaults){y="default is ignored for: "+H;if("log"!==e.opts.strictDefaults)throw new Error(y);e.logger.warn(y)}}else i+=" if ("+H+" === undefined ","empty"==e.opts.useDefaults&&(i+=" || "+H+" === null || "+H+" === '' "),i+=" ) "+H+" = ","shared"==e.opts.useDefaults?i+=" "+e.useDefault(G.default)+" ":i+=" "+JSON.stringify(G.default)+" ",i+="; "}}}var Y=O.rules;if(Y)for(var W,V=-1,q=Y.length-1;V<q;)if(J(W=Y[V+=1])){var K=W.code(e,W.keyword,O.type);K&&(i+=" "+K+" ",p&&(E+="}"))}if(p&&(i+=" "+E+" ",E=""),O.type&&(i+=" } ",T&&T===O.type&&!S)){i+=" else { ";var X;d=e.schemaPath+".type",f=e.errSchemaPath+"/type";(X=X||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { type: '",i+=w?""+T.join(","):""+T,i+="' } ",!1!==e.opts.messages&&(i+=" , message: 'should be ",i+=w?""+T.join(","):""+T,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),i+=" } "):i+=" {} ";_=i;i=X.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}p&&(i+=" if (errors === ",i+=v?"0":"errs_"+h,i+=") { ",b+="}")}}function Z(e){for(var t=e.rules,r=0;r<t.length;r++)if(J(t[r]))return!0}function J(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,i=0;i<r.length;i++)if(void 0!==e.schema[r[i]])return!0}(t)}return p&&(i+=" "+b+" "),v?(n?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+g+" = errors === errs_"+h+";",i},oi=Or.ucs2length,ai=ei.Validation,si=function e(t,r,i,n){var o=this,a=this._opts,s=[void 0],l={},h=[],c={},u=[],d={},f=[];r=r||{schema:t,refVal:s,refs:l};var p=function(e,t,r){var i=li.call(this,e,t,r);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:r},{index:i,compiling:!1})}.call(this,t,r,n);var m=this._compilations[p.index];if(p.compiling)return m.callValidate=function e(){var t=m.validate;var r=t.apply(this,arguments);e.errors=t.errors;return r};var g=this._formats;var _=this.RULES;try{var v=E(t,r,i,n);m.validate=v;var y=m.callValidate;return y&&(y.schema=v.schema,y.errors=null,y.refs=v.refs,y.refVal=v.refVal,y.root=v.root,y.$async=v.$async,a.sourceCode&&(y.source=v.source)),v}finally{(function(e,t,r){var i=li.call(this,e,t,r);i>=0&&this._compilations.splice(i,1)}).call(this,t,r,n)}function E(t,i,n,c){var d=!i||i&&i.schema==t;if(i.schema!=r.schema)return e.call(o,t,i,n,c);var p,m=!0===t.$async,v=ni({isTop:!0,schema:t,isRoot:d,baseId:c,root:i,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:ei.MissingRef,RULES:_,validate:ni,util:Or,resolve:zr,resolveRef:b,usePattern:S,useDefault:O,useCustomRule:A,opts:a,formats:g,logger:o.logger,self:o});v=fi(s,ui)+fi(h,hi)+fi(u,ci)+fi(f,di)+v,a.processCode&&(v=a.processCode(v,t));try{var y=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",v);p=y(o,_,g,r,s,u,f,Sr,oi,ai),s[0]=p}catch(e){throw o.logger.error("Error compiling schema, function code:",v),e}return p.schema=t,p.errors=null,p.refs=l,p.refVal=s,p.root=d?p:i,m&&(p.$async=!0),!0===a.sourceCode&&(p.source={code:v,patterns:h,defaults:u}),p}function b(t,n,h){n=zr.url(t,n);var c,u,d=l[n];if(void 0!==d)return w(c=s[d],u="refVal["+d+"]");if(!h&&r.refs){var f=r.refs[n];if(void 0!==f)return c=r.refVal[f],u=T(n,c),w(c,u)}u=T(n);var p=zr.call(o,E,r,n);if(void 0===p){var m=i&&i[n];m&&(p=zr.inlineRef(m,a.inlineRefs)?m:e.call(o,m,r,i,t))}if(void 0!==p)return function(e,t){var r=l[e];s[r]=t}(n,p),w(p,u);!function(e){delete l[e]}(n)}function T(e,t){var r=s.length;return s[r]=t,l[e]=r,"refVal"+r}function w(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function S(e){var t=c[e];return void 0===t&&(t=c[e]=h.length,h[t]=e),"pattern"+t}function O(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return Or.toQuotedString(e);case"object":if(null===e)return"null";var t=ii(e),r=d[t];return void 0===r&&(r=d[t]=u.length,u[r]=e),"default"+r}}function A(e,t,r,i){if(!1!==o._opts.validateSchema){var n=e.definition.dependencies;if(n&&!n.every(function(e){return Object.prototype.hasOwnProperty.call(r,e)}))throw new Error("parent schema must have all required keywords: "+n.join(","));var s=e.definition.validateSchema;if(s){var l=s(t);if(!l){var h="keyword schema is invalid: "+o.errorsText(s.errors);if("log"!=o._opts.validateSchema)throw new Error(h);o.logger.error(h)}}}var c,u=e.definition.compile,d=e.definition.inline,p=e.definition.macro;if(u)c=u.call(o,t,r,i);else if(p)c=p.call(o,t,r,i),!1!==a.validateSchema&&o.validateSchema(c,!0);else if(d)c=d.call(o,i,e.keyword,t,r);else if(!(c=e.definition.validate))return;if(void 0===c)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var m=f.length;return f[m]=c,{code:"customRule"+m,validate:c}}};function li(e,t,r){for(var i=0;i<this._compilations.length;i++){var n=this._compilations[i];if(n.schema==e&&n.root==t&&n.baseId==r)return i}return-1}function hi(e,t){return"var pattern"+e+" = new RegExp("+Or.toQuotedString(t[e])+");"}function ci(e){return"var default"+e+" = defaults["+e+"];"}function ui(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function di(e){return"var customRule"+e+" = customRules["+e+"];"}function fi(e,t){if(!e.length)return"";for(var r="",i=0;i<e.length;i++)r+=t(i,e);return r}var pi={},mi=pi=function(){this._cache={}};mi.prototype.put=function(e,t){this._cache[e]=t},mi.prototype.get=function(e){return this._cache[e]},mi.prototype.del=function(e){delete this._cache[e]},mi.prototype.clear=function(){this._cache={}};var gi=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,_i=[0,31,28,31,30,31,30,31,31,30,31,30,31],vi=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,yi=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Ei=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,bi=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Ti=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,wi=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Si=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Oi=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Ai=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Ci=Ii;function Ii(e){return e="full"==e?"full":"fast",Or.copy(Ii[e])}function Pi(e){var t=e.match(gi);if(!t)return!1;var r=+t[1],i=+t[2],n=+t[3];return i>=1&&i<=12&&n>=1&&n<=(2==i&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:_i[i])}function xi(e,t){var r=e.match(vi);if(!r)return!1;var i=r[1],n=r[2],o=r[3],a=r[5];return(i<=23&&n<=59&&o<=59||23==i&&59==n&&60==o)&&(!t||a)}Ii.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":bi,url:Ti,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:yi,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Li,uuid:wi,"json-pointer":Si,"json-pointer-uri-fragment":Oi,"relative-json-pointer":Ai},Ii.full={date:Pi,time:xi,"date-time":function(e){var t=e.split(Ni);return 2==t.length&&Pi(t[0])&&xi(t[1],!0)},uri:function(e){return Ri.test(e)&&Ei.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":bi,url:Ti,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:yi,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Li,uuid:wi,"json-pointer":Si,"json-pointer-uri-fragment":Oi,"relative-json-pointer":Ai};var Ni=/t|\s/i;var Ri=/\/|:/;var ki=/[^\\]\\Z/;function Li(e){if(ki.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}var Di=function(e,t,r){var i,n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(a||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",i="schema"+o):i=s;var f="maximum"==t,p=f?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[p],g=e.opts.$data&&m&&m.$data,_=f?"<":">",v=f?">":"<",y=void 0;if(!d&&"number"!=typeof s&&void 0!==s)throw new Error(t+" must be number");if(!g&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(p+" must be number or boolean");if(g){var E=e.util.getData(m.$data,a,e.dataPathArr),b="exclusive"+o,T="exclType"+o,w="exclIsNumber"+o,S="' + "+(C="op"+o)+" + '";n+=" var schemaExcl"+o+" = "+E+"; ",n+=" var "+b+"; var "+T+" = typeof "+(E="schemaExcl"+o)+"; if ("+T+" != 'boolean' && "+T+" != 'undefined' && "+T+" != 'number') { ";var O;y=p;(O=O||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var A=n;n=O.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",d&&(n+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),n+=" "+T+" == 'number' ? ( ("+b+" = "+i+" === undefined || "+E+" "+_+"= "+i+") ? "+u+" "+v+"= "+E+" : "+u+" "+v+" "+i+" ) : ( ("+b+" = "+E+" === true) ? "+u+" "+v+"= "+i+" : "+u+" "+v+" "+i+" ) || "+u+" !== "+u+") { var op"+o+" = "+b+" ? '"+_+"' : '"+_+"='; ",void 0===s&&(y=p,h=e.errSchemaPath+"/"+p,i=E,d=g)}else{S=_;if((w="number"==typeof m)&&d){var C="'"+S+"'";n+=" if ( ",d&&(n+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),n+=" ( "+i+" === undefined || "+m+" "+_+"= "+i+" ? "+u+" "+v+"= "+m+" : "+u+" "+v+" "+i+" ) || "+u+" !== "+u+") { "}else{w&&void 0===s?(b=!0,y=p,h=e.errSchemaPath+"/"+p,i=m,v+="="):(w&&(i=Math[f?"min":"max"](m,s)),m===(!w||i)?(b=!0,y=p,h=e.errSchemaPath+"/"+p,v+="="):(b=!1,S+="="));C="'"+S+"'";n+=" if ( ",d&&(n+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),n+=" "+u+" "+v+" "+i+" || "+u+" !== "+u+") { "}}y=y||t,(O=O||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(y||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { comparison: "+C+", limit: "+i+", exclusive: "+b+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be "+S+" ",n+=d?"' + "+i:i+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";A=n;return n=O.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { "),n},Fi=function(e,t,r){var i,n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(a||""),d=e.opts.$data&&s&&s.$data;if(d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",i="schema"+o):i=s,!d&&"number"!=typeof s)throw new Error(t+" must be number");n+="if ( ",d&&(n+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),n+=" "+u+".length "+("maxItems"==t?">":"<")+" "+i+") { ";var f=t,p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(f||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxItems"==t?"more":"fewer",n+=" than ",n+=d?"' + "+i+" + '":""+s,n+=" items' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",c&&(n+=" else { "),n},Mi=function(e,t,r){var i,n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(a||""),d=e.opts.$data&&s&&s.$data;if(d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",i="schema"+o):i=s,!d&&"number"!=typeof s)throw new Error(t+" must be number");var f="maxLength"==t?">":"<";n+="if ( ",d&&(n+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),!1===e.opts.unicode?n+=" "+u+".length ":n+=" ucs2length("+u+") ",n+=" "+f+" "+i+") { ";var p=t,m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be ",n+="maxLength"==t?"longer":"shorter",n+=" than ",n+=d?"' + "+i+" + '":""+s,n+=" characters' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",c&&(n+=" else { "),n},Ui=function(e,t,r){var i,n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(a||""),d=e.opts.$data&&s&&s.$data;if(d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",i="schema"+o):i=s,!d&&"number"!=typeof s)throw new Error(t+" must be number");n+="if ( ",d&&(n+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),n+=" Object.keys("+u+").length "+("maxProperties"==t?">":"<")+" "+i+") { ";var f=t,p=p||[];p.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(f||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { limit: "+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxProperties"==t?"more":"fewer",n+=" than ",n+=d?"' + "+i+" + '":""+s,n+=" properties' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var m=n;return n=p.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",c&&(n+=" else { "),n},ji={$ref:function(e,t,r){var i,n,o=" ",a=e.level,s=e.dataLevel,l=e.schema[t],h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+a;if("#"==l||"#/"==l)e.isRoot?(i=e.async,n="validate"):(i=!0===e.root.schema.$async,n="root.refVal[0]");else{var f=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===f){var p=e.MissingRefError.message(e.baseId,l);if("fail"==e.opts.missingRefs){e.logger.error(p),(v=v||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { ref: '"+e.util.escapeQuotes(l)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(l)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(l)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var m=o;o=v.pop(),!e.compositeRule&&c?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,p);e.logger.warn(p),c&&(o+=" if (true) { ")}}else if(f.inline){var g=e.util.copy(e);g.level++;var _="valid"+g.level;g.schema=f.schema,g.schemaPath="",g.errSchemaPath=l,o+=" "+e.validate(g).replace(/validate\.schema/g,f.code)+" ",c&&(o+=" if ("+_+") { ")}else i=!0===f.$async||e.async&&!1!==f.$async,n=f.code}if(n){var v;(v=v||[]).push(o),o="",e.opts.passContext?o+=" "+n+".call(this, ":o+=" "+n+"( ",o+=" "+u+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var y=o+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(o=v.pop(),i){if(!e.async)throw new Error("async schema referenced by sync schema");c&&(o+=" var "+d+"; "),o+=" try { await "+y+"; ",c&&(o+=" "+d+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(o+=" "+d+" = false; "),o+=" } ",c&&(o+=" if ("+d+") { ")}else o+=" if (!"+y+") { if (vErrors === null) vErrors = "+n+".errors; else vErrors = vErrors.concat("+n+".errors); errors = vErrors.length; } ",c&&(o+=" else { ")}return o},allOf:function(e,t,r){var i=" ",n=e.schema[t],o=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,l=e.util.copy(e),h="";l.level++;var c="valid"+l.level,u=l.baseId,d=!0,f=n;if(f)for(var p,m=-1,g=f.length-1;m<g;)p=f[m+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0||!1===p:e.util.schemaHasRules(p,e.RULES.all))&&(d=!1,l.schema=p,l.schemaPath=o+"["+m+"]",l.errSchemaPath=a+"/"+m,i+="  "+e.validate(l)+" ",l.baseId=u,s&&(i+=" if ("+c+") { ",h+="}"));return s&&(i+=d?" if (true) { ":" "+h.slice(0,-1)+" "),i},anyOf:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="valid"+n,d="errs__"+n,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level;if(a.every(function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)})){var g=f.baseId;i+=" var "+d+" = errors; var "+u+" = false;  ";var _=e.compositeRule;e.compositeRule=f.compositeRule=!0;var v=a;if(v)for(var y,E=-1,b=v.length-1;E<b;)y=v[E+=1],f.schema=y,f.schemaPath=s+"["+E+"]",f.errSchemaPath=l+"/"+E,i+="  "+e.validate(f)+" ",f.baseId=g,i+=" "+u+" = "+u+" || "+m+"; if (!"+u+") { ",p+="}";e.compositeRule=f.compositeRule=_,i+=" "+p+" if (!"+u+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else h&&(i+=" if (true) { ");return i},$comment:function(e,t,r){var i=" ",n=e.schema[t],o=e.errSchemaPath+"/"+t,a=(e.opts.allErrors,e.util.toQuotedString(n));return!0===e.opts.$comment?i+=" console.log("+a+");":"function"==typeof e.opts.$comment&&(i+=" self._opts.$comment("+a+", "+e.util.toQuotedString(o)+", validate.root.schema);"),i},const:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="valid"+n,d=e.opts.$data&&a&&a.$data;d&&(i+=" var schema"+n+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; "),d||(i+=" var schema"+n+" = validate.schema"+s+";"),i+="var "+u+" = equal("+c+", schema"+n+"); if (!"+u+") {   ";var f=f||[];f.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValue: schema"+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var p=i;return i=f.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",h&&(i+=" else { "),i},contains:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="valid"+n,d="errs__"+n,f=e.util.copy(e);f.level++;var p="valid"+f.level,m="i"+n,g=f.dataLevel=e.dataLevel+1,_="data"+g,v=e.baseId,y=e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all);if(i+="var "+d+" = errors;var "+u+";",y){var E=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=a,f.schemaPath=s,f.errSchemaPath=l,i+=" var "+p+" = false; for (var "+m+" = 0; "+m+" < "+c+".length; "+m+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var b=c+"["+m+"]";f.dataPathArr[g]=m;var T=e.validate(f);f.baseId=v,e.util.varOccurences(T,_)<2?i+=" "+e.util.varReplace(T,_,b)+" ":i+=" var "+_+" = "+b+"; "+T+" ",i+=" if ("+p+") break; }  ",e.compositeRule=f.compositeRule=E,i+="  if (!"+p+") {"}else i+=" if ("+c+".length == 0) {";var w=w||[];w.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var S=i;return i=w.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",y&&(i+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i},dependencies:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="errs__"+n,d=e.util.copy(e),f="";d.level++;var p="valid"+d.level,m={},g={},_=e.opts.ownProperties;for(b in a)if("__proto__"!=b){var v=a[b],y=Array.isArray(v)?g:m;y[b]=v}i+="var "+u+" = errors;";var E=e.errorPath;for(var b in i+="var missing"+n+";",g)if((y=g[b]).length){if(i+=" if ( "+c+e.util.getProperty(b)+" !== undefined ",_&&(i+=" && Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(b)+"') "),h){i+=" && ( ";var T=y;if(T)for(var w=-1,S=T.length-1;w<S;)x=T[w+=1],w&&(i+=" || "),i+=" ( ( "+(L=c+(k=e.util.getProperty(x)))+" === undefined ",_&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(x)+"') "),i+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?x:k)+") ) ";i+=")) {  ";var O="missing"+n,A="' + "+O+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(E,O,!0):E+" + "+O);var C=C||[];C.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(b)+"', missingProperty: '"+A+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==y.length?i+="property "+e.util.escapeQuotes(y[0]):i+="properties "+e.util.escapeQuotes(y.join(", ")),i+=" when property "+e.util.escapeQuotes(b)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var I=i;i=C.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+I+"]); ":i+=" validate.errors = ["+I+"]; return false; ":i+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var P=y;if(P)for(var x,N=-1,R=P.length-1;N<R;){x=P[N+=1];var k=e.util.getProperty(x),L=(A=e.util.escapeQuotes(x),c+k);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(E,x,e.opts.jsonPointers)),i+=" if ( "+L+" === undefined ",_&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(x)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { property: '"+e.util.escapeQuotes(b)+"', missingProperty: '"+A+"', depsCount: "+y.length+", deps: '"+e.util.escapeQuotes(1==y.length?y[0]:y.join(", "))+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should have ",1==y.length?i+="property "+e.util.escapeQuotes(y[0]):i+="properties "+e.util.escapeQuotes(y.join(", ")),i+=" when property "+e.util.escapeQuotes(b)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",h&&(f+="}",i+=" else { ")}e.errorPath=E;var D=d.baseId;for(var b in m)v=m[b],(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(i+=" "+p+" = true; if ( "+c+e.util.getProperty(b)+" !== undefined ",_&&(i+=" && Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(b)+"') "),i+=") { ",d.schema=v,d.schemaPath=s+e.util.getProperty(b),d.errSchemaPath=l+"/"+e.util.escapeFragment(b),i+="  "+e.validate(d)+" ",d.baseId=D,i+=" }  ",h&&(i+=" if ("+p+") { ",f+="}"));return h&&(i+="   "+f+" if ("+u+" == errors) {"),i},enum:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="valid"+n,d=e.opts.$data&&a&&a.$data;d&&(i+=" var schema"+n+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var f="i"+n,p="schema"+n;d||(i+=" var "+p+" = validate.schema"+s+";"),i+="var "+u+";",d&&(i+=" if (schema"+n+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+n+")) "+u+" = false; else {"),i+=u+" = false;for (var "+f+"=0; "+f+"<"+p+".length; "+f+"++) if (equal("+c+", "+p+"["+f+"])) { "+u+" = true; break; }",d&&(i+="  }  "),i+=" if (!"+u+") {   ";var m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { allowedValues: schema"+n+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var g=i;return i=m.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",h&&(i+=" else { "),i},format:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||"");if(!1===e.opts.format)return h&&(i+=" if (true) { "),i;var u,d=e.opts.$data&&a&&a.$data;d?(i+=" var schema"+n+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",u="schema"+n):u=a;var f=e.opts.unknownFormats,p=Array.isArray(f);if(d)i+=" var "+(m="format"+n)+" = formats["+u+"]; var "+(g="isObject"+n)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(_="formatType"+n)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(i+=" var async"+n+" = "+m+".async; "),i+=" "+m+" = "+m+".validate; } if (  ",d&&(i+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),i+=" (","ignore"!=f&&(i+=" ("+u+" && !"+m+" ",p&&(i+=" && self._opts.unknownFormats.indexOf("+u+") == -1 "),i+=") || "),i+=" ("+m+" && "+_+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?i+=" (async"+n+" ? await "+m+"("+c+") : "+m+"("+c+")) ":i+=" "+m+"("+c+") ",i+=" : "+m+".test("+c+"))))) {";else{var m;if(!(m=e.formats[a])){if("ignore"==f)return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),h&&(i+=" if (true) { "),i;if(p&&f.indexOf(a)>=0)return h&&(i+=" if (true) { "),i;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,_=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(_!=r)return h&&(i+=" if (true) { "),i;if(v){if(!e.async)throw new Error("async format in sync schema");i+=" if (!(await "+(y="formats"+e.util.getProperty(a)+".validate")+"("+c+"))) { "}else{i+=" if (! ";var y="formats"+e.util.getProperty(a);g&&(y+=".validate"),i+="function"==typeof m?" "+y+"("+c+") ":" "+y+".test("+c+") ",i+=") { "}}var E=E||[];E.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { format:  ",i+=d?""+u:""+e.util.toQuotedString(a),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match format \"",i+=d?"' + "+u+" + '":""+e.util.escapeQuotes(a),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+s:""+e.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var b=i;return i=E.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+b+"]); ":i+=" validate.errors = ["+b+"]; return false; ":i+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",h&&(i+=" else { "),i},if:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="valid"+n,d="errs__"+n,f=e.util.copy(e);f.level++;var p="valid"+f.level,m=e.schema.then,g=e.schema.else,_=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),v=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),y=f.baseId;if(_||v){var E;f.createErrors=!1,f.schema=a,f.schemaPath=s,f.errSchemaPath=l,i+=" var "+d+" = errors; var "+u+" = true;  ";var b=e.compositeRule;e.compositeRule=f.compositeRule=!0,i+="  "+e.validate(f)+" ",f.baseId=y,f.createErrors=!0,i+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=f.compositeRule=b,_?(i+=" if ("+p+") {  ",f.schema=e.schema.then,f.schemaPath=e.schemaPath+".then",f.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(f)+" ",f.baseId=y,i+=" "+u+" = "+p+"; ",_&&v?i+=" var "+(E="ifClause"+n)+" = 'then'; ":E="'then'",i+=" } ",v&&(i+=" else { ")):i+=" if (!"+p+") { ",v&&(f.schema=e.schema.else,f.schemaPath=e.schemaPath+".else",f.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(f)+" ",f.baseId=y,i+=" "+u+" = "+p+"; ",_&&v?i+=" var "+(E="ifClause"+n)+" = 'else'; ":E="'else'",i+=" } "),i+=" if (!"+u+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { failingKeyword: "+E+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match \"' + "+E+" + '\" schema' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",h&&(i+=" else { ")}else h&&(i+=" if (true) { ");return i},items:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="valid"+n,d="errs__"+n,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level,g="i"+n,_=f.dataLevel=e.dataLevel+1,v="data"+_,y=e.baseId;if(i+="var "+d+" = errors;var "+u+";",Array.isArray(a)){var E=e.schema.additionalItems;if(!1===E){i+=" "+u+" = "+c+".length <= "+a.length+"; ";var b=l;l=e.errSchemaPath+"/additionalItems",i+="  if (!"+u+") {   ";var T=T||[];T.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var w=i;i=T.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+w+"]); ":i+=" validate.errors = ["+w+"]; return false; ":i+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l=b,h&&(p+="}",i+=" else { ")}var S=a;if(S)for(var O,A=-1,C=S.length-1;A<C;)if(O=S[A+=1],e.opts.strictKeywords?"object"==typeof O&&Object.keys(O).length>0||!1===O:e.util.schemaHasRules(O,e.RULES.all)){i+=" "+m+" = true; if ("+c+".length > "+A+") { ";var I=c+"["+A+"]";f.schema=O,f.schemaPath=s+"["+A+"]",f.errSchemaPath=l+"/"+A,f.errorPath=e.util.getPathExpr(e.errorPath,A,e.opts.jsonPointers,!0),f.dataPathArr[_]=A;var P=e.validate(f);f.baseId=y,e.util.varOccurences(P,v)<2?i+=" "+e.util.varReplace(P,v,I)+" ":i+=" var "+v+" = "+I+"; "+P+" ",i+=" }  ",h&&(i+=" if ("+m+") { ",p+="}")}"object"==typeof E&&(e.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0||!1===E:e.util.schemaHasRules(E,e.RULES.all))&&(f.schema=E,f.schemaPath=e.schemaPath+".additionalItems",f.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+m+" = true; if ("+c+".length > "+a.length+") {  for (var "+g+" = "+a.length+"; "+g+" < "+c+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),I=c+"["+g+"]",f.dataPathArr[_]=g,P=e.validate(f),f.baseId=y,e.util.varOccurences(P,v)<2?i+=" "+e.util.varReplace(P,v,I)+" ":i+=" var "+v+" = "+I+"; "+P+" ",h&&(i+=" if (!"+m+") break; "),i+=" } }  ",h&&(i+=" if ("+m+") { ",p+="}"))}else(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all))&&(f.schema=a,f.schemaPath=s,f.errSchemaPath=l,i+="  for (var "+g+" = 0; "+g+" < "+c+".length; "+g+"++) { ",f.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0),I=c+"["+g+"]",f.dataPathArr[_]=g,P=e.validate(f),f.baseId=y,e.util.varOccurences(P,v)<2?i+=" "+e.util.varReplace(P,v,I)+" ":i+=" var "+v+" = "+I+"; "+P+" ",h&&(i+=" if (!"+m+") break; "),i+=" }");return h&&(i+=" "+p+" if ("+d+" == errors) {"),i},maximum:Di,minimum:Di,maxItems:Fi,minItems:Fi,maxLength:Mi,minLength:Mi,maxProperties:Ui,minProperties:Ui,multipleOf:function(e,t,r){var i,n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(a||""),d=e.opts.$data&&s&&s.$data;if(d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",i="schema"+o):i=s,!d&&"number"!=typeof s)throw new Error(t+" must be number");n+="var division"+o+";if (",d&&(n+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),n+=" (division"+o+" = "+u+" / "+i+", ",e.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":n+=" division"+o+" !== parseInt(division"+o+") ",n+=" ) ",d&&(n+="  )  "),n+=" ) {   ";var f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { multipleOf: "+i+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be multiple of ",n+=d?"' + "+i:i+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",c&&(n+=" else { "),n},not:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="errs__"+n,d=e.util.copy(e);d.level++;var f="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){d.schema=a,d.schemaPath=s,d.errSchemaPath=l,i+=" var "+u+" = errors;  ";var p,m=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(p=d.opts.allErrors,d.opts.allErrors=!1),i+=" "+e.validate(d)+" ",d.createErrors=!0,p&&(d.opts.allErrors=p),e.compositeRule=d.compositeRule=m,i+=" if ("+f+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var _=i;i=g.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",h&&(i+=" if (false) { ");return i},oneOf:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="valid"+n,d="errs__"+n,f=e.util.copy(e),p="";f.level++;var m="valid"+f.level,g=f.baseId,_="prevValid"+n,v="passingSchemas"+n;i+="var "+d+" = errors , "+_+" = false , "+u+" = false , "+v+" = null; ";var y=e.compositeRule;e.compositeRule=f.compositeRule=!0;var E=a;if(E)for(var b,T=-1,w=E.length-1;T<w;)b=E[T+=1],(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))?(f.schema=b,f.schemaPath=s+"["+T+"]",f.errSchemaPath=l+"/"+T,i+="  "+e.validate(f)+" ",f.baseId=g):i+=" var "+m+" = true; ",T&&(i+=" if ("+m+" && "+_+") { "+u+" = false; "+v+" = ["+v+", "+T+"]; } else { ",p+="}"),i+=" if ("+m+") { "+u+" = "+_+" = true; "+v+" = "+T+"; }";return e.compositeRule=f.compositeRule=y,i+=p+"if (!"+u+") {   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i},pattern:function(e,t,r){var i,n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(a||""),d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",i="schema"+o):i=s,n+="if ( ",d&&(n+=" ("+i+" !== undefined && typeof "+i+" != 'string') || "),n+=" !"+(d?"(new RegExp("+i+"))":e.usePattern(s))+".test("+u+") ) {   ";var f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { pattern:  ",n+=d?""+i:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match pattern \"",n+=d?"' + "+i+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+l:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var p=n;return n=f.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+p+"]); ":n+=" validate.errors = ["+p+"]; return false; ":n+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",c&&(n+=" else { "),n},properties:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="errs__"+n,d=e.util.copy(e),f="";d.level++;var p="valid"+d.level,m="key"+n,g="idx"+n,_=d.dataLevel=e.dataLevel+1,v="data"+_,y="dataProperties"+n,E=Object.keys(a||{}).filter(k),b=e.schema.patternProperties||{},T=Object.keys(b).filter(k),w=e.schema.additionalProperties,S=E.length||T.length,O=!1===w,A="object"==typeof w&&Object.keys(w).length,C=e.opts.removeAdditional,I=O||A||C,P=e.opts.ownProperties,x=e.baseId,N=e.schema.required;if(N&&(!e.opts.$data||!N.$data)&&N.length<e.opts.loopRequired)var R=e.util.toHash(N);function k(e){return"__proto__"!==e}if(i+="var "+u+" = errors;var "+p+" = true;",P&&(i+=" var "+y+" = undefined;"),I){if(i+=P?" "+y+" = "+y+" || Object.keys("+c+"); for (var "+g+"=0; "+g+"<"+y+".length; "+g+"++) { var "+m+" = "+y+"["+g+"]; ":" for (var "+m+" in "+c+") { ",S){if(i+=" var isAdditional"+n+" = !(false ",E.length)if(E.length>8)i+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var L=E;if(L)for(var D=-1,F=L.length-1;D<F;)K=L[D+=1],i+=" || "+m+" == "+e.util.toQuotedString(K)+" "}if(T.length){var M=T;if(M)for(var U=-1,j=M.length-1;U<j;)oe=M[U+=1],i+=" || "+e.usePattern(oe)+".test("+m+") "}i+=" ); if (isAdditional"+n+") { "}if("all"==C)i+=" delete "+c+"["+m+"]; ";else{var B=e.errorPath,H="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),O)if(C)i+=" delete "+c+"["+m+"]; ";else{i+=" "+p+" = false; ";var z=l;l=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { additionalProperty: '"+H+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var G=i;i=re.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+G+"]); ":i+=" validate.errors = ["+G+"]; return false; ":i+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,h&&(i+=" break; ")}else if(A)if("failing"==C){i+=" var "+u+" = errors;  ";var $=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=w,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var Y=c+"["+m+"]";d.dataPathArr[_]=m;var W=e.validate(d);d.baseId=x,e.util.varOccurences(W,v)<2?i+=" "+e.util.varReplace(W,v,Y)+" ":i+=" var "+v+" = "+Y+"; "+W+" ",i+=" if (!"+p+") { errors = "+u+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+c+"["+m+"]; }  ",e.compositeRule=d.compositeRule=$}else d.schema=w,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers),Y=c+"["+m+"]",d.dataPathArr[_]=m,W=e.validate(d),d.baseId=x,e.util.varOccurences(W,v)<2?i+=" "+e.util.varReplace(W,v,Y)+" ":i+=" var "+v+" = "+Y+"; "+W+" ",h&&(i+=" if (!"+p+") break; ");e.errorPath=B}S&&(i+=" } "),i+=" }  ",h&&(i+=" if ("+p+") { ",f+="}")}var V=e.opts.useDefaults&&!e.compositeRule;if(E.length){var q=E;if(q)for(var K,X=-1,Z=q.length-1;X<Z;){var J=a[K=q[X+=1]];if(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:e.util.schemaHasRules(J,e.RULES.all)){var Q=e.util.getProperty(K),ee=(Y=c+Q,V&&void 0!==J.default);if(d.schema=J,d.schemaPath=s+Q,d.errSchemaPath=l+"/"+e.util.escapeFragment(K),d.errorPath=e.util.getPath(e.errorPath,K,e.opts.jsonPointers),d.dataPathArr[_]=e.util.toQuotedString(K),W=e.validate(d),d.baseId=x,e.util.varOccurences(W,v)<2){W=e.util.varReplace(W,v,Y);var te=Y}else te=v,i+=" var "+v+" = "+Y+"; ";if(ee)i+=" "+W+" ";else{if(R&&R[K]){i+=" if ( "+te+" === undefined ",P&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(K)+"') "),i+=") { "+p+" = false; ",B=e.errorPath,z=l;var re,ie=e.util.escapeQuotes(K);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,K,e.opts.jsonPointers)),l=e.errSchemaPath+"/required",(re=re||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+ie+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+ie+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",G=i,i=re.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+G+"]); ":i+=" validate.errors = ["+G+"]; return false; ":i+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=z,e.errorPath=B,i+=" } else { "}else h?(i+=" if ( "+te+" === undefined ",P&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(K)+"') "),i+=") { "+p+" = true; } else { "):(i+=" if ("+te+" !== undefined ",P&&(i+=" &&   Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(K)+"') "),i+=" ) { ");i+=" "+W+" } "}}h&&(i+=" if ("+p+") { ",f+="}")}}if(T.length){var ne=T;if(ne)for(var oe,ae=-1,se=ne.length-1;ae<se;)J=b[oe=ne[ae+=1]],(e.opts.strictKeywords?"object"==typeof J&&Object.keys(J).length>0||!1===J:e.util.schemaHasRules(J,e.RULES.all))&&(d.schema=J,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),i+=P?" "+y+" = "+y+" || Object.keys("+c+"); for (var "+g+"=0; "+g+"<"+y+".length; "+g+"++) { var "+m+" = "+y+"["+g+"]; ":" for (var "+m+" in "+c+") { ",i+=" if ("+e.usePattern(oe)+".test("+m+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers),Y=c+"["+m+"]",d.dataPathArr[_]=m,W=e.validate(d),d.baseId=x,e.util.varOccurences(W,v)<2?i+=" "+e.util.varReplace(W,v,Y)+" ":i+=" var "+v+" = "+Y+"; "+W+" ",h&&(i+=" if (!"+p+") break; "),i+=" } ",h&&(i+=" else "+p+" = true; "),i+=" }  ",h&&(i+=" if ("+p+") { ",f+="}"))}return h&&(i+=" "+f+" if ("+u+" == errors) {"),i},propertyNames:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="errs__"+n,d=e.util.copy(e);d.level++;var f="valid"+d.level;if(i+="var "+u+" = errors;",e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0||!1===a:e.util.schemaHasRules(a,e.RULES.all)){d.schema=a,d.schemaPath=s,d.errSchemaPath=l;var p="key"+n,m="idx"+n,g="i"+n,_="' + "+p+" + '",v="data"+(d.dataLevel=e.dataLevel+1),y="dataProperties"+n,E=e.opts.ownProperties,b=e.baseId;E&&(i+=" var "+y+" = undefined; "),i+=E?" "+y+" = "+y+" || Object.keys("+c+"); for (var "+m+"=0; "+m+"<"+y+".length; "+m+"++) { var "+p+" = "+y+"["+m+"]; ":" for (var "+p+" in "+c+") { ",i+=" var startErrs"+n+" = errors; ";var T=p,w=e.compositeRule;e.compositeRule=d.compositeRule=!0;var S=e.validate(d);d.baseId=b,e.util.varOccurences(S,v)<2?i+=" "+e.util.varReplace(S,v,T)+" ":i+=" var "+v+" = "+T+"; "+S+" ",e.compositeRule=d.compositeRule=w,i+=" if (!"+f+") { for (var "+g+"=startErrs"+n+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { propertyName: '"+_+"' } ",!1!==e.opts.messages&&(i+=" , message: 'property name \\'"+_+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),h&&(i+=" break; "),i+=" } }"}return h&&(i+="  if ("+u+" == errors) {"),i},required:function(e,t,r){var i=" ",n=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,c="data"+(o||""),u="valid"+n,d=e.opts.$data&&a&&a.$data;d&&(i+=" var schema"+n+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var f="schema"+n;if(!d)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],m=a;if(m)for(var g,_=-1,v=m.length-1;_<v;){g=m[_+=1];var y=e.schema.properties[g];y&&(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))||(p[p.length]=g)}}else p=a;if(d||p.length){var E=e.errorPath,b=d||p.length>=e.opts.loopRequired,T=e.opts.ownProperties;if(h)if(i+=" var missing"+n+"; ",b){d||(i+=" var "+f+" = validate.schema"+s+"; ");var w="' + "+(P="schema"+n+"["+(C="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(E,P,e.opts.jsonPointers)),i+=" var "+u+" = true; ",d&&(i+=" if (schema"+n+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+n+")) "+u+" = false; else {"),i+=" for (var "+C+" = 0; "+C+" < "+f+".length; "+C+"++) { "+u+" = "+c+"["+f+"["+C+"]] !== undefined ",T&&(i+=" &&   Object.prototype.hasOwnProperty.call("+c+", "+f+"["+C+"]) "),i+="; if (!"+u+") break; } ",d&&(i+="  }  "),i+="  if (!"+u+") {   ",(O=O||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+w+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ";var S=i;i=O.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var O,A=p;if(A)for(var C=-1,I=A.length-1;C<I;)N=A[C+=1],C&&(i+=" || "),i+=" ( ( "+(D=c+(L=e.util.getProperty(N)))+" === undefined ",T&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(N)+"') "),i+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?N:L)+") ) ";i+=") {  ",w="' + "+(P="missing"+n)+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(E,P,!0):E+" + "+P),(O=O||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+w+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",S=i,i=O.pop(),!e.compositeRule&&h?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(b){var P;d||(i+=" var "+f+" = validate.schema"+s+"; "),w="' + "+(P="schema"+n+"["+(C="i"+n)+"]")+" + '",e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(E,P,e.opts.jsonPointers)),d&&(i+=" if ("+f+" && !Array.isArray("+f+")) {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+w+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+f+" !== undefined) { "),i+=" for (var "+C+" = 0; "+C+" < "+f+".length; "+C+"++) { if ("+c+"["+f+"["+C+"]] === undefined ",T&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", "+f+"["+C+"]) "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+w+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(i+="  }  ")}else{var x=p;if(x)for(var N,R=-1,k=x.length-1;R<k;){N=x[R+=1];var L=e.util.getProperty(N),D=(w=e.util.escapeQuotes(N),c+L);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(E,N,e.opts.jsonPointers)),i+=" if ( "+D+" === undefined ",T&&(i+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(N)+"') "),i+=") {  var err =   ",!1!==e.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { missingProperty: '"+w+"' } ",!1!==e.opts.messages&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+w+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=E}else h&&(i+=" if (true) {");return i},uniqueItems:function(e,t,r){var i,n=" ",o=e.level,a=e.dataLevel,s=e.schema[t],l=e.schemaPath+e.util.getProperty(t),h=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(a||""),d="valid"+o,f=e.opts.$data&&s&&s.$data;if(f?(n+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",i="schema"+o):i=s,(s||f)&&!1!==e.opts.uniqueItems){f&&(n+=" var "+d+"; if ("+i+" === false || "+i+" === undefined) "+d+" = true; else if (typeof "+i+" != 'boolean') "+d+" = false; else { "),n+=" var i = "+u+".length , "+d+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,m=Array.isArray(p);if(!p||"object"==p||"array"==p||m&&(p.indexOf("object")>=0||p.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+u+"[i], "+u+"[j])) { "+d+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+u+"[i]; ";var g="checkDataType"+(m?"s":"");n+=" if ("+e.util[g](p,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(n+=" if (typeof item == 'string') item = '\"' + item; "),n+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",f&&(n+="  }  "),n+=" if (!"+d+") {   ";var _=_||[];_.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(n+=" , schema:  ",n+=f?"validate.schema"+l:""+s,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),n+=" } "):n+=" {} ";var v=n;n=_.pop(),!e.compositeRule&&c?e.async?n+=" throw new ValidationError(["+v+"]); ":n+=" validate.errors = ["+v+"]; return false; ":n+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c&&(n+=" else { ")}else c&&(n+=" if (true) { ");return n},validate:ni},Bi=Or.toHash,Hi=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=Bi(t),e.types=Bi(["number","integer","string","array","object","boolean","null"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var i;if("object"==typeof r){var n=Object.keys(r)[0];i=r[n],r=n,i.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:ji[r],implements:i}}),e.all.$comment={keyword:"$comment",code:ji.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=Bi(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e},zi=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],Gi=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var i,n=t[r].split("/"),o=e;for(i=1;i<n.length;i++)o=o[n[i]];for(i=0;i<zi.length;i++){var a=zi[i],s=o[a];s&&(o[a]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},$i=ei.MissingRef,Yi=function e(t,r,i){var n=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(i=r,r=void 0);var o=a(t).then(function(){var e=n._addSchema(t,void 0,r);return e.validate||function e(t){try{return n._compile(t)}catch(e){if(e instanceof $i)return function i(e){var i=e.missingSchema;if(l(i))throw new Error("Schema "+i+" is loaded but "+e.missingRef+" cannot be resolved");var o=n._loadingSchemas[i];o||(o=n._loadingSchemas[i]=n._opts.loadSchema(i)).then(s,s);return o.then(function(e){if(!l(i))return a(e).then(function(){l(i)||n.addSchema(e,i,void 0,r)})}).then(function(){return function e(t){try{return n._compile(t)}catch(e){if(e instanceof $i)return i(e);throw e}function i(i){var o=i.missingSchema;if(h(o))throw new Error("Schema "+o+" is loaded but "+i.missingRef+" cannot be resolved");var s=n._loadingSchemas[o];return s||(s=n._loadingSchemas[o]=n._opts.loadSchema(o)).then(l,l),s.then(function(e){if(!h(o))return a(e).then(function(){h(o)||n.addSchema(e,o,void 0,r)})}).then(function(){return e(t)});function l(){delete n._loadingSchemas[o]}function h(e){return n._refs[e]||n._schemas[e]}}}(t)});function s(){delete n._loadingSchemas[i]}function l(e){return n._refs[e]||n._schemas[e]}}(e);throw e}function i(i){var o=i.missingSchema;if(h(o))throw new Error("Schema "+o+" is loaded but "+i.missingRef+" cannot be resolved");var s=n._loadingSchemas[o];return s||(s=n._loadingSchemas[o]=n._opts.loadSchema(o)).then(l,l),s.then(function(e){if(!h(o))return a(e).then(function(){h(o)||n.addSchema(e,o,void 0,r)})}).then(function(){return e(t)});function l(){delete n._loadingSchemas[o]}function h(e){return n._refs[e]||n._schemas[e]}}}(e)});i&&o.then(function(e){i(null,e)},i);return o;function a(t){var r=t.$schema;return r&&!n.getSchema(r)?e.call(n,{$ref:r},!0):Promise.resolve()}};var Wi=function(e,t,r){var i,n,o=" ",a=e.level,s=e.dataLevel,l=e.schema[t],h=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),f="valid"+a,p="errs__"+a,m=e.opts.$data&&l&&l.$data;m?(o+=" var schema"+a+" = "+e.util.getData(l.$data,s,e.dataPathArr)+"; ",n="schema"+a):n=l;var g,_,v,y,E,b="definition"+a,T=this.definition,w="";if(m&&T.$data){E="keywordValidate"+a;var S=T.validateSchema;o+=" var "+b+" = RULES.custom['"+t+"'].definition; var "+E+" = "+b+".validate;"}else{if(!(y=e.useCustomRule(this,l,e.schema,e)))return;n="validate.schema"+h,E=y.code,g=T.compile,_=T.inline,v=T.macro}var O=E+".errors",A="i"+a,C="ruleErr"+a,I=T.async;if(I&&!e.async)throw new Error("async keyword in sync schema");if(_||v||(o+=O+" = null;"),o+="var "+p+" = errors;var "+f+";",m&&T.$data&&(w+="}",o+=" if ("+n+" === undefined) { "+f+" = true; } else { ",S&&(w+="}",o+=" "+f+" = "+b+".validateSchema("+n+"); if ("+f+") { ")),_)T.statements?o+=" "+y.validate+" ":o+=" "+f+" = "+y.validate+"; ";else if(v){var P=e.util.copy(e);w="";P.level++;var x="valid"+P.level;P.schema=y.validate,P.schemaPath="";var N=e.compositeRule;e.compositeRule=P.compositeRule=!0;var R=e.validate(P).replace(/validate\.schema/g,E);e.compositeRule=P.compositeRule=N,o+=" "+R}else{(F=F||[]).push(o),o="",o+="  "+E+".call( ",e.opts.passContext?o+="this":o+="self",g||!1===T.schema?o+=" , "+d+" ":o+=" , "+n+" , "+d+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var k=s?"data"+(s-1||""):"parentData",L=s?e.dataPathArr[s]:"parentDataProperty",D=o+=" , "+k+" , "+L+" , rootData )  ";o=F.pop(),!1===T.errors?(o+=" "+f+" = ",I&&(o+="await "),o+=D+"; "):o+=I?" var "+(O="customErrors"+a)+" = null; try { "+f+" = await "+D+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+O+" = e.errors; else throw e; } ":" "+O+" = null; "+f+" = "+D+"; "}if(T.modifying&&(o+=" if ("+k+") "+d+" = "+k+"["+L+"];"),o+=""+w,T.valid)u&&(o+=" if (true) { ");else{var F;o+=" if ( ",void 0===T.valid?(o+=" !",o+=v?""+x:""+f):o+=" "+!T.valid+" ",o+=") { ",i=this.keyword,(F=F||[]).push(o),o="",(F=F||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ";var M=o;o=F.pop(),!e.compositeRule&&u?e.async?o+=" throw new ValidationError(["+M+"]); ":o+=" validate.errors = ["+M+"]; return false; ":o+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var U=o;o=F.pop(),_?T.errors?"full"!=T.errors&&(o+="  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+C+" = vErrors["+A+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+c+'"; } ',e.opts.verbose&&(o+=" "+C+".schema = "+n+"; "+C+".data = "+d+"; "),o+=" } "):!1===T.errors?o+=" "+U+" ":(o+=" if ("+p+" == errors) { "+U+" } else {  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+C+" = vErrors["+A+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+c+'"; } ',e.opts.verbose&&(o+=" "+C+".schema = "+n+"; "+C+".data = "+d+"; "),o+=" } } "):v?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===T.errors?o+=" "+U+" ":(o+=" if (Array.isArray("+O+")) { if (vErrors === null) vErrors = "+O+"; else vErrors = vErrors.concat("+O+"); errors = vErrors.length;  for (var "+A+"="+p+"; "+A+"<errors; "+A+"++) { var "+C+" = vErrors["+A+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+";  "+C+'.schemaPath = "'+c+'";  ',e.opts.verbose&&(o+=" "+C+".schema = "+n+"; "+C+".data = "+d+"; "),o+=" } } else { "+U+" } "),o+=" } ",u&&(o+=" else { ")}return o},Vi=n({}),qi={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Vi.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Vi.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},Ki=/^[a-z_$][a-z0-9_$-]*$/i,Xi=function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!Ki.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var n=0;n<i.length;n++)a(e,i[n],t);else a(e,i,t);var o=t.metaSchema;o&&(t.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(o,!0))}function a(e,t,i){for(var n,o=0;o<r.length;o++){var a=r[o];if(a.type==t){n=a;break}}n||(n={type:t,rules:[]},r.push(n));var s={keyword:e,definition:i,custom:!0,code:Wi,implements:i.implements};n.rules.push(s),r.custom[e]=s}return r.keywords[e]=r.all[e]=!0,this},Zi=function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},Ji=function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var i=t[r].rules,n=0;n<i.length;n++)if(i[n].keyword==e){i.splice(n,1);break}return this},Qi=function e(t,r){e.errors=null;var i=this._validateKeyword=this._validateKeyword||this.compile(qi,!0);if(i(t))return!0;e.errors=i.errors;if(r)throw new Error("custom keyword definition is invalid: "+this.errorsText(i.errors));return!1};var en=on;on.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var i=this._addSchema(e);r=i.validate||this._compile(i)}var n=r(t);!0!==r.$async&&(this.errors=r.errors);return n},on.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},on.prototype.addSchema=function(e,t,r,i){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this.addSchema(e[n],void 0,r,i);return this}var o=this._getId(e);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return un(this,t=zr.normalizeId(t||o)),this._schemas[t]=this._addSchema(e,r,i,!0),this},on.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},on.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||(i=this,n=i._opts.meta,i._opts.defaultMeta="object"==typeof n?i._getId(n)||n:i.getSchema(tn)?tn:void 0,i._opts.defaultMeta)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i,n;var o=this.validate(r,e);if(!o&&t){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a)}return o},on.prototype.getSchema=function(e){var t=an(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=zr.schema.call(e,{schema:{}},t);if(r){var i=r.schema,n=r.root,o=r.baseId,a=si.call(e,i,n,void 0,o);return e._fragments[t]=new jr({ref:t,fragment:!0,schema:i,root:n,baseId:o,validate:a}),a}}(this,e)}},on.prototype.removeSchema=function(e){if(e instanceof RegExp)return sn(this,this._schemas,e),sn(this,this._refs,e),this;switch(typeof e){case"undefined":return sn(this,this._schemas),sn(this,this._refs),this._cache.clear(),this;case"string":var t=an(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,i=r?r(e):e;this._cache.del(i);var n=this._getId(e);n&&(n=zr.normalizeId(n),delete this._schemas[n],delete this._refs[n])}return this},on.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},on.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,i=void 0===t.dataVar?"data":t.dataVar,n="",o=0;o<e.length;o++){var a=e[o];a&&(n+=i+a.dataPath+" "+a.message+r)}return n.slice(0,-r.length)},on.prototype._addSchema=function(e,t,r,i){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var n=this._opts.serialize,o=n?n(e):e,a=this._cache.get(o);if(a)return a;i=i||!1!==this._opts.addUsedSchema;var s=zr.normalizeId(this._getId(e));s&&i&&un(this,s);var l,h=!1!==this._opts.validateSchema&&!t;h&&!(l=s&&s==zr.normalizeId(e.$schema))&&this.validateSchema(e,!0);var c=zr.ids.call(this,e),u=new jr({id:s,schema:e,localRefs:c,cacheKey:o,meta:r});"#"!=s[0]&&i&&(this._refs[s]=u);this._cache.put(o,u),h&&l&&this.validateSchema(e,!0);return u},on.prototype._compile=function(e,t){if(e.compiling)return e.validate=n,n.schema=e.schema,n.errors=null,n.root=t||n,!0===e.schema.$async&&(n.$async=!0),n;var r,i;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{i=si.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function n(){var t=e.validate,r=t.apply(this,arguments);return n.errors=t.errors,r}},on.prototype.compileAsync=Yi,on.prototype.addKeyword=Xi,on.prototype.getKeyword=Zi,on.prototype.removeKeyword=Ji,on.prototype.validateKeyword=Qi,on.ValidationError=ei.Validation,on.MissingRefError=ei.MissingRef,on.$dataMetaSchema=Gi;var tn="http://json-schema.org/draft-07/schema",rn=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],nn=["/properties"];function on(e){if(!(this instanceof on))return new on(e);e=this._opts=Or.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:dn,warn:dn,error:dn};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=Ci(e.format),this._cache=e.cache||new pi,this._loadingSchemas={},this._compilations=[],this.RULES=Hi(),this._getId=function(e){switch(e.schemaId){case"auto":return cn;case"id":return ln;default:return hn}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=ii),this._metaOpts=function(e){for(var t=Or.copy(e._opts),r=0;r<rn.length;r++)delete t[rn[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=i({}),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=n({});e._opts.$data&&(r=Gi(r,nn));e.addMetaSchema(r,tn,!0),e._refs["http://json-schema.org/schema"]=tn}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function an(e,t){return t=zr.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function sn(e,t,r){for(var i in t){var n=t[i];n.meta||r&&!r.test(i)||(e._cache.del(n.cacheKey),delete t[i])}}function ln(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function hn(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function cn(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function un(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function dn(){}var fn={$schema:"http://json-schema.org/draft-07/schema#",type:"array",items:{$ref:"#/definitions/sheet"},definitions:{textSpan:{type:"object",properties:{style:{$ref:"#/definitions/style"},text:{type:"string"},image:{type:"string"}},required:["text"]},imageSpan:{type:"object",properties:{style:{$ref:"#/definitions/style"},class:{type:"string"},image:{type:"string"}}},hyperlinkSpan:{type:"object",properties:{style:{$ref:"#/definitions/style"},class:{type:"string"},href:{type:"string"},spans:{type:"array",items:{$ref:"#/definitions/noteSpan"}}}},noteSpan:{anyOf:[{$ref:"#/definitions/textSpan"},{$ref:"#/definitions/textSpan"},{$ref:"#/definitions/hyperlinkSpan"}]},position:{type:"object",properties:{x:{type:"number"},y:{type:"number"}},required:["x","y"]},style:{type:"object",properties:{id:{type:"string"},properties:{type:"object",additionalProperties:{type:"string"}}},required:["properties"]},legend:{type:"object",properties:{visibility:{type:"string",enum:["hidden","visible"]},position:{$ref:"#/definitions/style"},markers:{type:"object",additionalProperties:{type:"object",properties:{name:{type:"string"},resource:{type:"string"}}}},groups:{type:"object",additionalProperties:{type:"object",properties:{name:{type:"string"},markers:{type:"array",items:{type:"string"}}}}}}},settings:{},extension:{}}},pn={};Object.defineProperty(pn,"__esModule",{value:!0});const mn={boundary:{type:"object",properties:{id:{type:"string"},title:{type:"string"},titleUnedited:{type:"boolean"},range:{type:"string"}},required:["id","range"]},image:{type:"object",properties:{src:{type:"string"}}},marker:{type:"object",properties:{markerId:{type:"string"}},required:["markerId"]},notes:{type:"object",properties:{plain:{type:"object",properties:{content:{type:"string"}},required:["content"]},html:{type:"object",properties:{content:{type:"object",properties:{paragraphs:{type:"array",items:{type:"object",properties:{style:{$ref:"#/definitions/style"},spans:{type:"array",items:{$ref:"#/definitions/noteSpan"}}}}}},required:["paragraphs"]}},required:["content"]}}},numbering:{type:"object",properties:{numberFormat:{type:"string"},prefix:{type:"string"},suffix:{type:"string"},prependingNumbers:{type:"string",enum:["none"]}}},relationship:{type:"object",properties:{id:{type:"string"},title:{type:"string"},titleUnedited:{type:"boolean"},style:{$ref:"#/definitions/style"},class:{type:"string"},end1Id:{type:"string"},end2id:{type:"string"},controlPoints:{type:"object",properties:{0:{type:"object",properties:{angle:{type:"number"},amount:{type:"number"}}},1:{type:"object",properties:{angle:{type:"number"},amount:{type:"number"}}}},required:["0","1"]}},required:["id","end1Id","end2Id","controlPoints"]},sheet:{type:"object",properties:{id:{type:"string"},title:{type:"string"},rootTopic:{$ref:"#/definitions/topic"},style:{$ref:"#/definitions/style"},topicPositioning:{type:"string",enum:["free","fixed"]},topicOverlapping:{type:"string",enum:["overlap","none"]},theme:{$ref:"#/definitions/theme"},relationships:{type:"array",items:{$ref:"#/definitions/relationship"}},legend:{$ref:"#/definitions/legend"},settings:{$ref:"#/definitions/settings"}},required:["id","rootTopic"]},summary:{type:"object",properties:{id:{type:"string"},topicId:{type:"string"},range:{type:"string"}},required:["id","range","topicId"]},theme:{type:"object",properties:{id:{type:"string"},importantTopic:{$ref:"#/definitions/style"},minorTopic:{$ref:"#/definitions/style"},expiredTopic:{$ref:"#/definitions/style"},centralTopic:{$ref:"#/definitions/style"},boundary:{$ref:"#/definitions/style"},floatingTopic:{$ref:"#/definitions/style"},subTopic:{$ref:"#/definitions/style"},mainTopic:{$ref:"#/definitions/style"},calloutTopic:{$ref:"#/definitions/style"},summaryTopic:{$ref:"#/definitions/style"},relationship:{$ref:"#/definitions/style"}}},topic:{type:"object",properties:{id:{type:"string"},title:{type:"string"},titleUnedited:{type:"boolean"},style:{$ref:"#/definitions/style"},class:{type:"string"},position:{$ref:"#/definitions/position"},structureClass:{type:"string"},branch:{type:"string",enum:["folded"]},customWidth:{type:"number"},labels:{type:"string"},numbering:{$ref:"#/definitions/numbering"},href:{type:"string"},notes:{$ref:"#/definitions/notes"},image:{$ref:"#/definitions/image"},children:{type:"object",properties:{attached:{type:"array",items:{$ref:"#/definitions/topic"}},detached:{type:"array",items:{$ref:"#/definitions/topic"}},summary:{type:"array",items:{$ref:"#/definitions/topic"}},callout:{type:"array",items:{$ref:"#/definitions/topic"}}}},markers:{type:"array",items:{$ref:"#/definitions/marker"}},boundaries:{type:"array",items:{$ref:"#/definitions/boundary"}},summaries:{type:"array",items:{$ref:"#/definitions/summary"}},extensions:{type:"array",items:{$ref:"#/definitions/extension"}}},required:["id"]}},gn=new en({allErrors:!0});pn.default=function(e){const t=function(){for(const e in mn)fn.definitions[e]=mn[e];return gn.compile(fn)}(),r=t(e||{});return t.errors?{status:r,errors:t.errors}:{status:r,errors:null}};var _n={};Object.defineProperty(_n,"__esModule",{value:!0}),_n.Workbook=Tr.default,_n.Sheet=ur.default,_n.Topic=Gt.default,_n.validator=pn.default;var vn={};Object.defineProperty(vn,"__esModule",{value:!0}),vn.Workbook=void 0;vn.Workbook=class extends F.default{constructor(){super(),this.resources={}}theme(e,t){if(!e||!this.resources[e])return!1;if(!t||"string"!=typeof t)return!1;const r=new R.Theme({themeName:t});return this.sheet.changeTheme(r.data),!0}toString(){return this.workbook.toString()}toJSON(){return this.workbook.toJSON()}validate(){return _n.validator(this.workbook.toJSON())}createSheet(e,t="Central Topic"){if(!e)throw new Error("The title of sheet is required");if(this.resources.hasOwnProperty(e))throw new Error("The title of sheet is duplication");const r=this.id;this.resources[e]=r;const i=[{id:r,title:e,rootTopic:{id:this.id,title:t}}];return this.workbook=new _n.Workbook(i),this.sheet=this.workbook.getSheetById(r),this.sheet}};var yn={};Object.defineProperty(yn,"__esModule",{value:!0}),yn.Summary=void 0;yn.Summary=class extends F.default{constructor(){super({debug:"xmind-sdk:summary"})}range(e){const t=e.children,r=e.condition;if(r[0]===r[1])for(let e=0,i=t.length;e<i;e++)t[e].getId()===r[0]&&(this._range=`(${e},${e})`);else{let e,i=0;for(let n=0,o=t.length;n<o;n++)t[n].getId()===r[0]&&(e=n),t[n].getId()===r[1]&&(i=n);this._range=e>i?`(${e},${e})`:`(${e},${i})`}return this}toJSON(){return{id:this.id,range:this._range,topicId:this.topicId}}};var En={};Object.defineProperty(En,"__esModule",{value:!0}),En.Note=void 0;En.Note=class{constructor(){this.html={content:{paragraphs:[]}},this.ops={ops:[]},this.plain={}}set text(e){this.plain.content=e,this.html.content.paragraphs.push({spans:[{text:e}]}),this.ops.ops.push({insert:e})}toJSON(){return{html:this.html,plain:this.plain,ops:this.ops}}toString(){return JSON.stringify(this.toJSON())}};var bn={};(function(e){(function(){"use strict";Object.defineProperty(bn,"__esModule",{value:!0}),bn.isRuntime=bn.isObject=bn.isEmpty=void 0;bn.isEmpty=function(e){return 0!==e&&!1!==e&&(null==e||""===e||"object"==typeof e&&0===Object.keys(e).length)};bn.isObject=function(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)};bn.isRuntime=function(){return"object"==typeof e&&"undefined"==typeof window}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.Topic=void 0;Tn.Topic=class extends F.default{constructor(e={}){if(super({debug:"xmind-sdk:topic"}),this.resources={},e&&!e.sheet)throw new Error("options.sheet is required");this.sheet=e.sheet,this.root=this.sheet.getRootTopic(),this.componentId=this.lastId=this.root.getId(),this.resources[this.componentId]="Central Topic"}on(e){if(!e)return this.componentId=this.root.getId(),this;if(!this.isValidTopicId(String(e)))throw new Error(`Invalid componentId ${String(e)}`);return this.componentId=e,this}setStructureClass(e){return this.current().changeStructureClass(e),this}addLabel(e){const t=this.current(),r=t.getLabels(),i={index:0};return r&&0!==r.length?i.index=r.length:i.index=0,t.addLabel(e,i),this}removeLabel(e){const t=e?this.find(e):this.current();if(!t)throw new Error(`does not found component: ${e}`);return t.removeLabels(),this}add(e={},t){if(!e.title||"string"!=typeof e.title)throw new Error("topic.title should be a valid string");return e.id=e.id||this.id,this.resources[e.id]=e.title,this.current().addChildTopic(e,t),this.lastId=e.id,this}image(e){if(!bn.isRuntime())throw new Error("Cannot run .image() in browser environment");const t=this.current(),r=`resources/${this.id}`,i=Object.assign({},{src:`xap:${r}`},e||{});return t.addImage(i),r}note(e,t){const r=this.current();if(!0===t)return r.removeNotes(),this;if(!e)return this;const i=new En.Note;return i.text=e,r.addNotes(i.toJSON()),this}destroy(e){if(!this.isValidTopicId(e))return this.debug('E - target: "%s" does not exists',e),this;try{const t=this.find(e);t.parent().removeChildTopic(t),delete this.resources[e]}catch(e){this.debug("D - %s",e.message)}return this}summary(e={}){if(this.current().isRootTopic())return this.debug("I - Not allowed add summary on root topic."),this;let t=null;e.edge&&(this.resources[e.edge]?t=e.edge:this.debug('W - Topic "%s" does not exists',e.edge));const r=new yn.Summary,i=this.current().getType(),n=this.current().parent(),o=n.getChildrenByType(i),a=[this.componentId,t||this.componentId];r.range({children:o,condition:a});const s={title:e.title||"Summary",id:this.id};return r.topicId=s.id,n.addSummary(r.toJSON(),s),this.resources[s.id]=s.title,this.lastId=s.id,this}marker(e={}){return bn.isObject(e)&&!bn.isEmpty(e)&&e.groupId&&e.markerId?!0===e.del?(delete e.del,this.current().removeMarker(e),this):(this.current().addMarker(e),this):(this.debug("E - Invalid marker options: %j",e),this)}cid(e){if(e&&"string"==typeof e){for(const t in this.resources)if(this.resources[t]===e)return t;return null}return this.lastId}lastCid(e){if(e&&"string"==typeof e){for(const t of Object.keys(this.resources).reverse())if(this.resources[t]===e)return t;return null}return this.lastId}cids(){return this.resources}find(e=null){const t=this.root.getId();return e&&e!==t?this.sheet.findComponentById(e):this.root}get rootTopic(){return this.root}get rootTopicId(){return this.root.getId()}current(){return this.componentId===this.root.getId()?this.root:this.find(this.componentId)}isValidTopicId(e){return!!e&&this.resources.hasOwnProperty(e)}};var wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.AbstractMarker=void 0;wn.AbstractMarker=class{priority(e){return null}smiley(e){return null}task(e){return null}flag(e){return null}star(e){return null}people(e){return null}arrow(e){return null}symbol(e){return null}month(e){return null}week(e){return null}half(e){return null}other(e){return null}};var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.icons=void 0;const On={priorityMarkers:{id:"priorityMarkers",markersMap:{"priority-1":{id:"priority-1",name:"%priority1",resource:"priority_1@32.png",svg:"priority_1@16.svg",index:0},"priority-2":{id:"priority-2",name:"%priority2",resource:"priority_2@32.png",svg:"priority_2@16.svg",index:1},"priority-3":{id:"priority-3",name:"%priority3",resource:"priority_3@32.png",svg:"priority_3@16.svg",index:2},"priority-4":{id:"priority-4",name:"%priority4",resource:"priority_4@32.png",svg:"priority_4@16.svg",index:3},"priority-5":{id:"priority-5",name:"%priority5",resource:"priority_5@32.png",svg:"priority_5@16.svg",index:4},"priority-6":{id:"priority-6",name:"%priority6",resource:"priority_6@32.png",svg:"priority_6@16.svg",index:5},"priority-7":{id:"priority-7",name:"%priority7",resource:"priority_7@32.png",svg:"priority_7@16.svg",index:6},"priority-8":{id:"priority-8",name:"%priority8",resource:"priority_8@32.png",svg:"priority_8@16.svg",hidden:"true",index:7},"priority-9":{id:"priority-9",name:"%priority9",resource:"priority_9@32.png",svg:"priority_9@16.svg",hidden:"true",index:8}}},smileyMarkers:{id:"smileyMarkers",markersMap:{"smiley-laugh":{id:"smiley-laugh",name:"%smileyLaugh",resource:"emotion_laugh@32.png",svg:"emotion_laugh@16.svg",index:9},"smiley-smile":{id:"smiley-smile",name:"%smileySmile",resource:"emotion_smile@32.png",svg:"emotion_smile@16.svg",index:10},"smiley-cry":{id:"smiley-cry",name:"%smileyCry",resource:"emotion_cry@32.png",svg:"emotion_cry@16.svg",index:11},"smiley-surprise":{id:"smiley-surprise",name:"%smileySurprise",resource:"emotion_surprise@32.png",svg:"emotion_surprise@16.svg",index:12},"smiley-boring":{id:"smiley-boring",name:"%smileyBoring",resource:"emotion_boring@32.png",svg:"emotion_boring@16.svg",index:13},"smiley-angry":{id:"smiley-angry",name:"%smileyAngry",resource:"emotion_angry@32.png",svg:"emotion_angry@16.svg",index:14},"smiley-embarrass":{id:"smiley-embarrass",name:"%smileyEmbarrass",resource:"emotion_embarrass@16.png",svg:"emotion_embarrass@16.svg",index:15}}},taskMakers:{id:"taskMakers",markersMap:{"task-start":{id:"task-start",name:"%taskStart",resource:"progress_start@32.png",svg:"progress_start@16.svg",index:16},"task-oct":{id:"task-oct",name:"%taskOct",resource:"progress_1o@32.png",svg:"progress_1o@16.svg",index:17},"task-quarter":{id:"task-quarter",name:"%taskQuarter",resource:"progress_1q@32.png",svg:"progress_1q@16.svg",hidden:"true",index:18},"task-3oct":{id:"task-3oct",name:"%task3Oct",resource:"progress_3o@32.png",svg:"progress_3o@16.svg",index:19},"task-half":{id:"task-half",name:"%taskHalf",resource:"progress_half@32.png",svg:"progress_half@16.svg",index:20},"task-5oct":{id:"task-5oct",name:"%task5Oct",resource:"progress_5o@32.png",svg:"progress_5o@16.svg",index:21},"task-3quar":{id:"task-3quar",name:"%task3Quarters",resource:"progress_3q@32.png",svg:"progress_3q@16.svg",hidden:"true",index:22},"task-7oct":{id:"task-7oct",name:"%task7Oct",resource:"progress_7o@32.png",svg:"progress_7o@16.svg",index:23},"task-done":{id:"task-done",name:"%taskDone",resource:"progress_done@32.png",svg:"progress_done@16.svg",index:24},"task-pause":{id:"task-pause",name:"%taskPause",resource:"progress_pause@32.png",hidden:"true",index:25}}},flagMakers:{id:"flagMakers",markersMap:{"flag-red":{id:"flag-red",name:"%colorRed",resource:"flag_red@32.png",svg:"flag_red@16.svg",index:26},"flag-orange":{id:"flag-orange",name:"%colorOrange",resource:"flag_orange@32.png",svg:"flag_orange@16.svg",index:27},"flag-yellow":{id:"flag-yellow",name:"%colorYellow",resource:"flag_yellow@32.png",svg:"flag_yellow@16.svg",hidden:"true",index:28},"flag-dark-blue":{id:"flag-dark-blue",name:"%colorDarkBlue",resource:"flag_dark_blue@32.png",svg:"flag_dark_blue@16.svg",index:29},"flag-purple":{id:"flag-purple",name:"%colorPurple",resource:"flag_purple@32.png",svg:"flag_purple@16.svg",index:30},"flag-green":{id:"flag-green",name:"%colorGreen",resource:"flag_green@32.png",svg:"flag_green@16.svg",index:31},"flag-blue":{id:"flag-blue",name:"%colorBlue",resource:"flag_blue@32.png",svg:"flag_blue@16.svg",index:32},"flag-gray":{id:"flag-gray",name:"%colorGray",resource:"flag_gray@32.png",svg:"flag_gray@16.svg",index:33},"flag-dark-green":{id:"flag-dark-green",name:"%colorDarkGreen",resource:"flag_dark_green@16.png",svg:"flag_dark_green@16.svg",hidden:"true",index:34},"flag-dark-gray":{id:"flag-dark-gray",name:"%colorDarkGray",resource:"flag_dark_gray@16.png",svg:"flag_dark_gray@16.svg",hidden:"true",index:35}}},starMakers:{id:"starMakers",markersMap:{"star-red":{id:"star-red",name:"%colorRed",resource:"star_red@32.png",svg:"star_red@16.svg",index:36},"star-orange":{id:"star-orange",name:"%colorOrange",resource:"star_orange@32.png",svg:"star_orange@16.svg",index:37},"star-dark-blue":{id:"star-dark-blue",name:"%colorDarkBlue",resource:"star_dark_blue@32.png",svg:"star_dark_blue@16.svg",index:38},"star-purple":{id:"star-purple",name:"%colorPurple",resource:"star_purple@32.png",svg:"star_purple@16.svg",index:39},"star-green":{id:"star-green",name:"%colorGreen",resource:"star_green@32.png",svg:"star_green@16.svg",index:40},"star-blue":{id:"star-blue",name:"%colorBlue",resource:"star_blue@32.png",svg:"star_blue@16.svg",index:41},"star-gray":{id:"star-gray",name:"%colorGray",resource:"star_gray@32.png",svg:"star_gray@16.svg",index:42},"star-yellow":{id:"star-yellow",name:"%colorYellow",resource:"star_yellow@32.png",svg:"star_yellow@16.svg",hidden:"true",index:43},"star-dark-green":{id:"star-dark-green",name:"%colorDarkGreen",resource:"star_dark_green@16.png",svg:"star_dark_green@16.svg",hidden:"true",index:44},"star-dark-gray":{id:"star-dark-gray",name:"%colorDarkGray",resource:"star_dark_gray@16.png",svg:"star_dark_gray@16.svg",hidden:"true",index:45}}},peopleMakers:{id:"peopleMakers",markersMap:{"people-red":{id:"people-red",name:"%colorRed",resource:"people_red@32.png",svg:"people_red@16.svg",index:46},"people-orange":{id:"people-orange",name:"%colorOrange",resource:"people_orange@32.png",svg:"people_orange@16.svg",index:47},"people-yellow":{id:"people-yellow",name:"%colorYellow",resource:"people_yellow@32.png",svg:"people_yellow@16.svg",hidden:"true",index:48},"people-dark-blue":{id:"people-dark-blue",name:"%colorDarkBlue",resource:"people_dark_blue@32.png",svg:"people_dark_blue@16.svg",index:49},"people-purple":{id:"people-purple",name:"%colorPurple",resource:"people_purple@32.png",svg:"people_purple@16.svg",index:50},"people-green":{id:"people-green",name:"%colorGreen",resource:"people_green@32.png",svg:"people_green@16.svg",index:51},"people-blue":{id:"people-blue",name:"%colorBlue",resource:"people_blue@32.png",svg:"people_blue@16.svg",index:52},"people-gray":{id:"people-gray",name:"%colorGray",resource:"people_gray@32.png",svg:"people_gray@16.svg",index:53},"people-dark-green":{id:"people-dark-green",name:"%colorDarkGreen",resource:"people_dark_green@16.png",svg:"people_dark_green@16.svg",hidden:"true",index:54},"people-dark-gray":{id:"people-dark-gray",name:"%colorDarkGray",resource:"people_dark_gray@16.png",svg:"people_dark_gray@16.svg",hidden:"true",index:55}}},arrowMakers:{id:"arrowMakers",markersMap:{"arrow-left":{id:"arrow-left",name:"%arrowLeft",resource:"arrow_left@32.png",svg:"arrow_left@16.svg",index:56},"arrow-right":{id:"arrow-right",name:"%arrowRight",resource:"arrow_right@32.png",svg:"arrow_right@16.svg",index:57},"arrow-up":{id:"arrow-up",name:"%arrowUp",resource:"arrow_up@32.png",svg:"arrow_up@16.svg",index:58},"arrow-down":{id:"arrow-down",name:"%arrowDown",resource:"arrow_down@32.png",svg:"arrow_down@16.svg",index:59},"arrow-left-right":{id:"arrow-left-right",name:"%arrowLeftRight",resource:"arrow_left_right@32.png",svg:"arrow_left_right@16.svg",index:60},"arrow-up-down":{id:"arrow-up-down",name:"%arrowUpDown",resource:"arrow_up_down@32.png",svg:"arrow_up_down@16.svg",index:61},"arrow-refresh":{id:"arrow-refresh",name:"%arrowRefresh",resource:"arrow_refresh@32.png",svg:"arrow_refresh@16.svg",index:62},"arrow-up-right":{id:"arrow-up-right",name:"%arrowUpRight",resource:"arrow_up_right@32.png",svg:"arrow_up_right@16.svg",hidden:"true",index:63},"arrow-down-right":{id:"arrow-down-right",name:"%arrowDownRight",resource:"arrow_down_right@32.png",svg:"arrow_down_right@16.svg",hidden:"true",index:64},"arrow-down-left":{id:"arrow-down-left",name:"%arrowDownLeft",resource:"arrow_down_left@32.png",svg:"arrow_down_left@16.svg",hidden:"true",index:65},"arrow-up-left":{id:"arrow-up-left",name:"%arrowUpLeft",resource:"arrow_up_left@32.png",svg:"arrow_up_left@16.svg",hidden:"true",index:66}}},symbolMakers:{id:"symbolMakers",markersMap:{c_symbol_heart:{id:"c_symbol_heart",name:"%symbolHeart",resource:"symbol_heart@16.png",svg:"symbol_heart.svg",index:67},c_symbol_dislike:{id:"c_symbol_dislike",name:"%symbolDislike",resource:"symbol_dislike@16.png",svg:"symbol_dislike.svg",index:68},c_symbol_like:{id:"c_symbol_like",name:"%symbolLike",resource:"symbol_like@16.png",svg:"symbol_like.svg",index:69},c_symbol_music:{id:"c_symbol_music",name:"%symbolMusic",resource:"symbol_music@16.png",svg:"symbol_music.svg",index:70},c_symbol_lock:{id:"c_symbol_lock",name:"%symbolLock",svg:"symbol_lock.svg",index:71},c_symbol_hourglass:{id:"c_symbol_hourglass",name:"%symbolHourglass",svg:"symbol_hourglass.svg",index:72},c_symbol_broken_heart:{id:"c_symbol_broken_heart",name:"%symbolBrokenHeart",svg:"symbol_broken_heart.svg",index:73},c_symbol_quote:{id:"c_symbol_quote",name:"%symbolQuote",svg:"symbol_quote.svg",index:74},c_symbol_apostrophe:{id:"c_symbol_apostrophe",name:"%symbolApostrophe",svg:"symbol_apostrophe.svg",index:75},"symbol-question":{id:"symbol-question",name:"%symbolQuestion",resource:"symbol_question@32.png",svg:"symbol_question@16.svg",index:76},"symbol-attention":{id:"symbol-attention",name:"%symbolAttention",resource:"symbol_attention.png",svg:"symbol_attention@16.svg",index:77},"symbol-wrong":{id:"symbol-wrong",name:"%symbolWrong",resource:"symbol_wrong@32.png",svg:"symbol_wrong@16.svg",index:78},"symbol-pause":{id:"symbol-pause",name:"%symbolPause",resource:"symbol_pause@32.png",svg:"symbol_pause@16.svg",index:79},"symbol-no-entry":{id:"symbol-no-entry",name:"%symbolNoEntry",svg:"symbol_no_entry@16.svg",index:80},"symbol-plus":{id:"symbol-plus",name:"%symbolPlus",resource:"symbol_plus@32.png",svg:"symbol_plus@16.svg",index:81},"symbol-minus":{id:"symbol-minus",name:"%symbolMinus",resource:"symbol_minus@32.png",svg:"symbol_minus@16.svg",index:82},"symbol-info":{id:"symbol-info",name:"%symbolInfo",resource:"symbol_information@32.png",svg:"symbol_information@16.svg",index:83},"symbol-divide":{id:"symbol-divide",name:"%symbolDivide",svg:"symbol_divide@16.svg",index:84},"symbol-equality":{id:"symbol-equality",name:"%symbolEquality",svg:"symbol_equality@16.svg",index:85},"symbol-right":{id:"symbol-right",name:"%symbolRight",resource:"symbol_right@32.png",svg:"symbol_right@16.svg",index:86},"symbol-code":{id:"symbol-code",name:"%symbolCode",svg:"symbol_code@16.svg",index:87},c_symbol_contact:{id:"c_symbol_contact",name:"%symbolContact",resource:"symbol_contact@16.png",svg:"symbol_contact.svg",index:88},c_symbol_telephone:{id:"c_symbol_telephone",name:"%symbolTelephone",resource:"symbol_telephone@16.png",svg:"symbol_telephone.svg",index:89},c_symbol_pen:{id:"c_symbol_pen",name:"%symbolPen",resource:"symbol_pen@16.png",svg:"symbol_pen.svg",index:90},c_symbol_money:{id:"c_symbol_money",name:"%symbolMoney",resource:"symbol_money@16.png",svg:"symbol_money.svg",index:91},c_symbol_bar_chart:{id:"c_symbol_bar_chart",name:"%symbolBarChart",resource:"symbol_bar_chart@16.png",svg:"symbol_bar_chart.svg",index:92},c_symbol_pie_chart:{id:"c_symbol_pie_chart",name:"%symbolPieChart",resource:"symbol_pie_chart@16.png",svg:"symbol_pie_chart.svg",index:93},c_symbol_line_graph:{id:"c_symbol_line_graph",name:"%symbolLineGraph",resource:"symbol_line_graph@16.png",svg:"symbol_line_graph.svg",index:94},c_symbol_shopping_cart:{id:"c_symbol_shopping_cart",name:"%symbolShoppingCart",resource:"symbol_shopping_cart@16.png",svg:"symbol_shopping_cart.svg",index:95},c_symbol_medals:{id:"c_symbol_medals",name:"%symbolMedals",resource:"symbol_medals@16.png",svg:"symbol_medals.svg",index:96},c_symbol_trophy:{id:"c_symbol_trophy",name:"%symbolTrophy",resource:"symbol_trophy@16.png",svg:"symbol_trophy.svg",index:97},"symbol-image":{id:"symbol-image",name:"%symbolImage",svg:"symbol_image@16.svg",index:98},c_symbol_exercise:{id:"c_symbol_exercise",name:"%symbolExercise",resource:"symbol_exercise@16.png",svg:"symbol_exercise.svg",index:99},c_symbol_flight:{id:"c_symbol_flight",name:"%symbolFlight",resource:"symbol_flight@16.png",svg:"symbol_flight.svg",index:100},"symbol-pin":{id:"symbol-pin",name:"%symbolPin",svg:"symbol_pin@16.svg",index:101},"symbol-exclam":{id:"symbol-exclam",name:"%symbolExclam",resource:"symbol_exclamation@32.png",svg:"symbol_exclamation@16.svg",index:102,hidden:"true"},"c_simbol-plus":{id:"c_simbol-plus",name:"%symbolPlus",resource:"c_simbol_plus@32.png",svg:"symbol_plus@16.svg",index:103,hidden:"true"},"c_simbol-minus":{id:"c_simbol-minus",name:"%symbolMinus",resource:"c_simbol_minus@32.png",svg:"symbol_minus@16.svg",index:104,hidden:"true"},"c_simbol-question":{id:"c_simbol-question",name:"%symbolQuestion",resource:"c_simbol_question@32.png",svg:"c_simbol_question@16.svg",index:105,hidden:"true"},"c_simbol-exclam":{id:"c_simbol-exclam",name:"%symbolExclam",resource:"c_simbol_exclamation@32.png",svg:"c_simbol_exclamation@16.svg",index:106,hidden:"true"},"c_simbol-info":{id:"c_simbol-info",name:"%symbolInfo",resource:"c_simbol_information@32.png",svg:"symbol_information@16.svg",index:107,hidden:"true"},"c_simbol-wrong":{id:"c_simbol-wrong",name:"%symbolWrong",resource:"c_simbol_wrong@32.png",svg:"c_simbol_wrong@16.svg",index:108,hidden:"true"},"c_simbol-right":{id:"c_simbol-right",name:"%symbolRight",resource:"c_simbol_right@32.png",svg:"symbol_right@16.svg",index:109,hidden:"true"},"c_simbol-pause":{id:"c_simbol-pause",name:"%symbolPause",resource:"c_simbol_pause@32.png",svg:"symbol_pause@16.svg",index:110,hidden:"true"},c_symbol_thermometer:{id:"c_symbol_thermometer",name:"%symbolThermometer",resource:"symbol_thermometer@16.png",svg:"symbol_thermometer.svg",index:111,hidden:"true"}}},monthMakers:{id:"monthMakers",markersMap:{"month-jan":{id:"month-jan",name:"%monthJan",resource:"month_jan@32.png",svg:"month_jan@16.svg",index:112},"month-feb":{id:"month-feb",name:"%monthFeb",resource:"month_feb@32.png",svg:"month_feb@16.svg",index:113},"month-mar":{id:"month-mar",name:"%monthMar",resource:"month_mar@32.png",svg:"month_mar@16.svg",index:114},"month-apr":{id:"month-apr",name:"%monthApr",resource:"month_apr@32.png",svg:"month_apr@16.svg",index:115},"month-may":{id:"month-may",name:"%monthMay",resource:"month_may@32.png",svg:"month_may@16.svg",index:116},"month-jun":{id:"month-jun",name:"%monthJun",resource:"month_jun@32.png",svg:"month_jun@16.svg",index:117},"month-jul":{id:"month-jul",name:"%monthJul",resource:"month_jul@32.png",svg:"month_jul@16.svg",index:118},"month-aug":{id:"month-aug",name:"%monthAug",resource:"month_aug@32.png",svg:"month_aug@16.svg",index:119},"month-sep":{id:"month-sep",name:"%monthSep",resource:"month_sep@32.png",svg:"month_sep@16.svg",index:120},"month-oct":{id:"month-oct",name:"%monthOct",resource:"month_oct@32.png",svg:"month_oct@16.svg",index:121},"month-nov":{id:"month-nov",name:"%monthNov",resource:"month_nov@32.png",svg:"month_nov@16.svg",index:122},"month-dec":{id:"month-dec",name:"%monthDec",resource:"month_dec@32.png",svg:"month_dec@16.svg",index:123}}},weekMakers:{id:"weekMakers",markersMap:{"week-sun":{id:"week-sun",name:"%weekSun",resource:"week_sun@32.png",svg:"week_sun@16.svg",index:124},"week-mon":{id:"week-mon",name:"%weekMon",resource:"week_mon@32.png",svg:"week_mon@16.svg",index:125},"week-tue":{id:"week-tue",name:"%weekTue",resource:"week_tue@32.png",svg:"week_tue@16.svg",index:126},"week-wed":{id:"week-wed",name:"%weekWed",resource:"week_wed@32.png",svg:"week_wed@16.svg",index:127},"week-thu":{id:"week-thu",name:"%weekThu",resource:"week_thu@32.png",svg:"week_thu@16.svg",index:128},"week-fri":{id:"week-fri",name:"%weekFri",resource:"week_fri@32.png",svg:"week_fri@16.svg",index:129},"week-sat":{id:"week-sat",name:"%weekSat",resource:"week_sat@32.png",svg:"week_sat@16.svg",index:130}}},halfStarMarkers:{id:"halfStarMarkers",hidden:"true",markersMap:{"half-star-green":{id:"half-star-green",name:"%colorGreen",resource:"star_green_half.png",index:131},"half-star-red":{id:"half-star-red",name:"%colorRed",resource:"star_red_half.png",index:132},"half-star-yellow":{id:"half-star-yellow",name:"%colorYellow",resource:"star_yellow_half.png",index:133},"half-star-purple":{id:"half-star-purple",name:"%colorPurple",resource:"star_purple_half.png",index:134},"half-star-blue":{id:"half-star-blue",name:"%colorBlue",resource:"star_blue_half.png",index:135},"half-star-gray":{id:"half-star-gray",name:"%colorGray",resource:"star_gray_half.png",index:136}}},otherMarkers:{id:"otherMarkers",hidden:"true",markersMap:{"other-calendar":{id:"other-calendar",name:"%otherCalendar",resource:"other_calendar.png",index:137},"other-email":{id:"other-email",name:"%otherEmail",resource:"other_email.png",index:138},"other-phone":{id:"other-phone",name:"%otherPhone",resource:"other_phone.png",index:139},"other-phone2":{id:"other-phone2",name:"%otherPhone",resource:"other_phone2.png",index:140},"other-fax":{id:"other-fax",name:"%otherFax",resource:"other_print.png",index:141},"other-people":{id:"other-people",name:"%otherPeople",resource:"people_green@32.png",index:142},"other-people2":{id:"other-people2",name:"%otherPeople",resource:"people_blue@32.png",index:143},"other-clock":{id:"other-clock",name:"%otherClock",resource:"other_clock.png",index:144},"other-coffee-cup":{id:"other-coffee-cup",name:"%otherCoffeeCup",resource:"other_coffee.png",index:145},"other-question":{id:"other-question",name:"%otherQuestion",resource:"symbol_question@32.png",svg:"symbol_question@16.svg",index:146},"other-exclam":{id:"other-exclam",name:"%otherExclam",resource:"symbol_exclamation@32.png",svg:"symbol_exclamation@16.svg",index:147},"other-lightbulb":{id:"other-lightbulb",name:"%otherLightBulb",resource:"other_buble.png",index:148},"other-businesscard":{id:"other-businesscard",name:"%otherBusinessCard",resource:"other_businesscard.png",index:149},"other-social":{id:"other-social",name:"%otherSocial",resource:"other_social.png",index:150},"other-chat":{id:"other-chat",name:"%otherChat",resource:"other_chat.png",index:151},"other-note":{id:"other-note",name:"%otherNote",resource:"other_note.png",index:152},"other-lock":{id:"other-lock",name:"%otherLock",resource:"other_lock.png",index:153},"other-unlock":{id:"other-unlock",name:"%otherUnlock",resource:"other_unlock.png",index:154},"other-yes":{id:"other-yes",name:"%otherYes",resource:"symbol_right@32.png",svg:"symbol_right@16.svg",index:155},"other-no":{id:"other-no",name:"%otherNo",resource:"symbol_wrong@32.png",svg:"symbol_wrong@16.svg",index:156},"other-bomb":{id:"other-bomb",name:"%otherBomb",resource:"other_bomb.png",index:157}}}};Sn.icons={};const An={};for(const e in On){const t=e,r=On[e].markersMap;for(const e in r){if(!r.hasOwnProperty(e))continue;if(e.startsWith("c_"))continue;const i=e.split("-"),n=i[0],o=i.length>2?i.slice(1,i.length).join("-"):i[1];An[n]||(An[n]=[]),Sn.icons[n]||(Sn.icons[n]={}),An[n].push(o),Sn.icons[n][o]={groupId:t,markerId:e}}}Object.defineProperty(Sn.icons,"iterable",{value:An,enumerable:!1,configurable:!1,writable:!1}),Sn=Sn=Sn.icons;var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Marker=void 0;const In=T.default("xmind-sdk:marker");Cn.Marker=class extends wn.AbstractMarker{constructor(){super(),this.init()}init(){for(const e in Sn)this[e]=function(t){if(!t)return null;const r="string"==typeof t?t:String(t);return t&&!Sn[e].hasOwnProperty(r)?(In("W - Invalid name string %s",t),null):Sn[e][r]}}static names(e){return Sn.iterable[String(e)]}static groups(){return Object.keys(Sn.iterable)}};var Pn={};(function(e){(function(){function t(e,t){for(var r=0,i=e.length-1;i>=0;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}Pn.resolve=function(){for(var i="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(i=a+"/"+i,n="/"===a.charAt(0))}return(n?"/":"")+(i=t(r(i.split("/"),function(e){return!!e}),!n).join("/"))||"."},Pn.normalize=function(e){var n=Pn.isAbsolute(e),o="/"===i(e,-1);return(e=t(r(e.split("/"),function(e){return!!e}),!n).join("/"))||n||(e="."),e&&o&&(e+="/"),(n?"/":"")+e},Pn.isAbsolute=function(e){return"/"===e.charAt(0)},Pn.join=function(){var e=Array.prototype.slice.call(arguments,0);return Pn.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},Pn.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=Pn.resolve(e).substr(1),t=Pn.resolve(t).substr(1);for(var i=r(e.split("/")),n=r(t.split("/")),o=Math.min(i.length,n.length),a=o,s=0;s<o;s++)if(i[s]!==n[s]){a=s;break}var l=[];for(s=a;s<i.length;s++)l.push("..");return(l=l.concat(n.slice(a))).join("/")},Pn.sep="/",Pn.delimiter=":",Pn.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,i=-1,n=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!n){i=o;break}}else n=!1;return-1===i?r?"/":".":r&&1===i?"/":e.slice(0,i)},Pn.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,i=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){r=t+1;break}}else-1===i&&(n=!1,i=t+1);return-1===i?"":e.slice(r,i)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},Pn.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,i=-1,n=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===i&&(n=!1,i=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!n){r=a+1;break}}return-1===t||-1===i||0===o||1===o&&t===i-1&&t===r+1?"":e.slice(t,i)};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this)}).call(this,h);var xn=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8},Nn={};Nn="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e};var Rn={};(function(e,t){(function(){var r=/%[sdj%]/g;Rn.format=function(e){if(!m(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(o(arguments[i]));return t.join(" ")}i=1;for(var n=arguments,a=n.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}}),l=n[i];i<a;l=n[++i])f(l)||!v(l)?s+=" "+l:s+=" "+o(l);return s},Rn.deprecate=function(r,i){if(g(t.process))return function(){return Rn.deprecate(r,i).apply(this,arguments)};if(!0===e.noDeprecation)return r;var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),n=!0}return r.apply(this,arguments)}};var i,n={};function o(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(t)?r.showHidden=t:t&&Rn._extend(r,t),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),l(r,e,r.depth)}function a(e,t){var r=o.styles[t];return r?"["+o.colors[r][0]+"m"+e+"["+o.colors[r][1]+"m":e}function s(e,t){return e}function l(e,t,r){if(e.customInspect&&t&&b(t.inspect)&&t.inspect!==Rn.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return m(i)||(i=l(e,i,r)),i}var n=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(p(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(f(t))return e.stylize("null","null")}(e,t);if(n)return n;var o=Object.keys(t),a=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),E(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return h(t);if(0===o.length){if(b(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(_(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(y(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return h(t)}var v,T="",w=!1,S=["{","}"];(u(t)&&(w=!0,S=["[","]"]),b(t))&&(T=" [Function"+(t.name?": "+t.name:"")+"]");return _(t)&&(T=" "+RegExp.prototype.toString.call(t)),y(t)&&(T=" "+Date.prototype.toUTCString.call(t)),E(t)&&(T=" "+h(t)),0!==o.length||w&&0!=t.length?r<0?_(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),v=w?function(e,t,r,i,n){for(var o=[],a=0,s=t.length;a<s;++a)O(t,String(a))?o.push(c(e,t,r,i,String(a),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(c(e,t,r,i,n,!0))}),o}(e,t,r,a,o):o.map(function(i){return c(e,t,r,a,i,w)}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(v,T,S)):S[0]+T+S[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,r,i,n,o){var a,s,h;if((h=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?s=h.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):h.set&&(s=e.stylize("[Setter]","special")),O(i,n)||(a="["+n+"]"),s||(e.seen.indexOf(h.value)<0?(s=f(r)?l(e,h.value,null):l(e,h.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),g(a)){if(o&&n.match(/^\d+$/))return s;(a=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function u(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function f(e){return null===e}function p(e){return"number"==typeof e}function m(e){return"string"==typeof e}function g(e){return void 0===e}function _(e){return v(e)&&"[object RegExp]"===T(e)}function v(e){return"object"==typeof e&&null!==e}function y(e){return v(e)&&"[object Date]"===T(e)}function E(e){return v(e)&&("[object Error]"===T(e)||e instanceof Error)}function b(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function w(e){return e<10?"0"+e.toString(10):e.toString(10)}Rn.debuglog=function(t){if(g(i)&&(i=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!n[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var r=e.pid;n[t]=function(){var e=Rn.format.apply(Rn,arguments);console.error("%s %d: %s",t,r,e)}}else n[t]=function(){};return n[t]},Rn.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Rn.isArray=u,Rn.isBoolean=d,Rn.isNull=f,Rn.isNullOrUndefined=function(e){return null==e},Rn.isNumber=p,Rn.isString=m,Rn.isSymbol=function(e){return"symbol"==typeof e},Rn.isUndefined=g,Rn.isRegExp=_,Rn.isObject=v,Rn.isDate=y,Rn.isError=E,Rn.isFunction=b,Rn.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},Rn.isBuffer=xn;var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Rn.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[w(e.getHours()),w(e.getMinutes()),w(e.getSeconds())].join(":"),[e.getDate(),S[e.getMonth()],t].join(" ")),Rn.format.apply(Rn,arguments))},Rn.inherits=Nn,Rn._extend=function(e,t){if(!t||!v(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}}).call(this)}).call(this,h,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var kn={},Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.PACKAGE_MAP=void 0;Ln.PACKAGE_MAP={MANIFEST:{NAME:"manifest.json",TYPE:"json"},CONTENT_JSON:{NAME:"content.json",TYPE:"json"},CONTENT_XML:{NAME:"content.xml",TYPE:"xml"},METADATA:{NAME:"metadata.json",TYPE:"json"},THUMBNAILS:{NAME:"Thumbnails",TYPE:"directory"},RESOURCES:{NAME:"resources",TYPE:"directory"}};for(var Dn={byteLength:function(e){var t=zn(e),r=t[0],i=t[1];return 3*(r+i)/4-i},toByteArray:function(e){var t,r,i=zn(e),n=i[0],o=i[1],a=new Un(function(e,t,r){return 3*(t+r)/4-r}(0,n,o)),s=0,l=o>0?n-4:n;for(r=0;r<l;r+=4)t=Mn[e.charCodeAt(r)]<<18|Mn[e.charCodeAt(r+1)]<<12|Mn[e.charCodeAt(r+2)]<<6|Mn[e.charCodeAt(r+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=Mn[e.charCodeAt(r)]<<2|Mn[e.charCodeAt(r+1)]>>4,a[s++]=255&t);1===o&&(t=Mn[e.charCodeAt(r)]<<10|Mn[e.charCodeAt(r+1)]<<4|Mn[e.charCodeAt(r+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},fromByteArray:function(e){for(var t,r=e.length,i=r%3,n=[],o=0,a=r-i;o<a;o+=16383)n.push(Gn(e,o,o+16383>a?a:o+16383));1===i?(t=e[r-1],n.push(Fn[t>>2]+Fn[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],n.push(Fn[t>>10]+Fn[t>>4&63]+Fn[t<<2&63]+"="));return n.join("")}},Fn=[],Mn=[],Un="undefined"!=typeof Uint8Array?Uint8Array:Array,jn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bn=0,Hn=jn.length;Bn<Hn;++Bn)Fn[Bn]=jn[Bn],Mn[jn.charCodeAt(Bn)]=Bn;function zn(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function Gn(e,t,r){for(var i,n,o=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(Fn[(n=i)>>18&63]+Fn[n>>12&63]+Fn[n>>6&63]+Fn[63&n]);return o.join("")}Mn["-".charCodeAt(0)]=62,Mn["_".charCodeAt(0)]=63;var $n={read:function(e,t,r,i,n){var o,a,s=8*n-i-1,l=(1<<s)-1,h=l>>1,c=-7,u=r?n-1:0,d=r?-1:1,f=e[t+u];for(u+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+e[t+u],u+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+e[t+u],u+=d,c-=8);if(0===o)o=1-h;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=h}return(f?-1:1)*a*Math.pow(2,o-i)},write:function(e,t,r,i,n,o){var a,s,l,h=8*o-n-1,c=(1<<h)-1,u=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(a++,l/=2),a+u>=c?(s=0,a=c):a+u>=1?(s=(t*l-1)*Math.pow(2,n),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&s,f+=p,s/=256,n-=8);for(a=a<<n|s,h+=n;h>0;e[r+f]=255&a,f+=p,a/=256,h-=8);e[r+f-p]|=128*m}},Yn={exports:{}};(function(e,t,r){(function(){!function(t){"object"==typeof Yn.exports?Yn.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).JSZip=t()}(function(){return function e(t,r,i){function n(a,s){if(!r[a]){if(!t[a]){var l=require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){return n(t[a][1][e]||e)},c,c.exports,e,t,r,i)}return r[a].exports}for(var o=require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,r){"use strict";var i=e("./utils"),n=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e){for(var t,r,n,a,s,l,h,c=[],u=0,d=e.length,f=d,p="string"!==i.getTypeOf(e);u<e.length;)f=d-u,n=p?(t=e[u++],r=u<d?e[u++]:0,u<d?e[u++]:0):(t=e.charCodeAt(u++),r=u<d?e.charCodeAt(u++):0,u<d?e.charCodeAt(u++):0),a=t>>2,s=(3&t)<<4|r>>4,l=1<f?(15&r)<<2|n>>6:64,h=2<f?63&n:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(h));return c.join("")},r.decode=function(e){var t,r,i,a,s,l,h=0,c=0,u="data:";if(e.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&f--,e.charAt(e.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=n.uint8array?new Uint8Array(0|f):new Array(0|f);h<e.length;)t=o.indexOf(e.charAt(h++))<<2|(a=o.indexOf(e.charAt(h++)))>>4,r=(15&a)<<4|(s=o.indexOf(e.charAt(h++)))>>2,i=(3&s)<<6|(l=o.indexOf(e.charAt(h++))),d[c++]=t,64!==s&&(d[c++]=r),64!==l&&(d[c++]=i);return d}},{"./support":30,"./utils":32}],2:[function(e,t,r){"use strict";var i=e("./external"),n=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,r,i,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=i,this.compressedContent=n}s.prototype={getContentWorker:function(){var e=new n(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new n(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,r){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,r){"use strict";var i=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(e){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,r){"use strict";var i=e("./utils"),n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?function(e,t,r,i){var o=n,a=0+r;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length):function(e,t,r,i){var o=n,a=0+r;e^=-1;for(var s=0;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,t,r){"use strict";var i;i="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:i}},{lie:37}],7:[function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,n=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=i?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}r.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},r.compressWorker=function(e){return new l("Deflate",e)},r.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,r){"use strict";function i(e,t){var r,i="";for(r=0;r<t;r++)i+=String.fromCharCode(255&e),e>>>=8;return i}function n(e,t,r,n,a,c){var u,d,f=e.file,p=e.compression,m=c!==s.utf8encode,g=o.transformTo("string",c(f.name)),_=o.transformTo("string",s.utf8encode(f.name)),v=f.comment,y=o.transformTo("string",c(v)),E=o.transformTo("string",s.utf8encode(v)),b=_.length!==f.name.length,T=E.length!==v.length,w="",S="",O="",A=f.dir,C=f.date,I={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(I.crc32=e.crc32,I.compressedSize=e.compressedSize,I.uncompressedSize=e.uncompressedSize);var P=0;t&&(P|=8),m||!b&&!T||(P|=2048);var x=0,N=0;A&&(x|=16),"UNIX"===a?(N=798,x|=function(e,t){var r=e;return e||(r=A?16893:33204),(65535&r)<<16}(f.unixPermissions)):(N=20,x|=63&(f.dosPermissions||0)),u=C.getUTCHours(),u<<=6,u|=C.getUTCMinutes(),u<<=5,u|=C.getUTCSeconds()/2,d=C.getUTCFullYear()-1980,d<<=4,d|=C.getUTCMonth()+1,d<<=5,d|=C.getUTCDate(),b&&(S=i(1,1)+i(l(g),4)+_,w+="up"+i(S.length,2)+S),T&&(O=i(1,1)+i(l(y),4)+E,w+="uc"+i(O.length,2)+O);var R="";return R+="\n\0",R+=i(P,2),R+=p.magic,R+=i(u,2),R+=i(d,2),R+=i(I.crc32,4),R+=i(I.compressedSize,4),R+=i(I.uncompressedSize,4),R+=i(g.length,2),R+=i(w.length,2),{fileRecord:h.LOCAL_FILE_HEADER+R+g+w,dirRecord:h.CENTRAL_FILE_HEADER+i(N,2)+R+i(y.length,2)+"\0\0\0\0"+i(x,4)+i(n,4)+g+w+y}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),h=e("../signature");function c(e,t,r,i){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,a),c.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-i-1))/r:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=n(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=n(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:function(e){return h.DATA_DESCRIPTOR+i(e.crc32,4)+i(e.compressedSize,4)+i(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,n=function(e,t,r,n,a){var s=o.transformTo("string",a(n));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(e,2)+i(e,2)+i(t,4)+i(r,4)+i(s.length,2)+s}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},c.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,r){"use strict";var i=e("../compressions"),n=e("./ZipFileWorker");r.generateWorker=function(e,t,r){var o=new n(t.streamFiles,r,t.platform,t.encodeFileName),a=0;try{e.forEach(function(e,r){a++;var n=function(e,t){var r=e||t,n=i[r];if(!n)throw new Error(r+" is not a valid compression method !");return n}(r.options.compression,t.compression),s=r.options.compressionOptions||t.compressionOptions||{},l=r.dir,h=r.date;r._compressWorker(n,s).withStreamInfo("file",{name:e,dir:l,date:h,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(o)}),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,r){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.7.1",i.loadAsync=function(e,t){return(new i).loadAsync(e,t)},i.external=e("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,r){"use strict";var i=e("./utils"),n=e("./external"),o=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function h(e){return new n.Promise(function(t,r){var i=e.decompressed.getContentWorker().pipe(new s);i.on("error",function(e){r(e)}).on("end",function(){i.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var r=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?n.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var r=new a(t);return r.load(e),r}).then(function(e){var r=[n.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var o=0;o<i.length;o++)r.push(h(i[o]));return n.Promise.all(r)}).then(function(e){for(var i=e.shift(),n=i.files,o=0;o<n.length;o++){var a=n[o];r.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return i.zipComment.length&&(r.comment=i.zipComment),r})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,r){"use strict";var i=e("../utils"),n=e("../stream/GenericWorker");function o(e,t){n.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}i.inherits(o,n),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},o.prototype.pause=function(){return!!n.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,r){"use strict";var i=e("readable-stream").Readable;function n(e,t,r){i.call(this,t),this._helper=e;var n=this;e.on("data",function(e,t){n.push(e)||n._helper.pause(),r&&r(t)}).on("error",function(e){n.emit("error",e)}).on("end",function(){n.push(null)})}e("../utils").inherits(n,i),n.prototype._read=function(){this._helper.resume()},t.exports=n},{"../utils":32,"readable-stream":16}],14:[function(e,r,i){"use strict";r.exports={isNode:void 0!==t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var r=new t(e);return r.fill(0),r},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,r){"use strict";function i(e,t,r){var i,n=o.getTypeOf(t),s=o.extend(r||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(i=p(e))&&g.call(this,i,!0);var u="string"===n&&!1===s.binary&&!1===s.base64;r&&void 0!==r.binary||(s.binary=!u),(t instanceof h&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",n="string");var _;_=t instanceof h||t instanceof a?t:d.isNode&&d.isStream(t)?new f(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var v=new c(e,_,s);this.files[e]=v}var n=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),h=e("./compressedObject"),c=e("./zipObject"),u=e("./generate"),d=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||i.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function _(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,i;for(t in this.files)i=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,i)},filter:function(e){var t=[];return this.forEach(function(r,i){e(r,i)&&t.push(i)}),t},file:function(e,t,r){if(1!==arguments.length)return e=this.root+e,i.call(this,e,t,r),this;if(_(e)){var n=e;return this.filter(function(e,t){return!t.dir&&n.test(e)})}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(_(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=g.call(this,t),i=this.clone();return i.root=r.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),i=0;i<r.length;i++)delete this.files[r[i].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");o.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var i=r.comment||this.comment||"";t=u.generateWorker(this,r,i)}catch(e){(t=new a("error")).error(e)}return new s(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,r){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,r){"use strict";var i=e("./DataReader");function n(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===i&&this.data[o+3]===n)return o-this.zero;return-1},n.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&r===o[1]&&i===o[2]&&n===o[3]},n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],18:[function(e,t,r){"use strict";var i=e("../utils");function n(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=n},{"../utils":32}],19:[function(e,t,r){"use strict";var i=e("./Uint8ArrayReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,r){"use strict";var i=e("./DataReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./DataReader":18}],21:[function(e,t,r){"use strict";var i=e("./ArrayReader");function n(e){i.call(this,e)}e("../utils").inherits(n,i),n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,r){"use strict";var i=e("../utils"),n=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||n.uint8array?"nodebuffer"===t?new s(e):n.uint8array?new l(i.transformTo("uint8array",e)):new o(i.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,r){"use strict";var i=e("./GenericWorker"),n=e("../utils");function o(e){i.call(this,"ConvertWorker to "+e),this.destType=e}n.inherits(o,i),o.prototype.processChunk=function(e){this.push({data:n.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,r){"use strict";var i=e("./GenericWorker"),n=e("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,i),o.prototype.processChunk=function(e){this.streamInfo.crc32=n(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,r){"use strict";var i=e("../utils"),n=e("./GenericWorker");function o(e){n.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}i.inherits(o,n),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}n.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,r){"use strict";var i=e("../utils"),n=e("./GenericWorker");function o(e){n.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}i.inherits(o,n),o.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,r){"use strict";function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=i},{}],29:[function(e,r,i){"use strict";var n=e("../utils"),o=e("./ConvertWorker"),a=e("./GenericWorker"),s=e("../base64"),l=e("../support"),h=e("../external"),c=null;if(l.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t,r){var i=t;switch(t){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=t,this._mimeType=r,n.checkSupport(i),this._worker=e.pipe(new o(i)),e.lock()}catch(e){this._worker=new a("error"),this._worker.error(e)}}u.prototype={accumulate:function(e){return function(e,r){return new h.Promise(function(i,o){var a=[],l=e._internalType,h=e._outputType,c=e._mimeType;e.on("data",function(e,t){a.push(e),r&&r(t)}).on("error",function(e){a=[],o(e)}).on("end",function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return s.encode(t);default:return n.transformTo(e,t)}}(h,function(e,r){var i,n=0,o=null,a=0;for(i=0;i<r.length;i++)a+=r[i].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(o=new Uint8Array(a),i=0;i<r.length;i++)o.set(r[i],n),n+=r[i].length;return o;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,a),c);i(e)}catch(e){o(e)}a=[]}).resume()})}(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,function(e){t.call(r,e.data,e.meta)}):this._worker.on(e,function(){n.delay(t,arguments,r)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},r.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer=void 0!==t,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(n),i.blob=0===o.getBlob("application/zip").size}catch(e){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(e){i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,r){"use strict";for(var i=e("./utils"),n=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function h(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,r.utf8encode=function(e){return n.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,r,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=n.uint8array?new Uint8Array(l):new Array(l),o=a=0;a<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[a++]=r:(r<2048?t[a++]=192|r>>>6:(r<65536?t[a++]=224|r>>>12:(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63),t[a++]=128|r>>>6&63),t[a++]=128|63&r);return t}(e)},r.utf8decode=function(e){return n.nodebuffer?i.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,n,o,a=e.length,l=new Array(2*a);for(t=r=0;t<a;)if((n=e[t++])<128)l[r++]=n;else if(4<(o=s[n]))l[r++]=65533,t+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&t<a;)n=n<<6|63&e[t++],o--;1<o?l[r++]=65533:n<65536?l[r++]=n:(n-=65536,l[r++]=55296|n>>10&1023,l[r++]=56320|1023&n)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),i.applyFromCharCode(l)}(e=i.transformTo(n.uint8array?"uint8array":"array",e))},i.inherits(h,a),h.prototype.processChunk=function(e){var t=i.transformTo(n.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+s[e[r]]>t?r:t}(t),l=t;a!==t.length&&(n.uint8array?(l=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(l=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:r.utf8decode(l),meta:e.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=h,i.inherits(c,a),c.prototype.processChunk=function(e){this.push({data:r.utf8encode(e.data),meta:e.meta})},r.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){"use strict";var i=e("./support"),n=e("./base64"),o=e("./nodejsUtils"),a=e("set-immediate-shim"),s=e("./external");function l(e){return e}function h(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(r){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,r){var i=[],n=0,o=e.length;if(o<=r)return String.fromCharCode.apply(null,e);for(;n<o;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+r,o)))):i.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+r,o)))),n+=r;return i.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,i=r.getTypeOf(e),n=!0;if("uint8array"===i?n=c.applyCanBeUsed.uint8array:"nodebuffer"===i&&(n=c.applyCanBeUsed.nodebuffer),n)for(;1<t;)try{return c.stringifyByChunk(e,i,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function d(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}r.applyFromCharCode=u;var f={};f.string={string:l,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:function(e){return h(e,o.allocBuffer(e.length))}},f.array={string:u,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},f.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return o.newBufferFrom(e)}},f.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:l},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var i=r.getTypeOf(t);return f[i][e](t)},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":i.nodebuffer&&o.isBuffer(e)?"nodebuffer":i.uint8array&&e instanceof Uint8Array?"uint8array":i.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!i[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,i="";for(r=0;r<(e||"").length;r++)i+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return i},r.delay=function(e,t,r){a(function(){e.apply(r||null,t||[])})},r.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},r.prepareContent=function(e,t,o,a,l){return s.Promise.resolve(t).then(function(e){return i.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise(function(t,r){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){r(e.target.error)},i.readAsArrayBuffer(e)}):e}).then(function(t){var c=r.getTypeOf(t);return c?("arraybuffer"===c?t=r.transformTo("uint8array",t):"string"===c&&(l?t=n.decode(t):o&&!0!==a&&(t=function(e){return h(e,i.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(e,t,r){"use strict";var i=e("./reader/readerFor"),n=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=(e("./utf8"),e("./support"));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+n.pretty(t)+", expected "+n.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===t;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",r=n.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===n.MAX_VALUE_16BITS||this.diskWithCentralDirStart===n.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===n.MAX_VALUE_16BITS||this.centralDirRecords===n.MAX_VALUE_16BITS||this.centralDirSize===n.MAX_VALUE_32BITS||this.centralDirOffset===n.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var i=t-r;if(0<i)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(e,t,r){"use strict";var i=e("./reader/readerFor"),n=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),l=e("./compressions"),h=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+n.pretty(this.compressionMethod)+" unknown (inner file : "+n.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=i(this.extraFields[1].value);this.uncompressedSize===n.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===n.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===n.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===n.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,i,n=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<n;)t=e.readInt(2),r=e.readInt(2),i=e.readData(r),this.extraFields[t]={id:t,length:r,value:i};e.setIndex(n)},handleUTF8:function(){var e=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=n.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=n.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)?null:a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)?null:a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,r){"use strict";function i(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}}var n=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");i.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&i&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new n(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<h.length;u++)i.prototype[h[u]]=c;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(e){"use strict";var t,i,n=e.MutationObserver||e.WebKitMutationObserver;if(n){var o=0,a=new n(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),t=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,t=function(){l.port2.postMessage(0)}}var h=[];function c(){var e,t;i=!0;for(var r=h.length;r;){for(t=h,h=[],e=-1;++e<r;)t[e]();r=h.length}i=!1}r.exports=function(e){1!==h.push(e)||i||t()}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,r){"use strict";var i=e("immediate");function n(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function h(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==n&&f(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function u(e,t,r){i(function(){var i;try{i=t(r)}catch(i){return o.reject(e,i)}i===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,i)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var r=!1;function i(t){r||(r=!0,o.reject(e,t))}function n(t){r||(r=!0,o.resolve(e,t))}var a=p(function(){t(n,i)});"error"===a.status&&i(a.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}(t.exports=h).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){throw r})})},h.prototype.catch=function(e){return this.then(null,e)},h.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(n);return this.state!==l?u(r,this.state===s?e:t,this.outcome):this.queue.push(new c(r,e,t)),r},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=p(d,t);if("error"===r.status)return o.reject(e,r.value);var i=r.value;if(i)f(e,i);else{e.state=s,e.outcome=t;for(var n=-1,a=e.queue.length;++n<a;)e.queue[n].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callRejected(t);return e},h.resolve=function(e){return e instanceof this?e:o.resolve(new this(n),e)},h.reject=function(e){var t=new this(n);return o.reject(t,e)},h.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,l=-1,h=new this(n);++l<r;)c(e[l],l);return h;function c(e,n){t.resolve(e).then(function(e){a[n]=e,++s!==r||i||(i=!0,o.resolve(h,a))},function(e){i||(i=!0,o.reject(h,e))})}},h.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var i,a=-1,s=new this(n);++a<t;)i=e[a],this.resolve(i).then(function(e){r||(r=!0,o.resolve(s,e))},function(e){r||(r=!0,o.reject(s,e))});return s}},{immediate:36}],38:[function(e,t,r){"use strict";var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,r){"use strict";var i=e("./zlib/deflate"),n=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,h=0,c=-1,u=0,d=8;function f(e){if(!(this instanceof f))return new f(e);this.options=n.assign({level:c,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==h)throw new Error(a[r]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=i.deflateSetDictionary(this.strm,p))!==h)throw new Error(a[r]);this._dict_set=!0}}function p(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}f.prototype.push=function(e,t){var r,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new n.Buf8(c),s.next_out=0,s.avail_out=c),1!==(r=i.deflate(s,a))&&r!==h)return this.onEnd(r),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(n.shrinkBuf(s.output,s.next_out))):this.onData(n.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==r);return 4===a?(r=i.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===h):2!==a||(this.onEnd(h),!(s.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=f,r.deflate=p,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,r){"use strict";var i=e("./zlib/inflate"),n=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),h=e("./zlib/gzheader"),c=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=i.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function d(e,t){var r=new u(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}u.prototype.push=function(e,t){var r,s,l,h,u,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new n.Buf8(p),f.next_out=0,f.avail_out=p),(r=i.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(d="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,r=i.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===g&&(r=a.Z_OK,g=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&r!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(f.output,f.next_out),h=f.next_out-l,u=o.buf2string(f.output,l),f.next_out=h,f.avail_out=p-h,h&&n.arraySet(f.output,f.output,l,h,0),this.onData(u)):this.onData(n.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(f.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=u,r.inflate=d,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,r){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+i),n);else for(var o=0;o<i;o++)e[n+o]=t[r+o]},flattenChunks:function(e){var t,r,i,n,o,a;for(t=i=0,r=e.length;t<r;t++)i+=e[t].length;for(a=new Uint8Array(i),t=n=0,r=e.length;t<r;t++)o=e[t],a.set(o,n),n+=o.length;return a}},o={arraySet:function(e,t,r,i,n){for(var o=0;o<i;o++)e[n+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(i)},{}],42:[function(e,t,r){"use strict";var i=e("./common"),n=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new i.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&n))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}a[254]=a[254]=1,r.string2buf=function(e){var t,r,n,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new i.Buf8(l),o=a=0;a<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[a++]=r:(r<2048?t[a++]=192|r>>>6:(r<65536?t[a++]=224|r>>>12:(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63),t[a++]=128|r>>>6&63),t[a++]=128|63&r);return t},r.buf2binstring=function(e){return l(e,e.length)},r.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,i,n,o,s=t||e.length,h=new Array(2*s);for(r=i=0;r<s;)if((n=e[r++])<128)h[i++]=n;else if(4<(o=a[n]))h[i++]=65533,r+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&r<s;)n=n<<6|63&e[r++],o--;1<o?h[i++]=65533:n<65536?h[i++]=n:(n-=65536,h[i++]=55296|n>>10&1023,h[i++]=56320|1023&n)}return l(h,i)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;0<=r&&128==(192&e[r]);)r--;return r<0?t:0===r?t:r+a[e[r]]>t?r:t}},{"./common":41}],43:[function(e,t,r){"use strict";t.exports=function(e,t,r,i){for(var n=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;o=o+(n=n+t[i++]|0)|0,--a;);n%=65521,o%=65521}return n|o<<16|0}},{}],44:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,r){"use strict";var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,n){var o=i,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,r){"use strict";var i,n=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),l=e("./messages"),h=0,c=4,u=0,d=-2,f=-1,p=4,m=2,g=8,_=9,v=286,y=30,E=19,b=2*v+1,T=15,w=3,S=258,O=S+w+1,A=42,C=113,I=1,P=2,x=3,N=4;function R(e,t){return e.msg=l[t],t}function k(e){return(e<<1)-(4<e?9:0)}function L(e){for(var t=e.length;0<=--t;)e[t]=0}function D(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function F(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)}function M(e,t){e.pending_buf[e.pending++]=t}function U(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function j(e,t){var r,i,n=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-O?e.strstart-(e.w_size-O):0,h=e.window,c=e.w_mask,u=e.prev,d=e.strstart+S,f=h[o+a-1],p=h[o+a];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(h[(r=t)+a]===p&&h[r+a-1]===f&&h[r]===h[o]&&h[++r]===h[o+1]){o+=2,r++;do{}while(h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&h[++o]===h[++r]&&o<d);if(i=S-(d-o),o=d-S,a<i){if(e.match_start=t,s<=(a=i))break;f=h[o+a-1],p=h[o+a]}}}while((t=u[t&c])>l&&0!=--n);return a<=e.lookahead?a:e.lookahead}function B(e){var t,r,i,o,l,h,c,u,d,f,p=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-O)){for(n.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=r=e.hash_size;i=e.head[--t],e.head[t]=p<=i?i-p:0,--r;);for(t=r=p;i=e.prev[--t],e.prev[t]=p<=i?i-p:0,--r;);o+=p}if(0===e.strm.avail_in)break;if(h=e.strm,c=e.window,u=e.strstart+e.lookahead,f=void 0,(d=o)<(f=h.avail_in)&&(f=d),r=0===f?0:(h.avail_in-=f,n.arraySet(c,h.input,h.next_in,f,u),1===h.state.wrap?h.adler=a(h.adler,c,f,u):2===h.state.wrap&&(h.adler=s(h.adler,c,f,u)),h.next_in+=f,h.total_in+=f,f),e.lookahead+=r,e.lookahead+e.insert>=w)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+w-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<w)););}while(e.lookahead<O&&0!==e.strm.avail_in)}function H(e,t){for(var r,i;;){if(e.lookahead<O){if(B(e),e.lookahead<O&&t===h)return I;if(0===e.lookahead)break}if(r=0,e.lookahead>=w&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-O&&(e.match_length=j(e,r)),e.match_length>=w)if(i=o._tr_tally(e,e.strstart-e.match_start,e.match_length-w),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=w){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(F(e,!1),0===e.strm.avail_out))return I}return e.insert=e.strstart<w-1?e.strstart:w-1,t===c?(F(e,!0),0===e.strm.avail_out?x:N):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?I:P}function z(e,t){for(var r,i,n;;){if(e.lookahead<O){if(B(e),e.lookahead<O&&t===h)return I;if(0===e.lookahead)break}if(r=0,e.lookahead>=w&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=w-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-O&&(e.match_length=j(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===w&&4096<e.strstart-e.match_start)&&(e.match_length=w-1)),e.prev_length>=w&&e.match_length<=e.prev_length){for(n=e.strstart+e.lookahead-w,i=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-w),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=w-1,e.strstart++,i&&(F(e,!1),0===e.strm.avail_out))return I}else if(e.match_available){if((i=o._tr_tally(e,0,e.window[e.strstart-1]))&&F(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return I}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<w-1?e.strstart:w-1,t===c?(F(e,!0),0===e.strm.avail_out?x:N):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?I:P}function G(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(2*b),this.dyn_dtree=new n.Buf16(2*(2*y+1)),this.bl_tree=new n.Buf16(2*(2*E+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(T+1),this.heap=new n.Buf16(2*v+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*v+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?A:C,e.adler=2===t.wrap?0:1,t.last_flush=h,o._tr_init(t),u):R(e,d)}function W(e){var t=Y(e);return t===u&&function(e){e.window_size=2*e.w_size,L(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=w-1,e.match_available=0,e.ins_h=0}(e.state),t}function V(e,t,r,i,o,a){if(!e)return d;var s=1;if(t===f&&(t=6),i<0?(s=0,i=-i):15<i&&(s=2,i-=16),o<1||_<o||r!==g||i<8||15<i||t<0||9<t||a<0||p<a)return R(e,d);8===i&&(i=9);var l=new $;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+w-1)/w),l.window=new n.Buf8(2*l.w_size),l.head=new n.Buf16(l.hash_size),l.prev=new n.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new n.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=r,W(e)}i=[new G(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(B(e),0===e.lookahead&&t===h)return I;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,F(e,!1),0===e.strm.avail_out))return I;if(e.strstart-e.block_start>=e.w_size-O&&(F(e,!1),0===e.strm.avail_out))return I}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?x:N):(e.strstart>e.block_start&&(F(e,!1),e.strm.avail_out),I)}),new G(4,4,8,4,H),new G(4,5,16,8,H),new G(4,6,32,32,H),new G(4,4,16,16,z),new G(8,16,32,32,z),new G(8,16,128,128,z),new G(8,32,128,256,z),new G(32,128,258,1024,z),new G(32,258,258,4096,z)],r.deflateInit=function(e,t){return V(e,t,g,15,8,0)},r.deflateInit2=V,r.deflateReset=W,r.deflateResetKeep=Y,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,u):d},r.deflate=function(e,t){var r,n,a,l;if(!e||!e.state||5<t||t<0)return e?R(e,d):d;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&t!==c)return R(e,0===e.avail_out?-5:d);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===A)if(2===n.wrap)e.adler=0,M(n,31),M(n,139),M(n,8),n.gzhead?(M(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),M(n,255&n.gzhead.time),M(n,n.gzhead.time>>8&255),M(n,n.gzhead.time>>16&255),M(n,n.gzhead.time>>24&255),M(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),M(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(M(n,255&n.gzhead.extra.length),M(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=s(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(M(n,0),M(n,0),M(n,0),M(n,0),M(n,0),M(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),M(n,3),n.status=C);else{var f=g+(n.w_bits-8<<4)<<8;f|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(f|=32),f+=31-f%31,n.status=C,U(n,f),0!==n.strstart&&(U(n,e.adler>>>16),U(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(a=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),D(e),a=n.pending,n.pending!==n.pending_buf_size));)M(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),D(e),a=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,M(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),0===l&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){a=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),D(e),a=n.pending,n.pending===n.pending_buf_size)){l=1;break}l=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,M(n,l)}while(0!==l);n.gzhead.hcrc&&n.pending>a&&(e.adler=s(e.adler,n.pending_buf,n.pending-a,a)),0===l&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&D(e),n.pending+2<=n.pending_buf_size&&(M(n,255&e.adler),M(n,e.adler>>8&255),e.adler=0,n.status=C)):n.status=C),0!==n.pending){if(D(e),0===e.avail_out)return n.last_flush=-1,u}else if(0===e.avail_in&&k(t)<=k(r)&&t!==c)return R(e,-5);if(666===n.status&&0!==e.avail_in)return R(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==h&&666!==n.status){var p=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(B(e),0===e.lookahead)){if(t===h)return I;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(F(e,!1),0===e.strm.avail_out))return I}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?x:N):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?I:P}(n,t):3===n.strategy?function(e,t){for(var r,i,n,a,s=e.window;;){if(e.lookahead<=S){if(B(e),e.lookahead<=S&&t===h)return I;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=w&&0<e.strstart&&(i=s[n=e.strstart-1])===s[++n]&&i===s[++n]&&i===s[++n]){a=e.strstart+S;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<a);e.match_length=S-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=w?(r=o._tr_tally(e,1,e.match_length-w),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(F(e,!1),0===e.strm.avail_out))return I}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?x:N):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?I:P}(n,t):i[n.level].func(n,t);if(p!==x&&p!==N||(n.status=666),p===I||p===x)return 0===e.avail_out&&(n.last_flush=-1),u;if(p===P&&(1===t?o._tr_align(n):5!==t&&(o._tr_stored_block(n,0,0,!1),3===t&&(L(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),D(e),0===e.avail_out))return n.last_flush=-1,u}return t!==c?u:n.wrap<=0?1:(2===n.wrap?(M(n,255&e.adler),M(n,e.adler>>8&255),M(n,e.adler>>16&255),M(n,e.adler>>24&255),M(n,255&e.total_in),M(n,e.total_in>>8&255),M(n,e.total_in>>16&255),M(n,e.total_in>>24&255)):(U(n,e.adler>>>16),U(n,65535&e.adler)),D(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?u:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==A&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?R(e,d):(e.state=null,t===C?R(e,-3):u):d},r.deflateSetDictionary=function(e,t){var r,i,o,s,l,h,c,f,p=t.length;if(!e||!e.state)return d;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==A||r.lookahead)return d;for(1===s&&(e.adler=a(e.adler,t,p,0)),r.wrap=0,p>=r.w_size&&(0===s&&(L(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new n.Buf8(r.w_size),n.arraySet(f,t,p-r.w_size,r.w_size,0),t=f,p=r.w_size),l=e.avail_in,h=e.next_in,c=e.input,e.avail_in=p,e.next_in=0,e.input=t,B(r);r.lookahead>=w;){for(i=r.strstart,o=r.lookahead-(w-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+w-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++,--o;);r.strstart=i,r.lookahead=w-1,B(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=w-1,r.match_available=0,e.next_in=h,e.input=c,e.avail_in=l,r.wrap=s,u},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,r){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,r){"use strict";t.exports=function(e,t){var r,i,n,o,a,s,l,h,c,u,d,f,p,m,g,_,v,y,E,b,T,w,S,O,A;r=e.state,i=e.next_in,O=e.input,n=i+(e.avail_in-5),o=e.next_out,A=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=r.dmax,h=r.wsize,c=r.whave,u=r.wnext,d=r.window,f=r.hold,p=r.bits,m=r.lencode,g=r.distcode,_=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;e:do{p<15&&(f+=O[i++]<<p,p+=8,f+=O[i++]<<p,p+=8),y=m[f&_];t:for(;;){if(f>>>=E=y>>>24,p-=E,0==(E=y>>>16&255))A[o++]=65535&y;else{if(!(16&E)){if(0==(64&E)){y=m[(65535&y)+(f&(1<<E)-1)];continue t}if(32&E){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}b=65535&y,(E&=15)&&(p<E&&(f+=O[i++]<<p,p+=8),b+=f&(1<<E)-1,f>>>=E,p-=E),p<15&&(f+=O[i++]<<p,p+=8,f+=O[i++]<<p,p+=8),y=g[f&v];r:for(;;){if(f>>>=E=y>>>24,p-=E,!(16&(E=y>>>16&255))){if(0==(64&E)){y=g[(65535&y)+(f&(1<<E)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(T=65535&y,p<(E&=15)&&(f+=O[i++]<<p,(p+=8)<E&&(f+=O[i++]<<p,p+=8)),l<(T+=f&(1<<E)-1)){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=E,p-=E,(E=o-a)<T){if(c<(E=T-E)&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=d,(w=0)===u){if(w+=h-E,E<b){for(b-=E;A[o++]=d[w++],--E;);w=o-T,S=A}}else if(u<E){if(w+=h+u-E,(E-=u)<b){for(b-=E;A[o++]=d[w++],--E;);if(w=0,u<b){for(b-=E=u;A[o++]=d[w++],--E;);w=o-T,S=A}}}else if(w+=u-E,E<b){for(b-=E;A[o++]=d[w++],--E;);w=o-T,S=A}for(;2<b;)A[o++]=S[w++],A[o++]=S[w++],A[o++]=S[w++],b-=3;b&&(A[o++]=S[w++],1<b&&(A[o++]=S[w++]))}else{for(w=o-T;A[o++]=A[w++],A[o++]=A[w++],A[o++]=A[w++],2<(b-=3););b&&(A[o++]=A[w++],1<b&&(A[o++]=A[w++]))}break}}break}}while(i<n&&o<s);i-=b=p>>3,f&=(1<<(p-=b<<3))-1,e.next_in=i,e.next_out=o,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=f,r.bits=p}},{}],49:[function(e,t,r){"use strict";var i=e("../utils/common"),n=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),l=1,h=2,c=0,u=-2,d=1,f=852,p=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(f),t.distcode=t.distdyn=new i.Buf32(p),t.sane=1,t.back=-1,c):u}function v(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,_(e)):u}function y(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?u:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,v(e))):u}function E(e,t){var r,i;return e?(i=new g,(e.state=i).window=null,(r=y(e,t))!==c&&(e.state=null),r):u}var b,T,w=!0;function S(e){if(w){var t;for(b=new i.Buf32(512),T=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(h,e.lens,0,32,T,0,e.work,{bits:5}),w=!1}e.lencode=b,e.lenbits=9,e.distcode=T,e.distbits=5}function O(e,t,r,n){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),n>=a.wsize?(i.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(n<(o=a.wsize-a.wnext)&&(o=n),i.arraySet(a.window,t,r-n,o,a.wnext),(n-=o)?(i.arraySet(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}r.inflateReset=v,r.inflateReset2=y,r.inflateResetKeep=_,r.inflateInit=function(e){return E(e,15)},r.inflateInit2=E,r.inflate=function(e,t){var r,f,p,g,_,v,y,E,b,T,w,A,C,I,P,x,N,R,k,L,D,F,M,U,j=0,B=new i.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;12===(r=e.state).mode&&(r.mode=13),_=e.next_out,p=e.output,y=e.avail_out,g=e.next_in,f=e.input,v=e.avail_in,E=r.hold,b=r.bits,T=v,w=y,F=c;e:for(;;)switch(r.mode){case d:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(2&r.wrap&&35615===E){B[r.check=0]=255&E,B[1]=E>>>8&255,r.check=o(r.check,B,2,0),b=E=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&E)<<8)+(E>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&E)){e.msg="unknown compression method",r.mode=30;break}if(b-=4,D=8+(15&(E>>>=4)),0===r.wbits)r.wbits=D;else if(D>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<D,e.adler=r.check=1,r.mode=512&E?10:12,b=E=0;break;case 2:for(;b<16;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(r.flags=E,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=E>>8&1),512&r.flags&&(B[0]=255&E,B[1]=E>>>8&255,r.check=o(r.check,B,2,0)),b=E=0,r.mode=3;case 3:for(;b<32;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}r.head&&(r.head.time=E),512&r.flags&&(B[0]=255&E,B[1]=E>>>8&255,B[2]=E>>>16&255,B[3]=E>>>24&255,r.check=o(r.check,B,4,0)),b=E=0,r.mode=4;case 4:for(;b<16;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}r.head&&(r.head.xflags=255&E,r.head.os=E>>8),512&r.flags&&(B[0]=255&E,B[1]=E>>>8&255,r.check=o(r.check,B,2,0)),b=E=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}r.length=E,r.head&&(r.head.extra_len=E),512&r.flags&&(B[0]=255&E,B[1]=E>>>8&255,r.check=o(r.check,B,2,0)),b=E=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(v<(A=r.length)&&(A=v),A&&(r.head&&(D=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,f,g,A,D)),512&r.flags&&(r.check=o(r.check,f,A,g)),v-=A,g+=A,r.length-=A),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===v)break e;for(A=0;D=f[g+A++],r.head&&D&&r.length<65536&&(r.head.name+=String.fromCharCode(D)),D&&A<v;);if(512&r.flags&&(r.check=o(r.check,f,A,g)),v-=A,g+=A,D)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===v)break e;for(A=0;D=f[g+A++],r.head&&D&&r.length<65536&&(r.head.comment+=String.fromCharCode(D)),D&&A<v;);if(512&r.flags&&(r.check=o(r.check,f,A,g)),v-=A,g+=A,D)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(E!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}b=E=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;b<32;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}e.adler=r.check=m(E),b=E=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=_,e.avail_out=y,e.next_in=g,e.avail_in=v,r.hold=E,r.bits=b,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){E>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}switch(r.last=1&E,b-=1,3&(E>>>=1)){case 0:r.mode=14;break;case 1:if(S(r),r.mode=20,6!==t)break;E>>>=2,b-=2;break e;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}E>>>=2,b-=2;break;case 14:for(E>>>=7&b,b-=7&b;b<32;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if((65535&E)!=(E>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&E,b=E=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(A=r.length){if(v<A&&(A=v),y<A&&(A=y),0===A)break e;i.arraySet(p,f,g,A,_),v-=A,g+=A,y-=A,_+=A,r.length-=A;break}r.mode=12;break;case 17:for(;b<14;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(r.nlen=257+(31&E),E>>>=5,b-=5,r.ndist=1+(31&E),E>>>=5,b-=5,r.ncode=4+(15&E),E>>>=4,b-=4,286<r.nlen||30<r.ndist){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}r.lens[H[r.have++]]=7&E,E>>>=3,b-=3}for(;r.have<19;)r.lens[H[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},F=s(0,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,F){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;x=(j=r.lencode[E&(1<<r.lenbits)-1])>>>16&255,N=65535&j,!((P=j>>>24)<=b);){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(N<16)E>>>=P,b-=P,r.lens[r.have++]=N;else{if(16===N){for(U=P+2;b<U;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(E>>>=P,b-=P,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}D=r.lens[r.have-1],A=3+(3&E),E>>>=2,b-=2}else if(17===N){for(U=P+3;b<U;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}b-=P,D=0,A=3+(7&(E>>>=P)),E>>>=3,b-=3}else{for(U=P+7;b<U;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}b-=P,D=0,A=11+(127&(E>>>=P)),E>>>=7,b-=7}if(r.have+A>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;A--;)r.lens[r.have++]=D}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,M={bits:r.lenbits},F=s(l,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,F){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},F=s(h,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,F){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(6<=v&&258<=y){e.next_out=_,e.avail_out=y,e.next_in=g,e.avail_in=v,r.hold=E,r.bits=b,a(e,w),_=e.next_out,p=e.output,y=e.avail_out,g=e.next_in,f=e.input,v=e.avail_in,E=r.hold,b=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;x=(j=r.lencode[E&(1<<r.lenbits)-1])>>>16&255,N=65535&j,!((P=j>>>24)<=b);){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(x&&0==(240&x)){for(R=P,k=x,L=N;x=(j=r.lencode[L+((E&(1<<R+k)-1)>>R)])>>>16&255,N=65535&j,!(R+(P=j>>>24)<=b);){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}E>>>=R,b-=R,r.back+=R}if(E>>>=P,b-=P,r.back+=P,r.length=N,0===x){r.mode=26;break}if(32&x){r.back=-1,r.mode=12;break}if(64&x){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&x,r.mode=22;case 22:if(r.extra){for(U=r.extra;b<U;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}r.length+=E&(1<<r.extra)-1,E>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;x=(j=r.distcode[E&(1<<r.distbits)-1])>>>16&255,N=65535&j,!((P=j>>>24)<=b);){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(0==(240&x)){for(R=P,k=x,L=N;x=(j=r.distcode[L+((E&(1<<R+k)-1)>>R)])>>>16&255,N=65535&j,!(R+(P=j>>>24)<=b);){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}E>>>=R,b-=R,r.back+=R}if(E>>>=P,b-=P,r.back+=P,64&x){e.msg="invalid distance code",r.mode=30;break}r.offset=N,r.extra=15&x,r.mode=24;case 24:if(r.extra){for(U=r.extra;b<U;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}r.offset+=E&(1<<r.extra)-1,E>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===y)break e;if(A=w-y,r.offset>A){if((A=r.offset-A)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}C=A>r.wnext?(A-=r.wnext,r.wsize-A):r.wnext-A,A>r.length&&(A=r.length),I=r.window}else I=p,C=_-r.offset,A=r.length;for(y<A&&(A=y),y-=A,r.length-=A;p[_++]=I[C++],--A;);0===r.length&&(r.mode=21);break;case 26:if(0===y)break e;p[_++]=r.length,y--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===v)break e;v--,E|=f[g++]<<b,b+=8}if(w-=y,e.total_out+=w,r.total+=w,w&&(e.adler=r.check=r.flags?o(r.check,p,w,_-w):n(r.check,p,w,_-w)),w=y,(r.flags?E:m(E))!==r.check){e.msg="incorrect data check",r.mode=30;break}b=E=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===v)break e;v--,E+=f[g++]<<b,b+=8}if(E!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}b=E=0}r.mode=29;case 29:F=1;break e;case 30:F=-3;break e;case 31:return-4;case 32:default:return u}return e.next_out=_,e.avail_out=y,e.next_in=g,e.avail_in=v,r.hold=E,r.bits=b,(r.wsize||w!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&O(e,e.output,e.next_out,w-e.avail_out)?(r.mode=31,-4):(T-=e.avail_in,w-=e.avail_out,e.total_in+=T,e.total_out+=w,r.total+=w,r.wrap&&w&&(e.adler=r.check=r.flags?o(r.check,p,w,e.next_out-w):n(r.check,p,w,e.next_out-w)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0==T&&0===w||4===t)&&F===c&&(F=-5),F)},r.inflateEnd=function(e){if(!e||!e.state)return u;var t=e.state;return t.window&&(t.window=null),e.state=null,c},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?u:((r.head=t).done=!1,c):u},r.inflateSetDictionary=function(e,t){var r,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?u:11===r.mode&&n(1,t,i,0)!==r.check?-3:O(e,t,i,i)?(r.mode=31,-4):(r.havedict=1,c):u},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,r){"use strict";var i=e("../utils/common"),n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,l,h,c,u,d){var f,p,m,g,_,v,y,E,b,T=d.bits,w=0,S=0,O=0,A=0,C=0,I=0,P=0,x=0,N=0,R=0,k=null,L=0,D=new i.Buf16(16),F=new i.Buf16(16),M=null,U=0;for(w=0;w<=15;w++)D[w]=0;for(S=0;S<l;S++)D[t[r+S]]++;for(C=T,A=15;1<=A&&0===D[A];A--);if(A<C&&(C=A),0===A)return h[c++]=20971520,h[c++]=20971520,d.bits=1,0;for(O=1;O<A&&0===D[O];O++);for(C<O&&(C=O),w=x=1;w<=15;w++)if(x<<=1,(x-=D[w])<0)return-1;if(0<x&&(0===e||1!==A))return-1;for(F[1]=0,w=1;w<15;w++)F[w+1]=F[w]+D[w];for(S=0;S<l;S++)0!==t[r+S]&&(u[F[t[r+S]]++]=S);if(v=0===e?(k=M=u,19):1===e?(k=n,L-=257,M=o,U-=257,256):(k=a,M=s,-1),w=O,_=c,P=S=R=0,m=-1,g=(N=1<<(I=C))-1,1===e&&852<N||2===e&&592<N)return 1;for(;;){for(y=w-P,b=u[S]<v?(E=0,u[S]):u[S]>v?(E=M[U+u[S]],k[L+u[S]]):(E=96,0),f=1<<w-P,O=p=1<<I;h[_+(R>>P)+(p-=f)]=y<<24|E<<16|b|0,0!==p;);for(f=1<<w-1;R&f;)f>>=1;if(0!==f?(R&=f-1,R+=f):R=0,S++,0==--D[w]){if(w===A)break;w=t[r+u[S]]}if(C<w&&(R&g)!==m){for(0===P&&(P=C),_+=O,x=1<<(I=w-P);I+P<A&&!((x-=D[I+P])<=0);)I++,x<<=1;if(N+=1<<I,1===e&&852<N||2===e&&592<N)return 1;h[m=R&g]=C<<24|I<<16|_-c|0}}return 0!==R&&(h[_+R]=w-P<<24|64<<16|0),d.bits=C,0}},{"../utils/common":41}],51:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,r){"use strict";var i=e("../utils/common");function n(e){for(var t=e.length;0<=--t;)e[t]=0}var o=0,a=256,s=a+1+29,l=30,h=19,c=2*s+1,u=15,d=16,f=256,p=16,m=17,g=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],v=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],b=new Array(2*(s+2));n(b);var T=new Array(2*l);n(T);var w=new Array(512);n(w);var S=new Array(256);n(S);var O=new Array(29);n(O);var A,C,I,P=new Array(l);function x(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function N(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function R(e){return e<256?w[e]:w[256+(e>>>7)]}function k(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function L(e,t,r){e.bi_valid>d-r?(e.bi_buf|=t<<e.bi_valid&65535,k(e,e.bi_buf),e.bi_buf=t>>d-e.bi_valid,e.bi_valid+=r-d):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function D(e,t,r){L(e,r[2*t],r[2*t+1])}function F(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function M(e,t,r){var i,n,o=new Array(u+1),a=0;for(i=1;i<=u;i++)o[i]=a=a+r[i-1]<<1;for(n=0;n<=t;n++){var s=e[2*n+1];0!==s&&(e[2*n]=F(o[s]++,s))}}function U(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*f]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function j(e){8<e.bi_valid?k(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function B(e,t,r,i){var n=2*t,o=2*r;return e[n]<e[o]||e[n]===e[o]&&i[t]<=i[r]}function H(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&B(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!B(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function z(e,t,r){var i,n,o,s,l=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],n=e.pending_buf[e.l_buf+l],l++,0===i?D(e,n,t):(D(e,(o=S[n])+a+1,t),0!==(s=_[o])&&L(e,n-=O[o],s),D(e,o=R(--i),r),0!==(s=v[o])&&L(e,i-=P[o],s)),l<e.last_lit;);D(e,f,t)}function G(e,t){var r,i,n,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,h=-1;for(e.heap_len=0,e.heap_max=c,r=0;r<l;r++)0!==o[2*r]?(e.heap[++e.heap_len]=h=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(n=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[n]=0,e.opt_len--,s&&(e.static_len-=a[2*n+1]);for(t.max_code=h,r=e.heap_len>>1;1<=r;r--)H(e,o,r);for(n=l;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],H(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,o[2*n]=o[2*r]+o[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,o[2*r+1]=o[2*i+1]=n,e.heap[1]=n++,H(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,i,n,o,a,s,l=t.dyn_tree,h=t.max_code,d=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,g=t.stat_desc.max_length,_=0;for(o=0;o<=u;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<c;r++)g<(o=l[2*l[2*(i=e.heap[r])+1]+1]+1)&&(o=g,_++),l[2*i+1]=o,h<i||(e.bl_count[o]++,a=0,m<=i&&(a=p[i-m]),s=l[2*i],e.opt_len+=s*(o+a),f&&(e.static_len+=s*(d[2*i+1]+a)));if(0!==_){do{for(o=g-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[g]--,_-=2}while(0<_);for(o=g;0!==o;o--)for(i=e.bl_count[o];0!==i;)h<(n=e.heap[--r])||(l[2*n+1]!==o&&(e.opt_len+=(o-l[2*n+1])*l[2*n],l[2*n+1]=o),i--)}}(e,t),M(o,h,e.bl_count)}function $(e,t,r){var i,n,o=-1,a=t[1],s=0,l=7,h=4;for(0===a&&(l=138,h=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=a,a=t[2*(i+1)+1],++s<l&&n===a||(s<h?e.bl_tree[2*n]+=s:0!==n?(n!==o&&e.bl_tree[2*n]++,e.bl_tree[2*p]++):s<=10?e.bl_tree[2*m]++:e.bl_tree[2*g]++,o=n,h=(s=0)===a?(l=138,3):n===a?(l=6,3):(l=7,4))}function Y(e,t,r){var i,n,o=-1,a=t[1],s=0,l=7,h=4;for(0===a&&(l=138,h=3),i=0;i<=r;i++)if(n=a,a=t[2*(i+1)+1],!(++s<l&&n===a)){if(s<h)for(;D(e,n,e.bl_tree),0!=--s;);else 0!==n?(n!==o&&(D(e,n,e.bl_tree),s--),D(e,p,e.bl_tree),L(e,s-3,2)):s<=10?(D(e,m,e.bl_tree),L(e,s-3,3)):(D(e,g,e.bl_tree),L(e,s-11,7));o=n,h=(s=0)===a?(l=138,3):n===a?(l=6,3):(l=7,4)}}n(P);var W=!1;function V(e,t,r,n){L(e,(o<<1)+(n?1:0),3),function(e,t,r,n){j(e),k(e,r),k(e,~r),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r)}r._tr_init=function(e){W||(function(){var e,t,r,i,n,o=new Array(u+1);for(i=r=0;i<28;i++)for(O[i]=r,e=0;e<1<<_[i];e++)S[r++]=i;for(S[r-1]=i,i=n=0;i<16;i++)for(P[i]=n,e=0;e<1<<v[i];e++)w[n++]=i;for(n>>=7;i<l;i++)for(P[i]=n<<7,e=0;e<1<<v[i]-7;e++)w[256+n++]=i;for(t=0;t<=u;t++)o[t]=0;for(e=0;e<=143;)b[2*e+1]=8,e++,o[8]++;for(;e<=255;)b[2*e+1]=9,e++,o[9]++;for(;e<=279;)b[2*e+1]=7,e++,o[7]++;for(;e<=287;)b[2*e+1]=8,e++,o[8]++;for(M(b,s+1,o),e=0;e<l;e++)T[2*e+1]=5,T[2*e]=F(e,5);A=new x(b,_,a+1,s,u),C=new x(T,v,0,l,u),I=new x(new Array(0),y,0,h,7)}(),W=!0),e.l_desc=new N(e.dyn_ltree,A),e.d_desc=new N(e.dyn_dtree,C),e.bl_desc=new N(e.bl_tree,I),e.bi_buf=0,e.bi_valid=0,U(e)},r._tr_stored_block=V,r._tr_flush_block=function(e,t,r,i){var n,o,s=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),G(e,e.l_desc),G(e,e.d_desc),s=function(e){var t;for($(e,e.dyn_ltree,e.l_desc.max_code),$(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=h-1;3<=t&&0===e.bl_tree[2*E[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=n&&(n=o)):n=o=r+5,r+4<=n&&-1!==t?V(e,t,r,i):4===e.strategy||o===n?(L(e,2+(i?1:0),3),z(e,b,T)):(L(e,4+(i?1:0),3),function(e,t,r,i){var n;for(L(e,t-257,5),L(e,r-1,5),L(e,i-4,4),n=0;n<i;n++)L(e,e.bl_tree[2*E[n]+1],3);Y(e,e.dyn_ltree,t-1),Y(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),z(e,e.dyn_ltree,e.dyn_dtree)),U(e),i&&j(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(S[r]+a+1)]++,e.dyn_dtree[2*R(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){L(e,2,3),D(e,f,b),function(e){16===e.bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,i){"use strict";t.exports="function"==typeof r?r:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}},{}]},{},[10])(10)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r({}).Buffer,t({}).setImmediate),Yn=Yn.exports;function Wn(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var Vn={};(function(e,t,r){(function(){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.Zipper=void 0;const n="win32"===t.platform?Pn.win32.join:Pn.join,o=".xmind",a=`default${o}`;Vn.Zipper=class extends F.default{constructor(e){if(super({debug:"xmind-sdk:zipper"}),!e.path||!kn.existsSync(e.path))throw this.debug("received %s",e.path),new Error("the `path` is required or must exists");this.filename=e.filename||a,this.filename=this.filename.endsWith(o)?this.filename:`${this.filename}${o}`,this.path=e.path,this.zip=new Yn,this.workbook=e.workbook||null,this.manifest={"file-entries":{"content.json":{},"metadata.json":{}}}}save(){return i(this,void 0,void 0,function*(){this.workbook&&(this.addJSONContent(this.workbook.toString()),this.addMetadataContents(),this.addXMLContent(),this.addManifestContents());const e=yield this.zip.generateAsync({type:"nodebuffer",compression:"STORE",platform:"UNIX"}),t=n(this.path,this.filename);return Rn.promisify(kn.writeFile)(t,e).then(()=>!0).catch(()=>!1)})}updateManifestMetadata(t,r){if(!t)return this;if(!r||!e.isBuffer(r))return this;const i=t.split("/");return this.manifest["file-entries"][t]={},this.zip.folder(i[0]).file(i[1],r,{binary:!0}),this}removeManifestMetadata(e){return e?(this.zip.remove(e),delete this.manifest["file-entries"][e],this):this}addMetadataContents(){return this.zip.file(Ln.PACKAGE_MAP.METADATA.NAME,"{}"),this}addManifestContents(){return this.zip.file(Ln.PACKAGE_MAP.MANIFEST.NAME,JSON.stringify(this.manifest)),this}addJSONContent(e){return bn.isObject(e)&&(e=JSON.stringify(e)),this.zip.file(Ln.PACKAGE_MAP.CONTENT_JSON.NAME,e),this}addXMLContent(){const e=n(r,"../common/templates/content.xml");return this.zip.file(Ln.PACKAGE_MAP.CONTENT_XML.NAME,kn.readFileSync(e)),this}}}).call(this)}).call(this,{isBuffer:function(e){return null!=e&&(Wn(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Wn(e.slice(0,0))}(e)||!!e._isBuffer)}},h,"/src/utils");var qn={},Kn=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),Xn=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||Kn(t,e,r)};Object.defineProperty(qn,"__esModule",{value:!0}),Xn(vn,qn),Xn(Tn,qn),Xn(Cn,qn),Xn(En,qn),Xn(Vn,qn);var Zn={};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.Dumper=void 0;const Jn='<?xml version="1.0" encoding="UTF-8" standalone="no"?><xmap-content xmlns="urn:xmind:xmap:xmlns:content:2.0" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" modified-by="bruce" timestamp="1503058545540" version="2.0"><sheet id="7abtd0ssc7n4pi1nu6i7b6lsdh" modified-by="bruce" theme="0kdeemiijde6nuk97e4t0vpp54" timestamp="1503058545540"><topic id="1vr0lcte2og4t2sopiogvdmifc" modified-by="bruce" structure-class="org.xmind.ui.logic.right" timestamp="1503058545417"><title>Warning\n警告\nAttention\nWarnung\n경고</title><children><topics type="attached"><topic id="71h1aip2t1o8vvm0a41nausaar" modified-by="bruce" timestamp="1503058545423"><title svg:width="500">This file can not be opened normally, please do not modify and save, otherwise the contents will be permanently lost！</title><children><topics type="attached"><topic id="428akmkh9a0tog6c91qj995qdl" modified-by="bruce" timestamp="1503058545427"><title>You can try using XMind 8 Update 3 or later version to open</title></topic></topics></children></topic><topic id="2kb87f8m38b3hnfhp450c7q35e" modified-by="bruce" timestamp="1503058545434"><title svg:width="500">该文件无法正常打开，请勿修改并保存，否则文件内容将会永久性丢失！</title><children><topics type="attached"><topic id="3m9hoo4a09n53ofl6fohdun99f" modified-by="bruce" timestamp="1503058545438"><title>你可以尝试使用 XMind 8 Update 3 或更新版本打开</title></topic></topics></children></topic><topic id="7r3r4617hvh931ot9obi595r8f" modified-by="bruce" timestamp="1503058545444"><title svg:width="500">該文件無法正常打開，請勿修改並保存，否則文件內容將會永久性丟失！</title><children><topics type="attached"><topic id="691pgka6gmgpgkacaa0h3f1hjb" modified-by="bruce" timestamp="1503058545448"><title>你可以嘗試使用 XMind 8 Update 3 或更新版本打開</title></topic></topics></children></topic><topic id="0f2e3rpkfahg4spg4nda946r0b" modified-by="bruce" timestamp="1503058545453"><title svg:width="500">この文書は正常に開かないので、修正して保存しないようにしてください。そうでないと、書類の内容が永久に失われます。！</title><children><topics type="attached"><topic id="4vuubta53ksc1falk46mevge0t" modified-by="bruce" timestamp="1503058545457"><title>XMind 8 Update 3 や更新版を使って開くこともできます</title></topic></topics></children></topic><topic id="70n9i4u3lb89sq9l1m1bs255j5" modified-by="bruce" timestamp="1503058545463"><title svg:width="500">Datei kann nicht richtig geöffnet werden. Bitte ändern Sie diese Datei nicht und speichern Sie sie, sonst wird die Datei endgültig gelöscht werden.</title><children><topics type="attached"><topic id="1qpc5ee298p2sqeqbinpca46b7" modified-by="bruce" timestamp="1503058545466"><title svg:width="500">Bitte versuchen Sie, diese Datei mit XMind 8 Update 3 oder später zu öffnen.</title></topic></topics></children></topic><topic id="4dmes10uc19pq7enu8sc4bmvif" modified-by="bruce" timestamp="1503058545473"><title svg:width="500">Ce fichier ne peut pas ouvert normalement, veuillez le rédiger et sauvegarder, sinon le fichier sera perdu en permanence. </title><children><topics type="attached"><topic id="5f0rivgubii2launodiln7sdkt" modified-by="bruce" timestamp="1503058545476"><title svg:width="500">Vous pouvez essayer d\'ouvrir avec XMind 8 Update 3 ou avec une version plus récente.</title></topic></topics></children></topic><topic id="10pn1os1sgfsnqa8akabom5pej" modified-by="bruce" timestamp="1503058545481"><title svg:width="500">파일을 정상적으로 열 수 없으며, 수정 및 저장하지 마십시오. 그렇지 않으면 파일의 내용이 영구적으로 손실됩니다!</title><children><topics type="attached"><topic id="0l2nr0fq3em22rctapkj46ue58" modified-by="bruce" timestamp="1503058545484"><title svg:width="500">XMind 8 Update 3 또는 이후 버전을 사용하여</title></topic></topics></children></topic></topics></children><extensions><extension provider="org.xmind.ui.map.unbalanced"><content><right-number>-1</right-number></content></extension></extensions></topic><title>Sheet 1</title></sheet></xmap-content>',Qn={MANIFEST:{NAME:"manifest.json",TYPE:"json"},CONTENT_JSON:{NAME:"content.json",TYPE:"json"},CONTENT_XML:{NAME:"content.xml",TYPE:"xml"},METADATA:{NAME:"metadata.json",TYPE:"json"}};Zn.Dumper=class{constructor(e={}){if(this.options=e,!(e.workbook instanceof qn.Workbook))throw new Error("The instance of workbook is required");this.workbook=e.workbook}dumping(){return[].concat(this.json).concat(this.xml).concat(this.manifest).concat(this.metadata)}wrap(e,t){return{filename:e,value:t}}get metadata(){return this.wrap(Qn.METADATA.NAME,"{}")}get manifest(){return this.wrap(Qn.MANIFEST.NAME,'{"file-entries":{"content.json":{},"metadata.json":{}}}')}get json(){const e=this.workbook.toString();return this.wrap(Qn.CONTENT_JSON.NAME,e)}get xml(){return this.wrap(Qn.CONTENT_XML.NAME,Jn)}};var eo={};(function(e){(function(){"use strict";Object.defineProperty(eo,"__esModule",{value:!0}),Object.assign(e,{Workbook:vn.Workbook,Topic:Tn.Topic,Marker:Cn.Marker,Dumper:Zn.Dumper})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();